var Vv=Object.defineProperty;var Bv=(e,t,r)=>t in e?Vv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mn=(e,t,r)=>Bv(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Fv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ip(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Dp={exports:{}},ca={},Lp={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),Uv=Symbol.for("react.portal"),zv=Symbol.for("react.fragment"),Wv=Symbol.for("react.strict_mode"),qv=Symbol.for("react.profiler"),Hv=Symbol.for("react.provider"),Gv=Symbol.for("react.context"),Kv=Symbol.for("react.forward_ref"),Yv=Symbol.for("react.suspense"),Qv=Symbol.for("react.memo"),Jv=Symbol.for("react.lazy"),Wd=Symbol.iterator;function Xv(e){return e===null||typeof e!="object"?null:(e=Wd&&e[Wd]||e["@@iterator"],typeof e=="function"?e:null)}var Mp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vp=Object.assign,Bp={};function is(e,t,r){this.props=e,this.context=t,this.refs=Bp,this.updater=r||Mp}is.prototype.isReactComponent={};is.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};is.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fp(){}Fp.prototype=is.prototype;function au(e,t,r){this.props=e,this.context=t,this.refs=Bp,this.updater=r||Mp}var lu=au.prototype=new Fp;lu.constructor=au;Vp(lu,is.prototype);lu.isPureReactComponent=!0;var qd=Array.isArray,Up=Object.prototype.hasOwnProperty,cu={current:null},zp={key:!0,ref:!0,__self:!0,__source:!0};function Wp(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Up.call(t,n)&&!zp.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:vi,type:e,key:i,ref:o,props:s,_owner:cu.current}}function Zv(e,t){return{$$typeof:vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uu(e){return typeof e=="object"&&e!==null&&e.$$typeof===vi}function ew(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Hd=/\/+/g;function Wa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ew(""+e.key):t.toString(36)}function lo(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vi:case Uv:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Wa(o,0):n,qd(s)?(r="",e!=null&&(r=e.replace(Hd,"$&/")+"/"),lo(s,t,r,"",function(c){return c})):s!=null&&(uu(s)&&(s=Zv(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hd,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",qd(e))for(var a=0;a<e.length;a++){i=e[a];var l=n+Wa(i,a);o+=lo(i,t,r,l,s)}else if(l=Xv(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=n+Wa(i,a++),o+=lo(i,t,r,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ni(e,t,r){if(e==null)return e;var n=[],s=0;return lo(e,n,"","",function(i){return t.call(r,i,s++)}),n}function tw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Le={current:null},co={transition:null},rw={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:co,ReactCurrentOwner:cu};function qp(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:Ni,forEach:function(e,t,r){Ni(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ni(e,function(){t++}),t},toArray:function(e){return Ni(e,function(t){return t})||[]},only:function(e){if(!uu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=is;F.Fragment=zv;F.Profiler=qv;F.PureComponent=au;F.StrictMode=Wv;F.Suspense=Yv;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw;F.act=qp;F.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Vp({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=cu.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Up.call(t,l)&&!zp.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:vi,type:e.type,key:s,ref:i,props:n,_owner:o}};F.createContext=function(e){return e={$$typeof:Gv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hv,_context:e},e.Consumer=e};F.createElement=Wp;F.createFactory=function(e){var t=Wp.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:Kv,render:e}};F.isValidElement=uu;F.lazy=function(e){return{$$typeof:Jv,_payload:{_status:-1,_result:e},_init:tw}};F.memo=function(e,t){return{$$typeof:Qv,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=co.transition;co.transition={};try{e()}finally{co.transition=t}};F.unstable_act=qp;F.useCallback=function(e,t){return Le.current.useCallback(e,t)};F.useContext=function(e){return Le.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return Le.current.useDeferredValue(e)};F.useEffect=function(e,t){return Le.current.useEffect(e,t)};F.useId=function(){return Le.current.useId()};F.useImperativeHandle=function(e,t,r){return Le.current.useImperativeHandle(e,t,r)};F.useInsertionEffect=function(e,t){return Le.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return Le.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return Le.current.useMemo(e,t)};F.useReducer=function(e,t,r){return Le.current.useReducer(e,t,r)};F.useRef=function(e){return Le.current.useRef(e)};F.useState=function(e){return Le.current.useState(e)};F.useSyncExternalStore=function(e,t,r){return Le.current.useSyncExternalStore(e,t,r)};F.useTransition=function(){return Le.current.useTransition()};F.version="18.3.1";Lp.exports=F;var _=Lp.exports;const Gt=Fv(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw=_,sw=Symbol.for("react.element"),iw=Symbol.for("react.fragment"),ow=Object.prototype.hasOwnProperty,aw=nw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lw={key:!0,ref:!0,__self:!0,__source:!0};function Hp(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)ow.call(t,n)&&!lw.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:sw,type:e,key:i,ref:o,props:s,_owner:aw.current}}ca.Fragment=iw;ca.jsx=Hp;ca.jsxs=Hp;Dp.exports=ca;var h=Dp.exports,Bl={},Gp={exports:{}},st={},Kp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,$){var V=C.length;C.push($);e:for(;0<V;){var M=V-1>>>1,H=C[M];if(0<s(H,$))C[M]=$,C[V]=H,V=M;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var $=C[0],V=C.pop();if(V!==$){C[0]=V;e:for(var M=0,H=C.length,Ge=H>>>1;M<Ge;){var ot=2*(M+1)-1,Ve=C[ot],je=ot+1,$t=C[je];if(0>s(Ve,V))je<H&&0>s($t,Ve)?(C[M]=$t,C[je]=V,M=je):(C[M]=Ve,C[ot]=V,M=ot);else if(je<H&&0>s($t,V))C[M]=$t,C[je]=V,M=je;else break e}}return $}function s(C,$){var V=C.sortIndex-$.sortIndex;return V!==0?V:C.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(C){for(var $=r(c);$!==null;){if($.callback===null)n(c);else if($.startTime<=C)n(c),$.sortIndex=$.expirationTime,t(l,$);else break;$=r(c)}}function x(C){if(w=!1,m(C),!g)if(r(l)!==null)g=!0,q(S);else{var $=r(c);$!==null&&ye(x,$.startTime-C)}}function S(C,$){g=!1,w&&(w=!1,y(E),E=-1),p=!0;var V=f;try{for(m($),d=r(l);d!==null&&(!(d.expirationTime>$)||C&&!Q());){var M=d.callback;if(typeof M=="function"){d.callback=null,f=d.priorityLevel;var H=M(d.expirationTime<=$);$=e.unstable_now(),typeof H=="function"?d.callback=H:d===r(l)&&n(l),m($)}else n(l);d=r(l)}if(d!==null)var Ge=!0;else{var ot=r(c);ot!==null&&ye(x,ot.startTime-$),Ge=!1}return Ge}finally{d=null,f=V,p=!1}}var k=!1,j=null,E=-1,N=5,I=-1;function Q(){return!(e.unstable_now()-I<N)}function te(){if(j!==null){var C=e.unstable_now();I=C;var $=!0;try{$=j(!0,C)}finally{$?ge():(k=!1,j=null)}}else k=!1}var ge;if(typeof v=="function")ge=function(){v(te)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,J=U.port2;U.port1.onmessage=te,ge=function(){J.postMessage(null)}}else ge=function(){b(te,0)};function q(C){j=C,k||(k=!0,ge())}function ye(C,$){E=b(function(){C(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,q(S))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(C){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var V=f;f=$;try{return C()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,$){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var V=f;f=C;try{return $()}finally{f=V}},e.unstable_scheduleCallback=function(C,$,V){var M=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?M+V:M):V=M,C){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,C={id:u++,callback:$,priorityLevel:C,startTime:V,expirationTime:H,sortIndex:-1},V>M?(C.sortIndex=V,t(c,C),r(l)===null&&C===r(c)&&(w?(y(E),E=-1):w=!0,ye(x,V-M))):(C.sortIndex=H,t(l,C),g||p||(g=!0,q(S))),C},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(C){var $=f;return function(){var V=f;f=$;try{return C.apply(this,arguments)}finally{f=V}}}})(Yp);Kp.exports=Yp;var cw=Kp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=_,rt=cw;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qp=new Set,Ks={};function cn(e,t){Kn(e,t),Kn(e+"Capture",t)}function Kn(e,t){for(Ks[e]=t,e=0;e<t.length;e++)Qp.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fl=Object.prototype.hasOwnProperty,dw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gd={},Kd={};function hw(e){return Fl.call(Kd,e)?!0:Fl.call(Gd,e)?!1:dw.test(e)?Kd[e]=!0:(Gd[e]=!0,!1)}function fw(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pw(e,t,r,n){if(t===null||typeof t>"u"||fw(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pe[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var du=/[\-:]([a-z])/g;function hu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(du,hu);Pe[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(du,hu);Pe[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(du,hu);Pe[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function fu(e,t,r,n){var s=Pe.hasOwnProperty(t)?Pe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pw(t,r,s,n)&&(r=null),n||s===null?hw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var er=uw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ai=Symbol.for("react.element"),jn=Symbol.for("react.portal"),En=Symbol.for("react.fragment"),pu=Symbol.for("react.strict_mode"),Ul=Symbol.for("react.profiler"),Jp=Symbol.for("react.provider"),Xp=Symbol.for("react.context"),mu=Symbol.for("react.forward_ref"),zl=Symbol.for("react.suspense"),Wl=Symbol.for("react.suspense_list"),gu=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Zp=Symbol.for("react.offscreen"),Yd=Symbol.iterator;function fs(e){return e===null||typeof e!="object"?null:(e=Yd&&e[Yd]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Object.assign,qa;function ks(e){if(qa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qa=t&&t[1]||""}return`
`+qa+e}var Ha=!1;function Ga(e,t){if(!e||Ha)return"";Ha=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ha=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ks(e):""}function mw(e){switch(e.tag){case 5:return ks(e.type);case 16:return ks("Lazy");case 13:return ks("Suspense");case 19:return ks("SuspenseList");case 0:case 2:case 15:return e=Ga(e.type,!1),e;case 11:return e=Ga(e.type.render,!1),e;case 1:return e=Ga(e.type,!0),e;default:return""}}function ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case En:return"Fragment";case jn:return"Portal";case Ul:return"Profiler";case pu:return"StrictMode";case zl:return"Suspense";case Wl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xp:return(e.displayName||"Context")+".Consumer";case Jp:return(e._context.displayName||"Context")+".Provider";case mu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gu:return t=e.displayName||null,t!==null?t:ql(e.type)||"Memo";case ar:t=e._payload,e=e._init;try{return ql(e(t))}catch{}}return null}function gw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ql(t);case 8:return t===pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Er(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function em(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yw(e){var t=em(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ri(e){e._valueTracker||(e._valueTracker=yw(e))}function tm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=em(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function jo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hl(e,t){var r=t.checked;return oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Qd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Er(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rm(e,t){t=t.checked,t!=null&&fu(e,"checked",t,!1)}function Gl(e,t){rm(e,t);var r=Er(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Kl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Kl(e,t.type,Er(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Kl(e,t,r){(t!=="number"||jo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var js=Array.isArray;function Fn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Er(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Yl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(js(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Er(r)}}function nm(e,t){var r=Er(t.value),n=Er(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Zd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ql(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oi,im=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ys(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vw=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(e){vw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),As[t]=As[e]})});function om(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||As.hasOwnProperty(e)&&As[e]?(""+t).trim():t+"px"}function am(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=om(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var ww=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jl(e,t){if(t){if(ww[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Xl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=null;function yu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ec=null,Un=null,zn=null;function eh(e){if(e=bi(e)){if(typeof ec!="function")throw Error(P(280));var t=e.stateNode;t&&(t=pa(t),ec(e.stateNode,e.type,t))}}function lm(e){Un?zn?zn.push(e):zn=[e]:Un=e}function cm(){if(Un){var e=Un,t=zn;if(zn=Un=null,eh(e),t)for(e=0;e<t.length;e++)eh(t[e])}}function um(e,t){return e(t)}function dm(){}var Ka=!1;function hm(e,t,r){if(Ka)return e(t,r);Ka=!0;try{return um(e,t,r)}finally{Ka=!1,(Un!==null||zn!==null)&&(dm(),cm())}}function Qs(e,t){var r=e.stateNode;if(r===null)return null;var n=pa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var tc=!1;if(Kt)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){tc=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{tc=!1}function xw(e,t,r,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Rs=!1,Eo=null,To=!1,rc=null,bw={onError:function(e){Rs=!0,Eo=e}};function _w(e,t,r,n,s,i,o,a,l){Rs=!1,Eo=null,xw.apply(bw,arguments)}function Sw(e,t,r,n,s,i,o,a,l){if(_w.apply(this,arguments),Rs){if(Rs){var c=Eo;Rs=!1,Eo=null}else throw Error(P(198));To||(To=!0,rc=c)}}function un(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function fm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function th(e){if(un(e)!==e)throw Error(P(188))}function kw(e){var t=e.alternate;if(!t){if(t=un(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return th(s),e;if(i===n)return th(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function pm(e){return e=kw(e),e!==null?mm(e):null}function mm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mm(e);if(t!==null)return t;e=e.sibling}return null}var gm=rt.unstable_scheduleCallback,rh=rt.unstable_cancelCallback,jw=rt.unstable_shouldYield,Ew=rt.unstable_requestPaint,ue=rt.unstable_now,Tw=rt.unstable_getCurrentPriorityLevel,vu=rt.unstable_ImmediatePriority,ym=rt.unstable_UserBlockingPriority,Po=rt.unstable_NormalPriority,Pw=rt.unstable_LowPriority,vm=rt.unstable_IdlePriority,ua=null,At=null;function Cw(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(ua,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Rw,Nw=Math.log,Aw=Math.LN2;function Rw(e){return e>>>=0,e===0?32:31-(Nw(e)/Aw|0)|0}var $i=64,Ii=4194304;function Es(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Co(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Es(a):(i&=o,i!==0&&(n=Es(i)))}else o=r&~s,o!==0?n=Es(o):i!==0&&(n=Es(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-_t(t),s=1<<r,n|=e[r],t&=~s;return n}function Ow(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $w(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-_t(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=Ow(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function nc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wm(){var e=$i;return $i<<=1,!($i&4194240)&&($i=64),e}function Ya(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=r}function Iw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-_t(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function wu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-_t(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var W=0;function xm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bm,xu,_m,Sm,km,sc=!1,Di=[],yr=null,vr=null,wr=null,Js=new Map,Xs=new Map,dr=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nh(e,t){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":Js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(t.pointerId)}}function ms(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=bi(t),t!==null&&xu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Lw(e,t,r,n,s){switch(t){case"focusin":return yr=ms(yr,e,t,r,n,s),!0;case"dragenter":return vr=ms(vr,e,t,r,n,s),!0;case"mouseover":return wr=ms(wr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Js.set(i,ms(Js.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Xs.set(i,ms(Xs.get(i)||null,e,t,r,n,s)),!0}return!1}function jm(e){var t=Yr(e.target);if(t!==null){var r=un(t);if(r!==null){if(t=r.tag,t===13){if(t=fm(r),t!==null){e.blockedOn=t,km(e.priority,function(){_m(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ic(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Zl=n,r.target.dispatchEvent(n),Zl=null}else return t=bi(r),t!==null&&xu(t),e.blockedOn=r,!1;t.shift()}return!0}function sh(e,t,r){uo(e)&&r.delete(t)}function Mw(){sc=!1,yr!==null&&uo(yr)&&(yr=null),vr!==null&&uo(vr)&&(vr=null),wr!==null&&uo(wr)&&(wr=null),Js.forEach(sh),Xs.forEach(sh)}function gs(e,t){e.blockedOn===t&&(e.blockedOn=null,sc||(sc=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Mw)))}function Zs(e){function t(s){return gs(s,e)}if(0<Di.length){gs(Di[0],e);for(var r=1;r<Di.length;r++){var n=Di[r];n.blockedOn===e&&(n.blockedOn=null)}}for(yr!==null&&gs(yr,e),vr!==null&&gs(vr,e),wr!==null&&gs(wr,e),Js.forEach(t),Xs.forEach(t),r=0;r<dr.length;r++)n=dr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<dr.length&&(r=dr[0],r.blockedOn===null);)jm(r),r.blockedOn===null&&dr.shift()}var Wn=er.ReactCurrentBatchConfig,No=!0;function Vw(e,t,r,n){var s=W,i=Wn.transition;Wn.transition=null;try{W=1,bu(e,t,r,n)}finally{W=s,Wn.transition=i}}function Bw(e,t,r,n){var s=W,i=Wn.transition;Wn.transition=null;try{W=4,bu(e,t,r,n)}finally{W=s,Wn.transition=i}}function bu(e,t,r,n){if(No){var s=ic(e,t,r,n);if(s===null)il(e,t,n,Ao,r),nh(e,n);else if(Lw(s,e,t,r,n))n.stopPropagation();else if(nh(e,n),t&4&&-1<Dw.indexOf(e)){for(;s!==null;){var i=bi(s);if(i!==null&&bm(i),i=ic(e,t,r,n),i===null&&il(e,t,n,Ao,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else il(e,t,n,null,r)}}var Ao=null;function ic(e,t,r,n){if(Ao=null,e=yu(n),e=Yr(e),e!==null)if(t=un(e),t===null)e=null;else if(r=t.tag,r===13){if(e=fm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ao=e,null}function Em(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tw()){case vu:return 1;case ym:return 4;case Po:case Pw:return 16;case vm:return 536870912;default:return 16}default:return 16}}var mr=null,_u=null,ho=null;function Tm(){if(ho)return ho;var e,t=_u,r=t.length,n,s="value"in mr?mr.value:mr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return ho=s.slice(e,1<n?1-n:void 0)}function fo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Li(){return!0}function ih(){return!1}function it(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Li:ih,this.isPropagationStopped=ih,this}return oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),t}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=it(os),xi=oe({},os,{view:0,detail:0}),Fw=it(xi),Qa,Ja,ys,da=oe({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(Qa=e.screenX-ys.screenX,Ja=e.screenY-ys.screenY):Ja=Qa=0,ys=e),Qa)},movementY:function(e){return"movementY"in e?e.movementY:Ja}}),oh=it(da),Uw=oe({},da,{dataTransfer:0}),zw=it(Uw),Ww=oe({},xi,{relatedTarget:0}),Xa=it(Ww),qw=oe({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Hw=it(qw),Gw=oe({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kw=it(Gw),Yw=oe({},os,{data:0}),ah=it(Yw),Qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xw[e])?!!t[e]:!1}function ku(){return Zw}var ex=oe({},xi,{key:function(e){if(e.key){var t=Qw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(e){return e.type==="keypress"?fo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tx=it(ex),rx=oe({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lh=it(rx),nx=oe({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),sx=it(nx),ix=oe({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),ox=it(ix),ax=oe({},da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lx=it(ax),cx=[9,13,27,32],ju=Kt&&"CompositionEvent"in window,Os=null;Kt&&"documentMode"in document&&(Os=document.documentMode);var ux=Kt&&"TextEvent"in window&&!Os,Pm=Kt&&(!ju||Os&&8<Os&&11>=Os),ch=" ",uh=!1;function Cm(e,t){switch(e){case"keyup":return cx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tn=!1;function dx(e,t){switch(e){case"compositionend":return Nm(t);case"keypress":return t.which!==32?null:(uh=!0,ch);case"textInput":return e=t.data,e===ch&&uh?null:e;default:return null}}function hx(e,t){if(Tn)return e==="compositionend"||!ju&&Cm(e,t)?(e=Tm(),ho=_u=mr=null,Tn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pm&&t.locale!=="ko"?null:t.data;default:return null}}var fx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fx[e.type]:t==="textarea"}function Am(e,t,r,n){lm(n),t=Ro(t,"onChange"),0<t.length&&(r=new Su("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $s=null,ei=null;function px(e){Um(e,0)}function ha(e){var t=Nn(e);if(tm(t))return e}function mx(e,t){if(e==="change")return t}var Rm=!1;if(Kt){var Za;if(Kt){var el="oninput"in document;if(!el){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),el=typeof hh.oninput=="function"}Za=el}else Za=!1;Rm=Za&&(!document.documentMode||9<document.documentMode)}function fh(){$s&&($s.detachEvent("onpropertychange",Om),ei=$s=null)}function Om(e){if(e.propertyName==="value"&&ha(ei)){var t=[];Am(t,ei,e,yu(e)),hm(px,t)}}function gx(e,t,r){e==="focusin"?(fh(),$s=t,ei=r,$s.attachEvent("onpropertychange",Om)):e==="focusout"&&fh()}function yx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ha(ei)}function vx(e,t){if(e==="click")return ha(t)}function wx(e,t){if(e==="input"||e==="change")return ha(t)}function xx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:xx;function ti(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Fl.call(t,s)||!kt(e[s],t[s]))return!1}return!0}function ph(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mh(e,t){var r=ph(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ph(r)}}function $m(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$m(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Im(){for(var e=window,t=jo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=jo(e.document)}return t}function Eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bx(e){var t=Im(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&$m(r.ownerDocument.documentElement,r)){if(n!==null&&Eu(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=mh(r,i);var o=mh(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _x=Kt&&"documentMode"in document&&11>=document.documentMode,Pn=null,oc=null,Is=null,ac=!1;function gh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ac||Pn==null||Pn!==jo(n)||(n=Pn,"selectionStart"in n&&Eu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Is&&ti(Is,n)||(Is=n,n=Ro(oc,"onSelect"),0<n.length&&(t=new Su("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Pn)))}function Mi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cn={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},tl={},Dm={};Kt&&(Dm=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);function fa(e){if(tl[e])return tl[e];if(!Cn[e])return e;var t=Cn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Dm)return tl[e]=t[r];return e}var Lm=fa("animationend"),Mm=fa("animationiteration"),Vm=fa("animationstart"),Bm=fa("transitionend"),Fm=new Map,yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Fm.set(e,t),cn(t,[e])}for(var rl=0;rl<yh.length;rl++){var nl=yh[rl],Sx=nl.toLowerCase(),kx=nl[0].toUpperCase()+nl.slice(1);Nr(Sx,"on"+kx)}Nr(Lm,"onAnimationEnd");Nr(Mm,"onAnimationIteration");Nr(Vm,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(Bm,"onTransitionEnd");Kn("onMouseEnter",["mouseout","mouseover"]);Kn("onMouseLeave",["mouseout","mouseover"]);Kn("onPointerEnter",["pointerout","pointerover"]);Kn("onPointerLeave",["pointerout","pointerover"]);cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function vh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Sw(n,t,void 0,e),e.currentTarget=null}function Um(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;vh(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;vh(s,a,c),i=l}}}if(To)throw e=rc,To=!1,rc=null,e}function X(e,t){var r=t[hc];r===void 0&&(r=t[hc]=new Set);var n=e+"__bubble";r.has(n)||(zm(t,e,2,!1),r.add(n))}function sl(e,t,r){var n=0;t&&(n|=4),zm(r,e,n,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function ri(e){if(!e[Vi]){e[Vi]=!0,Qp.forEach(function(r){r!=="selectionchange"&&(jx.has(r)||sl(r,!1,e),sl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vi]||(t[Vi]=!0,sl("selectionchange",!1,t))}}function zm(e,t,r,n){switch(Em(t)){case 1:var s=Vw;break;case 4:s=Bw;break;default:s=bu}r=s.bind(null,t,r,e),s=void 0,!tc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function il(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Yr(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}hm(function(){var c=i,u=yu(r),d=[];e:{var f=Fm.get(e);if(f!==void 0){var p=Su,g=e;switch(e){case"keypress":if(fo(r)===0)break e;case"keydown":case"keyup":p=tx;break;case"focusin":g="focus",p=Xa;break;case"focusout":g="blur",p=Xa;break;case"beforeblur":case"afterblur":p=Xa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sx;break;case Lm:case Mm:case Vm:p=Hw;break;case Bm:p=ox;break;case"scroll":p=Fw;break;case"wheel":p=lx;break;case"copy":case"cut":case"paste":p=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=lh}var w=(t&4)!==0,b=!w&&e==="scroll",y=w?f!==null?f+"Capture":null:f;w=[];for(var v=c,m;v!==null;){m=v;var x=m.stateNode;if(m.tag===5&&x!==null&&(m=x,y!==null&&(x=Qs(v,y),x!=null&&w.push(ni(v,x,m)))),b)break;v=v.return}0<w.length&&(f=new p(f,g,null,r,u),d.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Zl&&(g=r.relatedTarget||r.fromElement)&&(Yr(g)||g[Yt]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=c,g=g?Yr(g):null,g!==null&&(b=un(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(w=oh,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(w=lh,x="onPointerLeave",y="onPointerEnter",v="pointer"),b=p==null?f:Nn(p),m=g==null?f:Nn(g),f=new w(x,v+"leave",p,r,u),f.target=b,f.relatedTarget=m,x=null,Yr(u)===c&&(w=new w(y,v+"enter",g,r,u),w.target=m,w.relatedTarget=b,x=w),b=x,p&&g)t:{for(w=p,y=g,v=0,m=w;m;m=gn(m))v++;for(m=0,x=y;x;x=gn(x))m++;for(;0<v-m;)w=gn(w),v--;for(;0<m-v;)y=gn(y),m--;for(;v--;){if(w===y||y!==null&&w===y.alternate)break t;w=gn(w),y=gn(y)}w=null}else w=null;p!==null&&wh(d,f,p,w,!1),g!==null&&b!==null&&wh(d,b,g,w,!0)}}e:{if(f=c?Nn(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=mx;else if(dh(f))if(Rm)S=wx;else{S=yx;var k=gx}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=vx);if(S&&(S=S(e,c))){Am(d,S,r,u);break e}k&&k(e,f,c),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Kl(f,"number",f.value)}switch(k=c?Nn(c):window,e){case"focusin":(dh(k)||k.contentEditable==="true")&&(Pn=k,oc=c,Is=null);break;case"focusout":Is=oc=Pn=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,gh(d,r,u);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":gh(d,r,u)}var j;if(ju)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Tn?Cm(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Pm&&r.locale!=="ko"&&(Tn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Tn&&(j=Tm()):(mr=u,_u="value"in mr?mr.value:mr.textContent,Tn=!0)),k=Ro(c,E),0<k.length&&(E=new ah(E,e,null,r,u),d.push({event:E,listeners:k}),j?E.data=j:(j=Nm(r),j!==null&&(E.data=j)))),(j=ux?dx(e,r):hx(e,r))&&(c=Ro(c,"onBeforeInput"),0<c.length&&(u=new ah("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=j))}Um(d,t)})}function ni(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ro(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qs(e,r),i!=null&&n.unshift(ni(e,i,s)),i=Qs(e,t),i!=null&&n.push(ni(e,i,s))),e=e.return}return n}function gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wh(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=Qs(r,i),l!=null&&o.unshift(ni(r,l,a))):s||(l=Qs(r,i),l!=null&&o.push(ni(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Ex=/\r\n?/g,Tx=/\u0000|\uFFFD/g;function xh(e){return(typeof e=="string"?e:""+e).replace(Ex,`
`).replace(Tx,"")}function Bi(e,t,r){if(t=xh(t),xh(e)!==t&&r)throw Error(P(425))}function Oo(){}var lc=null,cc=null;function uc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,bh=typeof Promise=="function"?Promise:void 0,Cx=typeof queueMicrotask=="function"?queueMicrotask:typeof bh<"u"?function(e){return bh.resolve(null).then(e).catch(Nx)}:dc;function Nx(e){setTimeout(function(){throw e})}function ol(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Zs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Zs(t)}function xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _h(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var as=Math.random().toString(36).slice(2),Ct="__reactFiber$"+as,si="__reactProps$"+as,Yt="__reactContainer$"+as,hc="__reactEvents$"+as,Ax="__reactListeners$"+as,Rx="__reactHandles$"+as;function Yr(e){var t=e[Ct];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Yt]||r[Ct]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=_h(e);e!==null;){if(r=e[Ct])return r;e=_h(e)}return t}e=r,r=e.parentNode}return null}function bi(e){return e=e[Ct]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function pa(e){return e[si]||null}var fc=[],An=-1;function Ar(e){return{current:e}}function Z(e){0>An||(e.current=fc[An],fc[An]=null,An--)}function K(e,t){An++,fc[An]=e.current,e.current=t}var Tr={},Oe=Ar(Tr),ze=Ar(!1),nn=Tr;function Yn(e,t){var r=e.type.contextTypes;if(!r)return Tr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function We(e){return e=e.childContextTypes,e!=null}function $o(){Z(ze),Z(Oe)}function Sh(e,t,r){if(Oe.current!==Tr)throw Error(P(168));K(Oe,t),K(ze,r)}function Wm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,gw(e)||"Unknown",s));return oe({},r,n)}function Io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,nn=Oe.current,K(Oe,e),K(ze,ze.current),!0}function kh(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=Wm(e,t,nn),n.__reactInternalMemoizedMergedChildContext=e,Z(ze),Z(Oe),K(Oe,e)):Z(ze),K(ze,r)}var Bt=null,ma=!1,al=!1;function qm(e){Bt===null?Bt=[e]:Bt.push(e)}function Ox(e){ma=!0,qm(e)}function Rr(){if(!al&&Bt!==null){al=!0;var e=0,t=W;try{var r=Bt;for(W=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Bt=null,ma=!1}catch(s){throw Bt!==null&&(Bt=Bt.slice(e+1)),gm(vu,Rr),s}finally{W=t,al=!1}}return null}var Rn=[],On=0,Do=null,Lo=0,ct=[],ut=0,sn=null,Ft=1,Ut="";function Br(e,t){Rn[On++]=Lo,Rn[On++]=Do,Do=e,Lo=t}function Hm(e,t,r){ct[ut++]=Ft,ct[ut++]=Ut,ct[ut++]=sn,sn=e;var n=Ft;e=Ut;var s=32-_t(n)-1;n&=~(1<<s),r+=1;var i=32-_t(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ft=1<<32-_t(t)+s|r<<s|n,Ut=i+e}else Ft=1<<i|r<<s|n,Ut=e}function Tu(e){e.return!==null&&(Br(e,1),Hm(e,1,0))}function Pu(e){for(;e===Do;)Do=Rn[--On],Rn[On]=null,Lo=Rn[--On],Rn[On]=null;for(;e===sn;)sn=ct[--ut],ct[ut]=null,Ut=ct[--ut],ct[ut]=null,Ft=ct[--ut],ct[ut]=null}var et=null,Ze=null,ee=!1,bt=null;function Gm(e,t){var r=dt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function jh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,et=e,Ze=xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,et=e,Ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sn!==null?{id:Ft,overflow:Ut}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=dt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,et=e,Ze=null,!0):!1;default:return!1}}function pc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mc(e){if(ee){var t=Ze;if(t){var r=t;if(!jh(e,t)){if(pc(e))throw Error(P(418));t=xr(r.nextSibling);var n=et;t&&jh(e,t)?Gm(n,r):(e.flags=e.flags&-4097|2,ee=!1,et=e)}}else{if(pc(e))throw Error(P(418));e.flags=e.flags&-4097|2,ee=!1,et=e}}}function Eh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;et=e}function Fi(e){if(e!==et)return!1;if(!ee)return Eh(e),ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uc(e.type,e.memoizedProps)),t&&(t=Ze)){if(pc(e))throw Km(),Error(P(418));for(;t;)Gm(e,t),t=xr(t.nextSibling)}if(Eh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ze=xr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ze=null}}else Ze=et?xr(e.stateNode.nextSibling):null;return!0}function Km(){for(var e=Ze;e;)e=xr(e.nextSibling)}function Qn(){Ze=et=null,ee=!1}function Cu(e){bt===null?bt=[e]:bt.push(e)}var $x=er.ReactCurrentBatchConfig;function vs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Ui(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Th(e){var t=e._init;return t(e._payload)}function Ym(e){function t(y,v){if(e){var m=y.deletions;m===null?(y.deletions=[v],y.flags|=16):m.push(v)}}function r(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=kr(y,v),y.index=0,y.sibling=null,y}function i(y,v,m){return y.index=m,e?(m=y.alternate,m!==null?(m=m.index,m<v?(y.flags|=2,v):m):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,m,x){return v===null||v.tag!==6?(v=pl(m,y.mode,x),v.return=y,v):(v=s(v,m),v.return=y,v)}function l(y,v,m,x){var S=m.type;return S===En?u(y,v,m.props.children,x,m.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ar&&Th(S)===v.type)?(x=s(v,m.props),x.ref=vs(y,v,m),x.return=y,x):(x=xo(m.type,m.key,m.props,null,y.mode,x),x.ref=vs(y,v,m),x.return=y,x)}function c(y,v,m,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==m.containerInfo||v.stateNode.implementation!==m.implementation?(v=ml(m,y.mode,x),v.return=y,v):(v=s(v,m.children||[]),v.return=y,v)}function u(y,v,m,x,S){return v===null||v.tag!==7?(v=tn(m,y.mode,x,S),v.return=y,v):(v=s(v,m),v.return=y,v)}function d(y,v,m){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pl(""+v,y.mode,m),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ai:return m=xo(v.type,v.key,v.props,null,y.mode,m),m.ref=vs(y,null,v),m.return=y,m;case jn:return v=ml(v,y.mode,m),v.return=y,v;case ar:var x=v._init;return d(y,x(v._payload),m)}if(js(v)||fs(v))return v=tn(v,y.mode,m,null),v.return=y,v;Ui(y,v)}return null}function f(y,v,m,x){var S=v!==null?v.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:a(y,v,""+m,x);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ai:return m.key===S?l(y,v,m,x):null;case jn:return m.key===S?c(y,v,m,x):null;case ar:return S=m._init,f(y,v,S(m._payload),x)}if(js(m)||fs(m))return S!==null?null:u(y,v,m,x,null);Ui(y,m)}return null}function p(y,v,m,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(m)||null,a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ai:return y=y.get(x.key===null?m:x.key)||null,l(v,y,x,S);case jn:return y=y.get(x.key===null?m:x.key)||null,c(v,y,x,S);case ar:var k=x._init;return p(y,v,m,k(x._payload),S)}if(js(x)||fs(x))return y=y.get(m)||null,u(v,y,x,S,null);Ui(v,x)}return null}function g(y,v,m,x){for(var S=null,k=null,j=v,E=v=0,N=null;j!==null&&E<m.length;E++){j.index>E?(N=j,j=null):N=j.sibling;var I=f(y,j,m[E],x);if(I===null){j===null&&(j=N);break}e&&j&&I.alternate===null&&t(y,j),v=i(I,v,E),k===null?S=I:k.sibling=I,k=I,j=N}if(E===m.length)return r(y,j),ee&&Br(y,E),S;if(j===null){for(;E<m.length;E++)j=d(y,m[E],x),j!==null&&(v=i(j,v,E),k===null?S=j:k.sibling=j,k=j);return ee&&Br(y,E),S}for(j=n(y,j);E<m.length;E++)N=p(j,y,E,m[E],x),N!==null&&(e&&N.alternate!==null&&j.delete(N.key===null?E:N.key),v=i(N,v,E),k===null?S=N:k.sibling=N,k=N);return e&&j.forEach(function(Q){return t(y,Q)}),ee&&Br(y,E),S}function w(y,v,m,x){var S=fs(m);if(typeof S!="function")throw Error(P(150));if(m=S.call(m),m==null)throw Error(P(151));for(var k=S=null,j=v,E=v=0,N=null,I=m.next();j!==null&&!I.done;E++,I=m.next()){j.index>E?(N=j,j=null):N=j.sibling;var Q=f(y,j,I.value,x);if(Q===null){j===null&&(j=N);break}e&&j&&Q.alternate===null&&t(y,j),v=i(Q,v,E),k===null?S=Q:k.sibling=Q,k=Q,j=N}if(I.done)return r(y,j),ee&&Br(y,E),S;if(j===null){for(;!I.done;E++,I=m.next())I=d(y,I.value,x),I!==null&&(v=i(I,v,E),k===null?S=I:k.sibling=I,k=I);return ee&&Br(y,E),S}for(j=n(y,j);!I.done;E++,I=m.next())I=p(j,y,E,I.value,x),I!==null&&(e&&I.alternate!==null&&j.delete(I.key===null?E:I.key),v=i(I,v,E),k===null?S=I:k.sibling=I,k=I);return e&&j.forEach(function(te){return t(y,te)}),ee&&Br(y,E),S}function b(y,v,m,x){if(typeof m=="object"&&m!==null&&m.type===En&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ai:e:{for(var S=m.key,k=v;k!==null;){if(k.key===S){if(S=m.type,S===En){if(k.tag===7){r(y,k.sibling),v=s(k,m.props.children),v.return=y,y=v;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ar&&Th(S)===k.type){r(y,k.sibling),v=s(k,m.props),v.ref=vs(y,k,m),v.return=y,y=v;break e}r(y,k);break}else t(y,k);k=k.sibling}m.type===En?(v=tn(m.props.children,y.mode,x,m.key),v.return=y,y=v):(x=xo(m.type,m.key,m.props,null,y.mode,x),x.ref=vs(y,v,m),x.return=y,y=x)}return o(y);case jn:e:{for(k=m.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===m.containerInfo&&v.stateNode.implementation===m.implementation){r(y,v.sibling),v=s(v,m.children||[]),v.return=y,y=v;break e}else{r(y,v);break}else t(y,v);v=v.sibling}v=ml(m,y.mode,x),v.return=y,y=v}return o(y);case ar:return k=m._init,b(y,v,k(m._payload),x)}if(js(m))return g(y,v,m,x);if(fs(m))return w(y,v,m,x);Ui(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,v!==null&&v.tag===6?(r(y,v.sibling),v=s(v,m),v.return=y,y=v):(r(y,v),v=pl(m,y.mode,x),v.return=y,y=v),o(y)):r(y,v)}return b}var Jn=Ym(!0),Qm=Ym(!1),Mo=Ar(null),Vo=null,$n=null,Nu=null;function Au(){Nu=$n=Vo=null}function Ru(e){var t=Mo.current;Z(Mo),e._currentValue=t}function gc(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function qn(e,t){Vo=e,Nu=$n=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ue=!0),e.firstContext=null)}function ft(e){var t=e._currentValue;if(Nu!==e)if(e={context:e,memoizedValue:t,next:null},$n===null){if(Vo===null)throw Error(P(308));$n=e,Vo.dependencies={lanes:0,firstContext:e}}else $n=$n.next=e;return t}var Qr=null;function Ou(e){Qr===null?Qr=[e]:Qr.push(e)}function Jm(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ou(t)):(r.next=s.next,s.next=r),t.interleaved=r,Qt(e,n)}function Qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var lr=!1;function $u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function br(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,z&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Qt(e,r)}return s=n.interleaved,s===null?(t.next=t,Ou(n)):(t.next=s.next,s.next=t),n.interleaved=t,Qt(e,r)}function po(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wu(e,r)}}function Ph(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bo(e,t,r,n){var s=e.updateQueue;lr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,w=a;switch(f=t,p=r,w.tag){case 1:if(g=w.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=oe({},d,f);break e;case 2:lr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);an|=o,e.lanes=o,e.memoizedState=d}}function Ch(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var _i={},Rt=Ar(_i),ii=Ar(_i),oi=Ar(_i);function Jr(e){if(e===_i)throw Error(P(174));return e}function Iu(e,t){switch(K(oi,t),K(ii,e),K(Rt,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ql(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ql(t,e)}Z(Rt),K(Rt,t)}function Xn(){Z(Rt),Z(ii),Z(oi)}function Zm(e){Jr(oi.current);var t=Jr(Rt.current),r=Ql(t,e.type);t!==r&&(K(ii,e),K(Rt,r))}function Du(e){ii.current===e&&(Z(Rt),Z(ii))}var ne=Ar(0);function Fo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ll=[];function Lu(){for(var e=0;e<ll.length;e++)ll[e]._workInProgressVersionPrimary=null;ll.length=0}var mo=er.ReactCurrentDispatcher,cl=er.ReactCurrentBatchConfig,on=0,ie=null,we=null,Se=null,Uo=!1,Ds=!1,ai=0,Ix=0;function Ce(){throw Error(P(321))}function Mu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kt(e[r],t[r]))return!1;return!0}function Vu(e,t,r,n,s,i){if(on=i,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mo.current=e===null||e.memoizedState===null?Vx:Bx,e=r(n,s),Ds){i=0;do{if(Ds=!1,ai=0,25<=i)throw Error(P(301));i+=1,Se=we=null,t.updateQueue=null,mo.current=Fx,e=r(n,s)}while(Ds)}if(mo.current=zo,t=we!==null&&we.next!==null,on=0,Se=we=ie=null,Uo=!1,t)throw Error(P(300));return e}function Bu(){var e=ai!==0;return ai=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?ie.memoizedState=Se=e:Se=Se.next=e,Se}function pt(){if(we===null){var e=ie.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Se===null?ie.memoizedState:Se.next;if(t!==null)Se=t,we=e;else{if(e===null)throw Error(P(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Se===null?ie.memoizedState=Se=e:Se=Se.next=e}return Se}function li(e,t){return typeof t=="function"?t(e):t}function ul(e){var t=pt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=we,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((on&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,ie.lanes|=u,an|=u}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,kt(n,t.memoizedState)||(Ue=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ie.lanes|=i,an|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function dl(e){var t=pt(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);kt(i,t.memoizedState)||(Ue=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function eg(){}function tg(e,t){var r=ie,n=pt(),s=t(),i=!kt(n.memoizedState,s);if(i&&(n.memoizedState=s,Ue=!0),n=n.queue,Fu(sg.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Se!==null&&Se.memoizedState.tag&1){if(r.flags|=2048,ci(9,ng.bind(null,r,n,s,t),void 0,null),ke===null)throw Error(P(349));on&30||rg(r,t,s)}return s}function rg(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ng(e,t,r,n){t.value=r,t.getSnapshot=n,ig(t)&&og(e)}function sg(e,t,r){return r(function(){ig(t)&&og(e)})}function ig(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kt(e,r)}catch{return!0}}function og(e){var t=Qt(e,1);t!==null&&St(t,e,1,-1)}function Nh(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},t.queue=e,e=e.dispatch=Mx.bind(null,ie,e),[t.memoizedState,e]}function ci(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ag(){return pt().memoizedState}function go(e,t,r,n){var s=Pt();ie.flags|=e,s.memoizedState=ci(1|t,r,void 0,n===void 0?null:n)}function ga(e,t,r,n){var s=pt();n=n===void 0?null:n;var i=void 0;if(we!==null){var o=we.memoizedState;if(i=o.destroy,n!==null&&Mu(n,o.deps)){s.memoizedState=ci(t,r,i,n);return}}ie.flags|=e,s.memoizedState=ci(1|t,r,i,n)}function Ah(e,t){return go(8390656,8,e,t)}function Fu(e,t){return ga(2048,8,e,t)}function lg(e,t){return ga(4,2,e,t)}function cg(e,t){return ga(4,4,e,t)}function ug(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dg(e,t,r){return r=r!=null?r.concat([e]):null,ga(4,4,ug.bind(null,t,e),r)}function Uu(){}function hg(e,t){var r=pt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Mu(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function fg(e,t){var r=pt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Mu(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function pg(e,t,r){return on&21?(kt(r,t)||(r=wm(),ie.lanes|=r,an|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ue=!0),e.memoizedState=r)}function Dx(e,t){var r=W;W=r!==0&&4>r?r:4,e(!0);var n=cl.transition;cl.transition={};try{e(!1),t()}finally{W=r,cl.transition=n}}function mg(){return pt().memoizedState}function Lx(e,t,r){var n=Sr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},gg(e))yg(t,r);else if(r=Jm(e,t,r,n),r!==null){var s=De();St(r,e,n,s),vg(r,t,n)}}function Mx(e,t,r){var n=Sr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(gg(e))yg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,kt(a,o)){var l=t.interleaved;l===null?(s.next=s,Ou(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=Jm(e,t,s,n),r!==null&&(s=De(),St(r,e,n,s),vg(r,t,n))}}function gg(e){var t=e.alternate;return e===ie||t!==null&&t===ie}function yg(e,t){Ds=Uo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vg(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,wu(e,r)}}var zo={readContext:ft,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},Vx={readContext:ft,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:ft,useEffect:Ah,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,go(4194308,4,ug.bind(null,t,e),r)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){return go(4,2,e,t)},useMemo:function(e,t){var r=Pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Pt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Lx.bind(null,ie,e),[n.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:Nh,useDebugValue:Uu,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=Nh(!1),t=e[0];return e=Dx.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ie,s=Pt();if(ee){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),ke===null)throw Error(P(349));on&30||rg(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Ah(sg.bind(null,n,i,e),[e]),n.flags|=2048,ci(9,ng.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Pt(),t=ke.identifierPrefix;if(ee){var r=Ut,n=Ft;r=(n&~(1<<32-_t(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ai++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ix++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Bx={readContext:ft,useCallback:hg,useContext:ft,useEffect:Fu,useImperativeHandle:dg,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:fg,useReducer:ul,useRef:ag,useState:function(){return ul(li)},useDebugValue:Uu,useDeferredValue:function(e){var t=pt();return pg(t,we.memoizedState,e)},useTransition:function(){var e=ul(li)[0],t=pt().memoizedState;return[e,t]},useMutableSource:eg,useSyncExternalStore:tg,useId:mg,unstable_isNewReconciler:!1},Fx={readContext:ft,useCallback:hg,useContext:ft,useEffect:Fu,useImperativeHandle:dg,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:fg,useReducer:dl,useRef:ag,useState:function(){return dl(li)},useDebugValue:Uu,useDeferredValue:function(e){var t=pt();return we===null?t.memoizedState=e:pg(t,we.memoizedState,e)},useTransition:function(){var e=dl(li)[0],t=pt().memoizedState;return[e,t]},useMutableSource:eg,useSyncExternalStore:tg,useId:mg,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=oe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function yc(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:oe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ya={isMounted:function(e){return(e=e._reactInternals)?un(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=De(),s=Sr(e),i=Wt(n,s);i.payload=t,r!=null&&(i.callback=r),t=br(e,i,s),t!==null&&(St(t,e,s,n),po(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=De(),s=Sr(e),i=Wt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=br(e,i,s),t!==null&&(St(t,e,s,n),po(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=De(),n=Sr(e),s=Wt(r,n);s.tag=2,t!=null&&(s.callback=t),t=br(e,s,n),t!==null&&(St(t,e,n,r),po(t,e,n))}};function Rh(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ti(r,n)||!ti(s,i):!0}function wg(e,t,r){var n=!1,s=Tr,i=t.contextType;return typeof i=="object"&&i!==null?i=ft(i):(s=We(t)?nn:Oe.current,n=t.contextTypes,i=(n=n!=null)?Yn(e,s):Tr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Oh(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function vc(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},$u(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ft(i):(i=We(t)?nn:Oe.current,s.context=Yn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(yc(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ya.enqueueReplaceState(s,s.state,null),Bo(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zn(e,t){try{var r="",n=t;do r+=mw(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function hl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function wc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ux=typeof WeakMap=="function"?WeakMap:Map;function xg(e,t,r){r=Wt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){qo||(qo=!0,Cc=n),wc(e,t)},r}function bg(e,t,r){r=Wt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){wc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){wc(e,t),typeof n!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function $h(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ux;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=rb.bind(null,e,t,r),t.then(e,e))}function Ih(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dh(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wt(-1,1),t.tag=2,br(r,t,1))),r.lanes|=1),e)}var zx=er.ReactCurrentOwner,Ue=!1;function Ie(e,t,r,n){t.child=e===null?Qm(t,null,r,n):Jn(t,e.child,r,n)}function Lh(e,t,r,n,s){r=r.render;var i=t.ref;return qn(t,s),n=Vu(e,t,r,n,i,s),r=Bu(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jt(e,t,s)):(ee&&r&&Tu(t),t.flags|=1,Ie(e,t,n,s),t.child)}function Mh(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Qu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,_g(e,t,i,n,s)):(e=xo(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ti,r(o,n)&&e.ref===t.ref)return Jt(e,t,s)}return t.flags|=1,e=kr(i,n),e.ref=t.ref,e.return=t,t.child=e}function _g(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ti(i,n)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ue=!0);else return t.lanes=e.lanes,Jt(e,t,s)}return xc(e,t,r,n,s)}function Sg(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(Dn,Qe),Qe|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,K(Dn,Qe),Qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,K(Dn,Qe),Qe|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,K(Dn,Qe),Qe|=n;return Ie(e,t,s,r),t.child}function kg(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xc(e,t,r,n,s){var i=We(r)?nn:Oe.current;return i=Yn(t,i),qn(t,s),r=Vu(e,t,r,n,i,s),n=Bu(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jt(e,t,s)):(ee&&n&&Tu(t),t.flags|=1,Ie(e,t,r,s),t.child)}function Vh(e,t,r,n,s){if(We(r)){var i=!0;Io(t)}else i=!1;if(qn(t,s),t.stateNode===null)yo(e,t),wg(t,r,n),vc(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=ft(c):(c=We(r)?nn:Oe.current,c=Yn(t,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&Oh(t,o,n,c),lr=!1;var f=t.memoizedState;o.state=f,Bo(t,n,o,s),l=t.memoizedState,a!==n||f!==l||ze.current||lr?(typeof u=="function"&&(yc(t,r,u,n),l=t.memoizedState),(a=lr||Rh(t,r,a,n,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Xm(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yt(t.type,a),o.props=c,d=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ft(l):(l=We(r)?nn:Oe.current,l=Yn(t,l));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Oh(t,o,n,l),lr=!1,f=t.memoizedState,o.state=f,Bo(t,n,o,s);var g=t.memoizedState;a!==d||f!==g||ze.current||lr?(typeof p=="function"&&(yc(t,r,p,n),g=t.memoizedState),(c=lr||Rh(t,r,c,n,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return bc(e,t,r,n,i,s)}function bc(e,t,r,n,s,i){kg(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&kh(t,r,!1),Jt(e,t,i);n=t.stateNode,zx.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Jn(t,e.child,null,i),t.child=Jn(t,null,a,i)):Ie(e,t,a,i),t.memoizedState=n.state,s&&kh(t,r,!0),t.child}function jg(e){var t=e.stateNode;t.pendingContext?Sh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sh(e,t.context,!1),Iu(e,t.containerInfo)}function Bh(e,t,r,n,s){return Qn(),Cu(s),t.flags|=256,Ie(e,t,r,n),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Sc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eg(e,t,r){var n=t.pendingProps,s=ne.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),K(ne,s&1),e===null)return mc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xa(o,n,0,null),e=tn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Sc(r),t.memoizedState=_c,e):zu(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Wx(e,t,o,n,a,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=kr(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=kr(a,i):(i=tn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Sc(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=_c,n}return i=e.child,e=i.sibling,n=kr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function zu(e,t){return t=xa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zi(e,t,r,n){return n!==null&&Cu(n),Jn(t,e.child,null,r),e=zu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wx(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=hl(Error(P(422))),zi(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=xa({mode:"visible",children:n.children},s,0,null),i=tn(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Jn(t,e.child,null,o),t.child.memoizedState=Sc(o),t.memoizedState=_c,i);if(!(t.mode&1))return zi(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(P(419)),n=hl(i,n,void 0),zi(e,t,o,n)}if(a=(o&e.childLanes)!==0,Ue||a){if(n=ke,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qt(e,s),St(n,e,s,-1))}return Yu(),n=hl(Error(P(421))),zi(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=nb.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ze=xr(s.nextSibling),et=t,ee=!0,bt=null,e!==null&&(ct[ut++]=Ft,ct[ut++]=Ut,ct[ut++]=sn,Ft=e.id,Ut=e.overflow,sn=t),t=zu(t,n.children),t.flags|=4096,t)}function Fh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gc(e.return,t,r)}function fl(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Tg(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ie(e,t,n.children,r),n=ne.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fh(e,r,t);else if(e.tag===19)Fh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(K(ne,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Fo(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),fl(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Fo(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}fl(t,!0,r,null,i);break;case"together":fl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),an|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=kr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=kr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qx(e,t,r){switch(t.tag){case 3:jg(t),Qn();break;case 5:Zm(t);break;case 1:We(t.type)&&Io(t);break;case 4:Iu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;K(Mo,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(K(ne,ne.current&1),t.flags|=128,null):r&t.child.childLanes?Eg(e,t,r):(K(ne,ne.current&1),e=Jt(e,t,r),e!==null?e.sibling:null);K(ne,ne.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Tg(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(ne,ne.current),n)break;return null;case 22:case 23:return t.lanes=0,Sg(e,t,r)}return Jt(e,t,r)}var Pg,kc,Cg,Ng;Pg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};kc=function(){};Cg=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Jr(Rt.current);var i=null;switch(r){case"input":s=Hl(e,s),n=Hl(e,n),i=[];break;case"select":s=oe({},s,{value:void 0}),n=oe({},n,{value:void 0}),i=[];break;case"textarea":s=Yl(e,s),n=Yl(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Oo)}Jl(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ks.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&X("scroll",e),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Ng=function(e,t,r,n){r!==n&&(t.flags|=4)};function ws(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Hx(e,t,r){var n=t.pendingProps;switch(Pu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return We(t.type)&&$o(),Ne(t),null;case 3:return n=t.stateNode,Xn(),Z(ze),Z(Oe),Lu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bt!==null&&(Rc(bt),bt=null))),kc(e,t),Ne(t),null;case 5:Du(t);var s=Jr(oi.current);if(r=t.type,e!==null&&t.stateNode!=null)Cg(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return Ne(t),null}if(e=Jr(Rt.current),Fi(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ct]=t,n[si]=i,e=(t.mode&1)!==0,r){case"dialog":X("cancel",n),X("close",n);break;case"iframe":case"object":case"embed":X("load",n);break;case"video":case"audio":for(s=0;s<Ts.length;s++)X(Ts[s],n);break;case"source":X("error",n);break;case"img":case"image":case"link":X("error",n),X("load",n);break;case"details":X("toggle",n);break;case"input":Qd(n,i),X("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},X("invalid",n);break;case"textarea":Xd(n,i),X("invalid",n)}Jl(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bi(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bi(n.textContent,a,e),s=["children",""+a]):Ks.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&X("scroll",n)}switch(r){case"input":Ri(n),Jd(n,i,!0);break;case"textarea":Ri(n),Zd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Oo)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ct]=t,e[si]=n,Pg(e,t,!1,!1),t.stateNode=e;e:{switch(o=Xl(r,n),r){case"dialog":X("cancel",e),X("close",e),s=n;break;case"iframe":case"object":case"embed":X("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ts.length;s++)X(Ts[s],e);s=n;break;case"source":X("error",e),s=n;break;case"img":case"image":case"link":X("error",e),X("load",e),s=n;break;case"details":X("toggle",e),s=n;break;case"input":Qd(e,n),s=Hl(e,n),X("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=oe({},n,{value:void 0}),X("invalid",e);break;case"textarea":Xd(e,n),s=Yl(e,n),X("invalid",e);break;default:s=n}Jl(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?am(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&im(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Ys(e,l):typeof l=="number"&&Ys(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ks.hasOwnProperty(i)?l!=null&&i==="onScroll"&&X("scroll",e):l!=null&&fu(e,i,l,o))}switch(r){case"input":Ri(e),Jd(e,n,!1);break;case"textarea":Ri(e),Zd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Er(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fn(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Oo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)Ng(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=Jr(oi.current),Jr(Rt.current),Fi(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ct]=t,(i=n.nodeValue!==r)&&(e=et,e!==null))switch(e.tag){case 3:Bi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bi(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ct]=t,t.stateNode=n}return Ne(t),null;case 13:if(Z(ne),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ee&&Ze!==null&&t.mode&1&&!(t.flags&128))Km(),Qn(),t.flags|=98560,i=!1;else if(i=Fi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Ct]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),i=!1}else bt!==null&&(Rc(bt),bt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?xe===0&&(xe=3):Yu())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return Xn(),kc(e,t),e===null&&ri(t.stateNode.containerInfo),Ne(t),null;case 10:return Ru(t.type._context),Ne(t),null;case 17:return We(t.type)&&$o(),Ne(t),null;case 19:if(Z(ne),i=t.memoizedState,i===null)return Ne(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ws(i,!1);else{if(xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Fo(e),o!==null){for(t.flags|=128,ws(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return K(ne,ne.current&1|2),t.child}e=e.sibling}i.tail!==null&&ue()>es&&(t.flags|=128,n=!0,ws(i,!1),t.lanes=4194304)}else{if(!n)if(e=Fo(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ws(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ee)return Ne(t),null}else 2*ue()-i.renderingStartTime>es&&r!==1073741824&&(t.flags|=128,n=!0,ws(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ue(),t.sibling=null,r=ne.current,K(ne,n?r&1|2:r&1),t):(Ne(t),null);case 22:case 23:return Ku(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Qe&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Gx(e,t){switch(Pu(t),t.tag){case 1:return We(t.type)&&$o(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xn(),Z(ze),Z(Oe),Lu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Du(t),null;case 13:if(Z(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(ne),null;case 4:return Xn(),null;case 10:return Ru(t.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var Wi=!1,Re=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,R=null;function In(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){le(e,t,n)}else r.current=null}function jc(e,t,r){try{r()}catch(n){le(e,t,n)}}var Uh=!1;function Yx(e,t){if(lc=No,e=Im(),Eu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(a=o+s),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===r&&++c===s&&(a=o),f===i&&++u===n&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(cc={focusedElem:e,selectionRange:r},No=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,b=g.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:yt(t.type,w),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(x){le(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return g=Uh,Uh=!1,g}function Ls(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&jc(t,r,i)}s=s.next}while(s!==n)}}function va(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ec(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ag(e){var t=e.alternate;t!==null&&(e.alternate=null,Ag(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[si],delete t[hc],delete t[Ax],delete t[Rx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rg(e){return e.tag===5||e.tag===3||e.tag===4}function zh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Oo));else if(n!==4&&(e=e.child,e!==null))for(Tc(e,t,r),e=e.sibling;e!==null;)Tc(e,t,r),e=e.sibling}function Pc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Pc(e,t,r),e=e.sibling;e!==null;)Pc(e,t,r),e=e.sibling}var Ee=null,wt=!1;function nr(e,t,r){for(r=r.child;r!==null;)Og(e,t,r),r=r.sibling}function Og(e,t,r){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(ua,r)}catch{}switch(r.tag){case 5:Re||In(r,t);case 6:var n=Ee,s=wt;Ee=null,nr(e,t,r),Ee=n,wt=s,Ee!==null&&(wt?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(wt?(e=Ee,r=r.stateNode,e.nodeType===8?ol(e.parentNode,r):e.nodeType===1&&ol(e,r),Zs(e)):ol(Ee,r.stateNode));break;case 4:n=Ee,s=wt,Ee=r.stateNode.containerInfo,wt=!0,nr(e,t,r),Ee=n,wt=s;break;case 0:case 11:case 14:case 15:if(!Re&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jc(r,t,o),s=s.next}while(s!==n)}nr(e,t,r);break;case 1:if(!Re&&(In(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){le(r,t,a)}nr(e,t,r);break;case 21:nr(e,t,r);break;case 22:r.mode&1?(Re=(n=Re)||r.memoizedState!==null,nr(e,t,r),Re=n):nr(e,t,r);break;default:nr(e,t,r)}}function Wh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Kx),t.forEach(function(n){var s=sb.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function mt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ee=a.stateNode,wt=!1;break e;case 3:Ee=a.stateNode.containerInfo,wt=!0;break e;case 4:Ee=a.stateNode.containerInfo,wt=!0;break e}a=a.return}if(Ee===null)throw Error(P(160));Og(i,o,s),Ee=null,wt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){le(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$g(t,e),t=t.sibling}function $g(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),Tt(e),n&4){try{Ls(3,e,e.return),va(3,e)}catch(w){le(e,e.return,w)}try{Ls(5,e,e.return)}catch(w){le(e,e.return,w)}}break;case 1:mt(t,e),Tt(e),n&512&&r!==null&&In(r,r.return);break;case 5:if(mt(t,e),Tt(e),n&512&&r!==null&&In(r,r.return),e.flags&32){var s=e.stateNode;try{Ys(s,"")}catch(w){le(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&rm(s,i),Xl(a,o);var c=Xl(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?am(s,d):u==="dangerouslySetInnerHTML"?im(s,d):u==="children"?Ys(s,d):fu(s,u,d,c)}switch(a){case"input":Gl(s,i);break;case"textarea":nm(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Fn(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Fn(s,!!i.multiple,i.defaultValue,!0):Fn(s,!!i.multiple,i.multiple?[]:"",!1))}s[si]=i}catch(w){le(e,e.return,w)}}break;case 6:if(mt(t,e),Tt(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){le(e,e.return,w)}}break;case 3:if(mt(t,e),Tt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zs(t.containerInfo)}catch(w){le(e,e.return,w)}break;case 4:mt(t,e),Tt(e);break;case 13:mt(t,e),Tt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hu=ue())),n&4&&Wh(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Re=(c=Re)||u,mt(t,e),Re=c):mt(t,e),Tt(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(R=e,u=e.child;u!==null;){for(d=R=u;R!==null;){switch(f=R,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ls(4,f,f.return);break;case 1:In(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){le(n,r,w)}}break;case 5:In(f,f.return);break;case 22:if(f.memoizedState!==null){Hh(d);continue}}p!==null?(p.return=f,R=p):Hh(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=om("display",o))}catch(w){le(e,e.return,w)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){le(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mt(t,e),Tt(e),n&4&&Wh(e);break;case 21:break;default:mt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Rg(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ys(s,""),n.flags&=-33);var i=zh(e);Pc(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=zh(e);Tc(e,a,o);break;default:throw Error(P(161))}}catch(l){le(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qx(e,t,r){R=e,Ig(e)}function Ig(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Wi;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Re;a=Wi;var c=Re;if(Wi=o,(Re=l)&&!c)for(R=s;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?Gh(s):l!==null?(l.return=o,R=l):Gh(s);for(;i!==null;)R=i,Ig(i),i=i.sibling;R=s,Wi=a,Re=c}qh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):qh(e)}}function qh(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Re||va(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Re)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:yt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ch(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ch(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Zs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Re||t.flags&512&&Ec(t)}catch(f){le(t,t.return,f)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function Hh(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function Gh(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{va(4,t)}catch(l){le(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){le(t,s,l)}}var i=t.return;try{Ec(t)}catch(l){le(t,i,l)}break;case 5:var o=t.return;try{Ec(t)}catch(l){le(t,o,l)}}}catch(l){le(t,t.return,l)}if(t===e){R=null;break}var a=t.sibling;if(a!==null){a.return=t.return,R=a;break}R=t.return}}var Jx=Math.ceil,Wo=er.ReactCurrentDispatcher,Wu=er.ReactCurrentOwner,ht=er.ReactCurrentBatchConfig,z=0,ke=null,me=null,Te=0,Qe=0,Dn=Ar(0),xe=0,ui=null,an=0,wa=0,qu=0,Ms=null,Be=null,Hu=0,es=1/0,Mt=null,qo=!1,Cc=null,_r=null,qi=!1,gr=null,Ho=0,Vs=0,Nc=null,vo=-1,wo=0;function De(){return z&6?ue():vo!==-1?vo:vo=ue()}function Sr(e){return e.mode&1?z&2&&Te!==0?Te&-Te:$x.transition!==null?(wo===0&&(wo=wm()),wo):(e=W,e!==0||(e=window.event,e=e===void 0?16:Em(e.type)),e):1}function St(e,t,r,n){if(50<Vs)throw Vs=0,Nc=null,Error(P(185));wi(e,r,n),(!(z&2)||e!==ke)&&(e===ke&&(!(z&2)&&(wa|=r),xe===4&&hr(e,Te)),qe(e,n),r===1&&z===0&&!(t.mode&1)&&(es=ue()+500,ma&&Rr()))}function qe(e,t){var r=e.callbackNode;$w(e,t);var n=Co(e,e===ke?Te:0);if(n===0)r!==null&&rh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&rh(r),t===1)e.tag===0?Ox(Kh.bind(null,e)):qm(Kh.bind(null,e)),Cx(function(){!(z&6)&&Rr()}),r=null;else{switch(xm(n)){case 1:r=vu;break;case 4:r=ym;break;case 16:r=Po;break;case 536870912:r=vm;break;default:r=Po}r=zg(r,Dg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Dg(e,t){if(vo=-1,wo=0,z&6)throw Error(P(327));var r=e.callbackNode;if(Hn()&&e.callbackNode!==r)return null;var n=Co(e,e===ke?Te:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Go(e,n);else{t=n;var s=z;z|=2;var i=Mg();(ke!==e||Te!==t)&&(Mt=null,es=ue()+500,en(e,t));do try{eb();break}catch(a){Lg(e,a)}while(!0);Au(),Wo.current=i,z=s,me!==null?t=0:(ke=null,Te=0,t=xe)}if(t!==0){if(t===2&&(s=nc(e),s!==0&&(n=s,t=Ac(e,s))),t===1)throw r=ui,en(e,0),hr(e,n),qe(e,ue()),r;if(t===6)hr(e,n);else{if(s=e.current.alternate,!(n&30)&&!Xx(s)&&(t=Go(e,n),t===2&&(i=nc(e),i!==0&&(n=i,t=Ac(e,i))),t===1))throw r=ui,en(e,0),hr(e,n),qe(e,ue()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:Fr(e,Be,Mt);break;case 3:if(hr(e,n),(n&130023424)===n&&(t=Hu+500-ue(),10<t)){if(Co(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){De(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=dc(Fr.bind(null,e,Be,Mt),t);break}Fr(e,Be,Mt);break;case 4:if(hr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-_t(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ue()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jx(n/1960))-n,10<n){e.timeoutHandle=dc(Fr.bind(null,e,Be,Mt),n);break}Fr(e,Be,Mt);break;case 5:Fr(e,Be,Mt);break;default:throw Error(P(329))}}}return qe(e,ue()),e.callbackNode===r?Dg.bind(null,e):null}function Ac(e,t){var r=Ms;return e.current.memoizedState.isDehydrated&&(en(e,t).flags|=256),e=Go(e,t),e!==2&&(t=Be,Be=r,t!==null&&Rc(t)),e}function Rc(e){Be===null?Be=e:Be.push.apply(Be,e)}function Xx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!kt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~qu,t&=~wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_t(t),n=1<<r;e[r]=-1,t&=~n}}function Kh(e){if(z&6)throw Error(P(327));Hn();var t=Co(e,0);if(!(t&1))return qe(e,ue()),null;var r=Go(e,t);if(e.tag!==0&&r===2){var n=nc(e);n!==0&&(t=n,r=Ac(e,n))}if(r===1)throw r=ui,en(e,0),hr(e,t),qe(e,ue()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,Be,Mt),qe(e,ue()),null}function Gu(e,t){var r=z;z|=1;try{return e(t)}finally{z=r,z===0&&(es=ue()+500,ma&&Rr())}}function ln(e){gr!==null&&gr.tag===0&&!(z&6)&&Hn();var t=z;z|=1;var r=ht.transition,n=W;try{if(ht.transition=null,W=1,e)return e()}finally{W=n,ht.transition=r,z=t,!(z&6)&&Rr()}}function Ku(){Qe=Dn.current,Z(Dn)}function en(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Px(r)),me!==null)for(r=me.return;r!==null;){var n=r;switch(Pu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$o();break;case 3:Xn(),Z(ze),Z(Oe),Lu();break;case 5:Du(n);break;case 4:Xn();break;case 13:Z(ne);break;case 19:Z(ne);break;case 10:Ru(n.type._context);break;case 22:case 23:Ku()}r=r.return}if(ke=e,me=e=kr(e.current,null),Te=Qe=t,xe=0,ui=null,qu=wa=an=0,Be=Ms=null,Qr!==null){for(t=0;t<Qr.length;t++)if(r=Qr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Qr=null}return e}function Lg(e,t){do{var r=me;try{if(Au(),mo.current=zo,Uo){for(var n=ie.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Uo=!1}if(on=0,Se=we=ie=null,Ds=!1,ai=0,Wu.current=null,r===null||r.return===null){xe=1,ui=t,me=null;break}e:{var i=e,o=r.return,a=r,l=t;if(t=Te,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Ih(o);if(p!==null){p.flags&=-257,Dh(p,o,a,i,t),p.mode&1&&$h(i,c,t),t=p,l=c;var g=t.updateQueue;if(g===null){var w=new Set;w.add(l),t.updateQueue=w}else g.add(l);break e}else{if(!(t&1)){$h(i,c,t),Yu();break e}l=Error(P(426))}}else if(ee&&a.mode&1){var b=Ih(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Dh(b,o,a,i,t),Cu(Zn(l,a));break e}}i=l=Zn(l,a),xe!==4&&(xe=2),Ms===null?Ms=[i]:Ms.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=xg(i,l,t);Ph(i,y);break e;case 1:a=l;var v=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(_r===null||!_r.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=bg(i,a,t);Ph(i,x);break e}}i=i.return}while(i!==null)}Bg(r)}catch(S){t=S,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function Mg(){var e=Wo.current;return Wo.current=zo,e===null?zo:e}function Yu(){(xe===0||xe===3||xe===2)&&(xe=4),ke===null||!(an&268435455)&&!(wa&268435455)||hr(ke,Te)}function Go(e,t){var r=z;z|=2;var n=Mg();(ke!==e||Te!==t)&&(Mt=null,en(e,t));do try{Zx();break}catch(s){Lg(e,s)}while(!0);if(Au(),z=r,Wo.current=n,me!==null)throw Error(P(261));return ke=null,Te=0,xe}function Zx(){for(;me!==null;)Vg(me)}function eb(){for(;me!==null&&!jw();)Vg(me)}function Vg(e){var t=Ug(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,t===null?Bg(e):me=t,Wu.current=null}function Bg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Gx(r,t),r!==null){r.flags&=32767,me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xe=6,me=null;return}}else if(r=Hx(r,t,Qe),r!==null){me=r;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);xe===0&&(xe=5)}function Fr(e,t,r){var n=W,s=ht.transition;try{ht.transition=null,W=1,tb(e,t,r,n)}finally{ht.transition=s,W=n}return null}function tb(e,t,r,n){do Hn();while(gr!==null);if(z&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Iw(e,i),e===ke&&(me=ke=null,Te=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qi||(qi=!0,zg(Po,function(){return Hn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ht.transition,ht.transition=null;var o=W;W=1;var a=z;z|=4,Wu.current=null,Yx(e,r),$g(r,e),bx(cc),No=!!lc,cc=lc=null,e.current=r,Qx(r),Ew(),z=a,W=o,ht.transition=i}else e.current=r;if(qi&&(qi=!1,gr=e,Ho=s),i=e.pendingLanes,i===0&&(_r=null),Cw(r.stateNode),qe(e,ue()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(qo)throw qo=!1,e=Cc,Cc=null,e;return Ho&1&&e.tag!==0&&Hn(),i=e.pendingLanes,i&1?e===Nc?Vs++:(Vs=0,Nc=e):Vs=0,Rr(),null}function Hn(){if(gr!==null){var e=xm(Ho),t=ht.transition,r=W;try{if(ht.transition=null,W=16>e?16:e,gr===null)var n=!1;else{if(e=gr,gr=null,Ho=0,z&6)throw Error(P(331));var s=z;for(z|=4,R=e.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(R=c;R!==null;){var u=R;switch(u.tag){case 0:case 11:case 15:Ls(8,u,i)}var d=u.child;if(d!==null)d.return=u,R=d;else for(;R!==null;){u=R;var f=u.sibling,p=u.return;if(Ag(u),u===c){R=null;break}if(f!==null){f.return=p,R=f;break}R=p}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ls(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,R=y;break e}R=i.return}}var v=e.current;for(R=v;R!==null;){o=R;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,R=m;else e:for(o=v;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:va(9,a)}}catch(S){le(a,a.return,S)}if(a===o){R=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,R=x;break e}R=a.return}}if(z=s,Rr(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(ua,e)}catch{}n=!0}return n}finally{W=r,ht.transition=t}}return!1}function Yh(e,t,r){t=Zn(r,t),t=xg(e,t,1),e=br(e,t,1),t=De(),e!==null&&(wi(e,1,t),qe(e,t))}function le(e,t,r){if(e.tag===3)Yh(e,e,r);else for(;t!==null;){if(t.tag===3){Yh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_r===null||!_r.has(n))){e=Zn(r,e),e=bg(t,e,1),t=br(t,e,1),e=De(),t!==null&&(wi(t,1,e),qe(t,e));break}}t=t.return}}function rb(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=De(),e.pingedLanes|=e.suspendedLanes&r,ke===e&&(Te&r)===r&&(xe===4||xe===3&&(Te&130023424)===Te&&500>ue()-Hu?en(e,0):qu|=r),qe(e,t)}function Fg(e,t){t===0&&(e.mode&1?(t=Ii,Ii<<=1,!(Ii&130023424)&&(Ii=4194304)):t=1);var r=De();e=Qt(e,t),e!==null&&(wi(e,t,r),qe(e,r))}function nb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fg(e,r)}function sb(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),Fg(e,r)}var Ug;Ug=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ze.current)Ue=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ue=!1,qx(e,t,r);Ue=!!(e.flags&131072)}else Ue=!1,ee&&t.flags&1048576&&Hm(t,Lo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;yo(e,t),e=t.pendingProps;var s=Yn(t,Oe.current);qn(t,r),s=Vu(null,t,n,e,s,r);var i=Bu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,We(n)?(i=!0,Io(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$u(t),s.updater=ya,t.stateNode=s,s._reactInternals=t,vc(t,n,e,r),t=bc(null,t,n,!0,i,r)):(t.tag=0,ee&&i&&Tu(t),Ie(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(yo(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=ob(n),e=yt(n,e),s){case 0:t=xc(null,t,n,e,r);break e;case 1:t=Vh(null,t,n,e,r);break e;case 11:t=Lh(null,t,n,e,r);break e;case 14:t=Mh(null,t,n,yt(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:yt(n,s),xc(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:yt(n,s),Vh(e,t,n,s,r);case 3:e:{if(jg(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Xm(e,t),Bo(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zn(Error(P(423)),t),t=Bh(e,t,n,r,s);break e}else if(n!==s){s=Zn(Error(P(424)),t),t=Bh(e,t,n,r,s);break e}else for(Ze=xr(t.stateNode.containerInfo.firstChild),et=t,ee=!0,bt=null,r=Qm(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qn(),n===s){t=Jt(e,t,r);break e}Ie(e,t,n,r)}t=t.child}return t;case 5:return Zm(t),e===null&&mc(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,uc(n,s)?o=null:i!==null&&uc(n,i)&&(t.flags|=32),kg(e,t),Ie(e,t,o,r),t.child;case 6:return e===null&&mc(t),null;case 13:return Eg(e,t,r);case 4:return Iu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Jn(t,null,n,r):Ie(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:yt(n,s),Lh(e,t,n,s,r);case 7:return Ie(e,t,t.pendingProps,r),t.child;case 8:return Ie(e,t,t.pendingProps.children,r),t.child;case 12:return Ie(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,K(Mo,n._currentValue),n._currentValue=o,i!==null)if(kt(i.value,o)){if(i.children===s.children&&!ze.current){t=Jt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Wt(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),gc(i.return,r,t),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),gc(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ie(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,qn(t,r),s=ft(s),n=n(s),t.flags|=1,Ie(e,t,n,r),t.child;case 14:return n=t.type,s=yt(n,t.pendingProps),s=yt(n.type,s),Mh(e,t,n,s,r);case 15:return _g(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:yt(n,s),yo(e,t),t.tag=1,We(n)?(e=!0,Io(t)):e=!1,qn(t,r),wg(t,n,s),vc(t,n,s,r),bc(null,t,n,!0,e,r);case 19:return Tg(e,t,r);case 22:return Sg(e,t,r)}throw Error(P(156,t.tag))};function zg(e,t){return gm(e,t)}function ib(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,r,n){return new ib(e,t,r,n)}function Qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ob(e){if(typeof e=="function")return Qu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mu)return 11;if(e===gu)return 14}return 2}function kr(e,t){var r=e.alternate;return r===null?(r=dt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function xo(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Qu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case En:return tn(r.children,s,i,t);case pu:o=8,s|=8;break;case Ul:return e=dt(12,r,t,s|2),e.elementType=Ul,e.lanes=i,e;case zl:return e=dt(13,r,t,s),e.elementType=zl,e.lanes=i,e;case Wl:return e=dt(19,r,t,s),e.elementType=Wl,e.lanes=i,e;case Zp:return xa(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jp:o=10;break e;case Xp:o=9;break e;case mu:o=11;break e;case gu:o=14;break e;case ar:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=dt(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function tn(e,t,r,n){return e=dt(7,e,n,t),e.lanes=r,e}function xa(e,t,r,n){return e=dt(22,e,n,t),e.elementType=Zp,e.lanes=r,e.stateNode={isHidden:!1},e}function pl(e,t,r){return e=dt(6,e,null,t),e.lanes=r,e}function ml(e,t,r){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ab(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ya(0),this.expirationTimes=Ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ju(e,t,r,n,s,i,o,a,l){return e=new ab(e,t,r,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$u(i),e}function lb(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Wg(e){if(!e)return Tr;e=e._reactInternals;e:{if(un(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(We(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(We(r))return Wm(e,r,t)}return t}function qg(e,t,r,n,s,i,o,a,l){return e=Ju(r,n,!0,e,s,i,o,a,l),e.context=Wg(null),r=e.current,n=De(),s=Sr(r),i=Wt(n,s),i.callback=t??null,br(r,i,s),e.current.lanes=s,wi(e,s,n),qe(e,n),e}function ba(e,t,r,n){var s=t.current,i=De(),o=Sr(s);return r=Wg(r),t.context===null?t.context=r:t.pendingContext=r,t=Wt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=br(s,t,o),e!==null&&(St(e,s,o,i),po(e,s,o)),o}function Ko(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xu(e,t){Qh(e,t),(e=e.alternate)&&Qh(e,t)}function cb(){return null}var Hg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zu(e){this._internalRoot=e}_a.prototype.render=Zu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));ba(e,t,null,null)};_a.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ln(function(){ba(null,e,null,null)}),t[Yt]=null}};function _a(e){this._internalRoot=e}_a.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<dr.length&&t!==0&&t<dr[r].priority;r++);dr.splice(r,0,e),r===0&&jm(e)}};function ed(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jh(){}function ub(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Ko(o);i.call(c)}}var o=qg(t,n,e,0,null,!1,!1,"",Jh);return e._reactRootContainer=o,e[Yt]=o.current,ri(e.nodeType===8?e.parentNode:e),ln(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=Ko(l);a.call(c)}}var l=Ju(e,0,!1,null,null,!1,!1,"",Jh);return e._reactRootContainer=l,e[Yt]=l.current,ri(e.nodeType===8?e.parentNode:e),ln(function(){ba(t,l,r,n)}),l}function ka(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ko(o);a.call(l)}}ba(t,o,e,s)}else o=ub(r,t,e,s,n);return Ko(o)}bm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Es(t.pendingLanes);r!==0&&(wu(t,r|1),qe(t,ue()),!(z&6)&&(es=ue()+500,Rr()))}break;case 13:ln(function(){var n=Qt(e,1);if(n!==null){var s=De();St(n,e,1,s)}}),Xu(e,1)}};xu=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var r=De();St(t,e,134217728,r)}Xu(e,134217728)}};_m=function(e){if(e.tag===13){var t=Sr(e),r=Qt(e,t);if(r!==null){var n=De();St(r,e,t,n)}Xu(e,t)}};Sm=function(){return W};km=function(e,t){var r=W;try{return W=e,t()}finally{W=r}};ec=function(e,t,r){switch(t){case"input":if(Gl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=pa(n);if(!s)throw Error(P(90));tm(n),Gl(n,s)}}}break;case"textarea":nm(e,r);break;case"select":t=r.value,t!=null&&Fn(e,!!r.multiple,t,!1)}};um=Gu;dm=ln;var db={usingClientEntryPoint:!1,Events:[bi,Nn,pa,lm,cm,Gu]},xs={findFiberByHostInstance:Yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hb={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pm(e),e===null?null:e.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||cb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hi.isDisabled&&Hi.supportsFiber)try{ua=Hi.inject(hb),At=Hi}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=db;st.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(t))throw Error(P(200));return lb(e,t,null,r)};st.createRoot=function(e,t){if(!ed(e))throw Error(P(299));var r=!1,n="",s=Hg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ju(e,1,!1,null,null,r,!1,n,s),e[Yt]=t.current,ri(e.nodeType===8?e.parentNode:e),new Zu(t)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=pm(t),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return ln(e)};st.hydrate=function(e,t,r){if(!Sa(t))throw Error(P(200));return ka(null,e,t,!0,r)};st.hydrateRoot=function(e,t,r){if(!ed(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Hg;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=qg(t,null,e,1,r??null,s,!1,i,o),e[Yt]=t.current,ri(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new _a(t)};st.render=function(e,t,r){if(!Sa(t))throw Error(P(200));return ka(null,e,t,!1,r)};st.unmountComponentAtNode=function(e){if(!Sa(e))throw Error(P(40));return e._reactRootContainer?(ln(function(){ka(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};st.unstable_batchedUpdates=Gu;st.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Sa(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return ka(e,t,r,!1,n)};st.version="18.3.1-next-f1338f8080-20240426";function Gg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gg)}catch(e){console.error(e)}}Gg(),Gp.exports=st;var fb=Gp.exports,Xh=fb;Bl.createRoot=Xh.createRoot,Bl.hydrateRoot=Xh.hydrateRoot;const Kg=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ja=_.createContext({}),Ea=_.createContext(null),Ta=typeof document<"u",td=Ta?_.useLayoutEffect:_.useEffect,Yg=_.createContext({strict:!1}),rd=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),pb="framerAppearId",Qg="data-"+rd(pb);function mb(e,t,r,n){const{visualElement:s}=_.useContext(ja),i=_.useContext(Yg),o=_.useContext(Ea),a=_.useContext(Kg).reducedMotion,l=_.useRef();n=n||i.renderer,!l.current&&n&&(l.current=n(e,{visualState:t,parent:s,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;_.useInsertionEffect(()=>{c&&c.update(r,o)});const u=_.useRef(!!(r[Qg]&&!window.HandoffComplete));return td(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),_.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ln(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function gb(e,t,r){return _.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Ln(r)&&(r.current=n))},[t])}function di(e){return typeof e=="string"||Array.isArray(e)}function Pa(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const nd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sd=["initial",...nd];function Ca(e){return Pa(e.animate)||sd.some(t=>di(e[t]))}function Jg(e){return!!(Ca(e)||e.variants)}function yb(e,t){if(Ca(e)){const{initial:r,animate:n}=e;return{initial:r===!1||di(r)?r:void 0,animate:di(n)?n:void 0}}return e.inherit!==!1?t:{}}function vb(e){const{initial:t,animate:r}=yb(e,_.useContext(ja));return _.useMemo(()=>({initial:t,animate:r}),[Zh(t),Zh(r)])}function Zh(e){return Array.isArray(e)?e.join(" "):e}const ef={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hi={};for(const e in ef)hi[e]={isEnabled:t=>ef[e].some(r=>!!t[r])};function wb(e){for(const t in e)hi[t]={...hi[t],...e[t]}}const id=_.createContext({}),Xg=_.createContext({}),xb=Symbol.for("motionComponentSymbol");function bb({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&wb(e);function i(a,l){let c;const u={..._.useContext(Kg),...a,layoutId:_b(a)},{isStatic:d}=u,f=vb(a),p=n(a,d);if(!d&&Ta){f.visualElement=mb(s,p,u,t);const g=_.useContext(Xg),w=_.useContext(Yg).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,w,e,g))}return _.createElement(ja.Provider,{value:f},c&&f.visualElement?_.createElement(c,{visualElement:f.visualElement,...u}):null,r(s,a,gb(p,f.visualElement,l),p,d,f.visualElement))}const o=_.forwardRef(i);return o[xb]=s,o}function _b({layoutId:e}){const t=_.useContext(id).id;return t&&e!==void 0?t+"-"+e:e}function Sb(e){function t(n,s={}){return bb(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const kb=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function od(e){return typeof e!="string"||e.includes("-")?!1:!!(kb.indexOf(e)>-1||/[A-Z]/.test(e))}const Yo={};function jb(e){Object.assign(Yo,e)}const Si=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dn=new Set(Si);function Zg(e,{layout:t,layoutId:r}){return dn.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Yo[e]||e==="opacity")}const He=e=>!!(e&&e.getVelocity),Eb={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Tb=Si.length;function Pb(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let o=0;o<Tb;o++){const a=Si[o];if(e[a]!==void 0){const l=Eb[a]||a;i+=`${l}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const e0=e=>t=>typeof t=="string"&&t.startsWith(e),t0=e0("--"),Oc=e0("var(--"),Cb=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Nb=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Pr=(e,t,r)=>Math.min(Math.max(r,e),t),hn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Bs={...hn,transform:e=>Pr(0,1,e)},Gi={...hn,default:1},Fs=e=>Math.round(e*1e5)/1e5,Na=/(-)?([\d]*\.?[\d])+/g,r0=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Ab=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ki(e){return typeof e=="string"}const ji=e=>({test:t=>ki(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ir=ji("deg"),Ot=ji("%"),L=ji("px"),Rb=ji("vh"),Ob=ji("vw"),tf={...Ot,parse:e=>Ot.parse(e)/100,transform:e=>Ot.transform(e*100)},rf={...hn,transform:Math.round},n0={borderWidth:L,borderTopWidth:L,borderRightWidth:L,borderBottomWidth:L,borderLeftWidth:L,borderRadius:L,radius:L,borderTopLeftRadius:L,borderTopRightRadius:L,borderBottomRightRadius:L,borderBottomLeftRadius:L,width:L,maxWidth:L,height:L,maxHeight:L,size:L,top:L,right:L,bottom:L,left:L,padding:L,paddingTop:L,paddingRight:L,paddingBottom:L,paddingLeft:L,margin:L,marginTop:L,marginRight:L,marginBottom:L,marginLeft:L,rotate:ir,rotateX:ir,rotateY:ir,rotateZ:ir,scale:Gi,scaleX:Gi,scaleY:Gi,scaleZ:Gi,skew:ir,skewX:ir,skewY:ir,distance:L,translateX:L,translateY:L,translateZ:L,x:L,y:L,z:L,perspective:L,transformPerspective:L,opacity:Bs,originX:tf,originY:tf,originZ:L,zIndex:rf,fillOpacity:Bs,strokeOpacity:Bs,numOctaves:rf};function ad(e,t,r,n){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let l=!1,c=!1,u=!0;for(const d in t){const f=t[d];if(t0(d)){i[d]=f;continue}const p=n0[d],g=Nb(f,p);if(dn.has(d)){if(l=!0,o[d]=g,!u)continue;f!==(p.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=g):s[d]=g}if(t.transform||(l||n?s.transform=Pb(e.transform,r,u,n):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;s.transformOrigin=`${d} ${f} ${p}`}}const ld=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function s0(e,t,r){for(const n in t)!He(t[n])&&!Zg(n,r)&&(e[n]=t[n])}function $b({transformTemplate:e},t,r){return _.useMemo(()=>{const n=ld();return ad(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Ib(e,t,r){const n=e.style||{},s={};return s0(s,n,e),Object.assign(s,$b(e,t,r)),e.transformValues?e.transformValues(s):s}function Db(e,t,r){const n={},s=Ib(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Lb=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Lb.has(e)}let i0=e=>!Qo(e);function Mb(e){e&&(i0=t=>t.startsWith("on")?!Qo(t):e(t))}try{Mb(require("@emotion/is-prop-valid").default)}catch{}function Vb(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(i0(s)||r===!0&&Qo(s)||!t&&!Qo(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function nf(e,t,r){return typeof e=="string"?e:L.transform(t+r*e)}function Bb(e,t,r){const n=nf(t,e.x,e.width),s=nf(r,e.y,e.height);return`${n} ${s}`}const Fb={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ub={offset:"strokeDashoffset",array:"strokeDasharray"};function zb(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?Fb:Ub;e[i.offset]=L.transform(-n);const o=L.transform(t),a=L.transform(r);e[i.array]=`${o} ${a}`}function cd(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,f){if(ad(e,c,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:w}=e;p.transform&&(w&&(g.transform=p.transform),delete p.transform),w&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=Bb(w,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),o!==void 0&&zb(p,o,a,l,!1)}const o0=()=>({...ld(),attrs:{}}),ud=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Wb(e,t,r,n){const s=_.useMemo(()=>{const i=o0();return cd(i,t,{enableHardwareAcceleration:!1},ud(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};s0(i,e.style,e),s.style={...i,...s.style}}return s}function qb(e=!1){return(r,n,s,{latestValues:i},o)=>{const l=(od(r)?Wb:Db)(n,i,o,r),u={...Vb(n,typeof r=="string",e),...l,ref:s},{children:d}=n,f=_.useMemo(()=>He(d)?d.get():d,[d]);return _.createElement(r,{...u,children:f})}}function a0(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const l0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function c0(e,t,r,n){a0(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(l0.has(s)?s:rd(s),t.attrs[s])}function dd(e,t){const{style:r}=e,n={};for(const s in r)(He(r[s])||t.style&&He(t.style[s])||Zg(s,e))&&(n[s]=r[s]);return n}function u0(e,t){const r=dd(e,t);for(const n in e)if(He(e[n])||He(t[n])){const s=Si.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function hd(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function d0(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const Jo=e=>Array.isArray(e),Hb=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Gb=e=>Jo(e)?e[e.length-1]||0:e;function bo(e){const t=He(e)?e.get():e;return Hb(t)?t.toValue():t}function Kb({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const o={latestValues:Yb(n,s,i,e),renderState:t()};return r&&(o.mount=a=>r(n,a,o)),o}const h0=e=>(t,r)=>{const n=_.useContext(ja),s=_.useContext(Ea),i=()=>Kb(e,t,n,s);return r?i():d0(i)};function Yb(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=bo(i[f]);let{initial:o,animate:a}=e;const l=Ca(e),c=Jg(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!Pa(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const g=hd(e,p);if(!g)return;const{transitionEnd:w,transition:b,...y}=g;for(const v in y){let m=y[v];if(Array.isArray(m)){const x=u?m.length-1:0;m=m[x]}m!==null&&(s[v]=m)}for(const v in w)s[v]=w[v]}),s}const he=e=>e;class sf{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Qb(e){let t=new sf,r=new sf,n=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&s,f=d?t:r;return c&&o.add(l),f.add(l)&&d&&s&&(n=t.order.length),l},cancel:l=>{r.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let c=0;c<n;c++){const u=t.order[c];u(l),o.has(u)&&(a.schedule(u),e())}s=!1,i&&(i=!1,a.process(l))}};return a}const Ki=["prepare","read","update","preRender","render","postRender"],Jb=40;function Xb(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Ki.reduce((d,f)=>(d[f]=Qb(()=>r=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(d-s.timestamp,Jb),1),s.timestamp=d,s.isProcessing=!0,Ki.forEach(o),s.isProcessing=!1,r&&t&&(n=!1,e(a))},l=()=>{r=!0,n=!0,s.isProcessing||e(a)};return{schedule:Ki.reduce((d,f)=>{const p=i[f];return d[f]=(g,w=!1,b=!1)=>(r||l(),p.schedule(g,w,b)),d},{}),cancel:d=>Ki.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:Y,cancel:Xt,state:Ae,steps:gl}=Xb(typeof requestAnimationFrame<"u"?requestAnimationFrame:he,!0),Zb={useVisualState:h0({scrapeMotionValuesFromProps:u0,createRenderState:o0,onMount:(e,t,{renderState:r,latestValues:n})=>{Y.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Y.render(()=>{cd(r,n,{enableHardwareAcceleration:!1},ud(t.tagName),e.transformTemplate),c0(t,r)})}})},e1={useVisualState:h0({scrapeMotionValuesFromProps:dd,createRenderState:ld})};function t1(e,{forwardMotionProps:t=!1},r,n){return{...od(e)?Zb:e1,preloadedFeatures:r,useRender:qb(t),createVisualElement:n,Component:e}}function zt(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const f0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Aa(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const r1=e=>t=>f0(t)&&e(t,Aa(t));function qt(e,t,r,n){return zt(e,t,r1(r),n)}const n1=(e,t)=>r=>t(e(r)),jr=(...e)=>e.reduce(n1);function p0(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const of=p0("dragHorizontal"),af=p0("dragVertical");function m0(e){let t=!1;if(e==="y")t=af();else if(e==="x")t=of();else{const r=of(),n=af();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function g0(){const e=m0(!0);return e?(e(),!1):!0}class Or{constructor(t){this.isMounted=!1,this.node=t}update(){}}function lf(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||g0())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[n]&&Y.update(()=>a[n](i,o))};return qt(e.current,r,s,{passive:!e.getProps()[n]})}class s1 extends Or{mount(){this.unmount=jr(lf(this.node,!0),lf(this.node,!1))}unmount(){}}class i1 extends Or{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jr(zt(this.node.current,"focus",()=>this.onFocus()),zt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const y0=(e,t)=>t?e===t?!0:y0(e,t.parentElement):!1;function yl(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Aa(r))}class o1 extends Or{constructor(){super(...arguments),this.removeStartListeners=he,this.removeEndListeners=he,this.removeAccessibleListeners=he,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=qt(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();Y.update(()=>{!d&&!y0(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(n.onTap||n.onPointerUp)}),o=qt(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=jr(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||yl("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Y.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=zt(this.node.current,"keyup",o),yl("down",(a,l)=>{this.startPress(a,l)})},r=zt(this.node.current,"keydown",t),n=()=>{this.isPressing&&yl("cancel",(i,o)=>this.cancelPress(i,o))},s=zt(this.node.current,"blur",n);this.removeAccessibleListeners=jr(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Y.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!g0()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Y.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=qt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=zt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=jr(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const $c=new WeakMap,vl=new WeakMap,a1=e=>{const t=$c.get(e.target);t&&t(e)},l1=e=>{e.forEach(a1)};function c1({root:e,...t}){const r=e||document;vl.has(r)||vl.set(r,{});const n=vl.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(l1,{root:e,...t})),n[s]}function u1(e,t,r){const n=c1(t);return $c.set(e,r),n.observe(e),()=>{$c.delete(e),n.unobserve(e)}}const d1={some:0,all:1};class h1 extends Or{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:d1[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return u1(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(f1(t,r))&&this.startObserver()}unmount(){}}function f1({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const p1={inView:{Feature:h1},tap:{Feature:o1},focus:{Feature:i1},hover:{Feature:s1}};function v0(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function m1(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function g1(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Ra(e,t,r){const n=e.getProps();return hd(n,t,r!==void 0?r:n.custom,m1(e),g1(e))}let fd=he;const rn=e=>e*1e3,Ht=e=>e/1e3,y1={current:!1},w0=e=>Array.isArray(e)&&typeof e[0]=="number";function x0(e){return!!(!e||typeof e=="string"&&b0[e]||w0(e)||Array.isArray(e)&&e.every(x0))}const Ps=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,b0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ps([0,.65,.55,1]),circOut:Ps([.55,0,1,.45]),backIn:Ps([.31,.01,.66,-.59]),backOut:Ps([.33,1.53,.69,.99])};function _0(e){if(e)return w0(e)?Ps(e):Array.isArray(e)?e.map(_0):b0[e]}function v1(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const c={[t]:r};l&&(c.offset=l);const u=_0(a);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function w1(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const S0=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,x1=1e-7,b1=12;function _1(e,t,r,n,s){let i,o,a=0;do o=t+(r-t)/2,i=S0(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>x1&&++a<b1);return o}function Ei(e,t,r,n){if(e===t&&r===n)return he;const s=i=>_1(i,0,1,e,r);return i=>i===0||i===1?i:S0(s(i),t,n)}const S1=Ei(.42,0,1,1),k1=Ei(0,0,.58,1),k0=Ei(.42,0,.58,1),j1=e=>Array.isArray(e)&&typeof e[0]!="number",j0=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,E0=e=>t=>1-e(1-t),pd=e=>1-Math.sin(Math.acos(e)),T0=E0(pd),E1=j0(pd),P0=Ei(.33,1.53,.69,.99),md=E0(P0),T1=j0(md),P1=e=>(e*=2)<1?.5*md(e):.5*(2-Math.pow(2,-10*(e-1))),C1={linear:he,easeIn:S1,easeInOut:k0,easeOut:k1,circIn:pd,circInOut:E1,circOut:T0,backIn:md,backInOut:T1,backOut:P0,anticipate:P1},cf=e=>{if(Array.isArray(e)){fd(e.length===4);const[t,r,n,s]=e;return Ei(t,r,n,s)}else if(typeof e=="string")return C1[e];return e},gd=(e,t)=>r=>!!(ki(r)&&Ab.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),C0=(e,t,r)=>n=>{if(!ki(n))return n;const[s,i,o,a]=n.match(Na);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},N1=e=>Pr(0,255,e),wl={...hn,transform:e=>Math.round(N1(e))},Xr={test:gd("rgb","red"),parse:C0("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+wl.transform(e)+", "+wl.transform(t)+", "+wl.transform(r)+", "+Fs(Bs.transform(n))+")"};function A1(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Ic={test:gd("#"),parse:A1,transform:Xr.transform},Mn={test:gd("hsl","hue"),parse:C0("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ot.transform(Fs(t))+", "+Ot.transform(Fs(r))+", "+Fs(Bs.transform(n))+")"},$e={test:e=>Xr.test(e)||Ic.test(e)||Mn.test(e),parse:e=>Xr.test(e)?Xr.parse(e):Mn.test(e)?Mn.parse(e):Ic.parse(e),transform:e=>ki(e)?e:e.hasOwnProperty("red")?Xr.transform(e):Mn.transform(e)},se=(e,t,r)=>-r*e+r*t+e;function xl(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function R1({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const a=r<.5?r*(1+t):r+t-r*t,l=2*r-a;s=xl(l,a,e+1/3),i=xl(l,a,e),o=xl(l,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const bl=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},O1=[Ic,Xr,Mn],$1=e=>O1.find(t=>t.test(e));function uf(e){const t=$1(e);let r=t.parse(e);return t===Mn&&(r=R1(r)),r}const N0=(e,t)=>{const r=uf(e),n=uf(t),s={...r};return i=>(s.red=bl(r.red,n.red,i),s.green=bl(r.green,n.green,i),s.blue=bl(r.blue,n.blue,i),s.alpha=se(r.alpha,n.alpha,i),Xr.transform(s))};function I1(e){var t,r;return isNaN(e)&&ki(e)&&(((t=e.match(Na))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(r0))===null||r===void 0?void 0:r.length)||0)>0}const A0={regex:Cb,countKey:"Vars",token:"${v}",parse:he},R0={regex:r0,countKey:"Colors",token:"${c}",parse:$e.parse},O0={regex:Na,countKey:"Numbers",token:"${n}",parse:hn.parse};function _l(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function Xo(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&_l(r,A0),_l(r,R0),_l(r,O0),r}function $0(e){return Xo(e).values}function I0(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Xo(e),i=t.length;return o=>{let a=s;for(let l=0;l<i;l++)l<n?a=a.replace(A0.token,o[l]):l<n+r?a=a.replace(R0.token,$e.transform(o[l])):a=a.replace(O0.token,Fs(o[l]));return a}}const D1=e=>typeof e=="number"?0:e;function L1(e){const t=$0(e);return I0(e)(t.map(D1))}const Cr={test:I1,parse:$0,createTransformer:I0,getAnimatableNone:L1},D0=(e,t)=>r=>`${r>0?t:e}`;function L0(e,t){return typeof e=="number"?r=>se(e,t,r):$e.test(e)?N0(e,t):e.startsWith("var(")?D0(e,t):V0(e,t)}const M0=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,o)=>L0(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}},M1=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=L0(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},V0=(e,t)=>{const r=Cr.createTransformer(t),n=Xo(e),s=Xo(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?jr(M0(n.values,s.values),r):D0(e,t)},fi=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},df=(e,t)=>r=>se(e,t,r);function V1(e){return typeof e=="number"?df:typeof e=="string"?$e.test(e)?N0:V0:Array.isArray(e)?M0:typeof e=="object"?M1:df}function B1(e,t,r){const n=[],s=r||V1(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||he:t;a=jr(l,a)}n.push(a)}return n}function B0(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(fd(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=B1(t,n,s),a=o.length,l=c=>{let u=0;if(a>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const d=fi(e[u],e[u+1],c);return o[u](d)};return r?c=>l(Pr(e[0],e[i-1],c)):l}function F1(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=fi(0,t,n);e.push(se(r,1,s))}}function U1(e){const t=[0];return F1(t,e.length-1),t}function z1(e,t){return e.map(r=>r*t)}function W1(e,t){return e.map(()=>t||k0).splice(0,e.length-1)}function Zo({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=j1(n)?n.map(cf):cf(n),i={done:!1,value:t[0]},o=z1(r&&r.length===t.length?r:U1(t),e),a=B0(o,t,{ease:Array.isArray(s)?s:W1(t,s)});return{calculatedDuration:e,next:l=>(i.value=a(l),i.done=l>=e,i)}}function F0(e,t){return t?e*(1e3/t):0}const q1=5;function U0(e,t,r){const n=Math.max(t-q1,0);return F0(r-e(n),t-n)}const Sl=.001,H1=.01,G1=10,K1=.05,Y1=1;function Q1({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,o=1-t;o=Pr(K1,Y1,o),e=Pr(H1,G1,Ht(e)),o<1?(s=c=>{const u=c*o,d=u*e,f=u-r,p=Dc(c,o),g=Math.exp(-d);return Sl-f/p*g},i=c=>{const d=c*o*e,f=d*r+r,p=Math.pow(o,2)*Math.pow(c,2)*e,g=Math.exp(-d),w=Dc(Math.pow(c,2),o);return(-s(c)+Sl>0?-1:1)*((f-p)*g)/w}):(s=c=>{const u=Math.exp(-c*e),d=(c-r)*e+1;return-Sl+u*d},i=c=>{const u=Math.exp(-c*e),d=(r-c)*(e*e);return u*d});const a=5/e,l=X1(s,i,a);if(e=rn(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const J1=12;function X1(e,t,r){let n=r;for(let s=1;s<J1;s++)n=n-e(n)/t(n);return n}function Dc(e,t){return e*Math.sqrt(1-t*t)}const Z1=["duration","bounce"],e_=["stiffness","damping","mass"];function hf(e,t){return t.some(r=>e[r]!==void 0)}function t_(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!hf(e,e_)&&hf(e,Z1)){const r=Q1(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function z0({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=t_({...n,velocity:-Ht(n.velocity||0)}),p=d||0,g=l/(2*Math.sqrt(a*c)),w=i-s,b=Ht(Math.sqrt(a/c)),y=Math.abs(w)<5;r||(r=y?.01:2),t||(t=y?.005:.5);let v;if(g<1){const m=Dc(b,g);v=x=>{const S=Math.exp(-g*b*x);return i-S*((p+g*b*w)/m*Math.sin(m*x)+w*Math.cos(m*x))}}else if(g===1)v=m=>i-Math.exp(-b*m)*(w+(p+b*w)*m);else{const m=b*Math.sqrt(g*g-1);v=x=>{const S=Math.exp(-g*b*x),k=Math.min(m*x,300);return i-S*((p+g*b*w)*Math.sinh(k)+m*w*Math.cosh(k))/m}}return{calculatedDuration:f&&u||null,next:m=>{const x=v(m);if(f)o.done=m>=u;else{let S=p;m!==0&&(g<1?S=U0(v,m,x):S=0);const k=Math.abs(S)<=r,j=Math.abs(i-x)<=t;o.done=k&&j}return o.value=o.done?i:x,o}}}function ff({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],f={done:!1,value:d},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,g=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let w=r*t;const b=d+w,y=o===void 0?b:o(b);y!==b&&(w=y-d);const v=E=>-w*Math.exp(-E/n),m=E=>y+v(E),x=E=>{const N=v(E),I=m(E);f.done=Math.abs(N)<=c,f.value=f.done?y:I};let S,k;const j=E=>{p(f.value)&&(S=E,k=z0({keyframes:[f.value,g(f.value)],velocity:U0(m,E,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return j(0),{calculatedDuration:null,next:E=>{let N=!1;return!k&&S===void 0&&(N=!0,x(E),j(E)),S!==void 0&&E>S?k.next(E-S):(!N&&x(E),f)}}}const r_=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Y.update(t,!0),stop:()=>Xt(t),now:()=>Ae.isProcessing?Ae.timestamp:performance.now()}},pf=2e4;function mf(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<pf;)t+=r,n=e.next(t);return t>=pf?1/0:t}const n_={decay:ff,inertia:ff,tween:Zo,keyframes:Zo,spring:z0};function ea({autoplay:e=!0,delay:t=0,driver:r=r_,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...f}){let p=1,g=!1,w,b;const y=()=>{b=new Promise(M=>{w=M})};y();let v;const m=n_[s]||Zo;let x;m!==Zo&&typeof n[0]!="number"&&(x=B0([0,100],n,{clamp:!1}),n=[0,100]);const S=m({...f,keyframes:n});let k;a==="mirror"&&(k=m({...f,keyframes:[...n].reverse(),velocity:-(f.velocity||0)}));let j="idle",E=null,N=null,I=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=mf(S));const{calculatedDuration:Q}=S;let te=1/0,ge=1/0;Q!==null&&(te=Q+o,ge=te*(i+1)-o);let U=0;const J=M=>{if(N===null)return;p>0&&(N=Math.min(N,M)),p<0&&(N=Math.min(M-ge/p,N)),E!==null?U=E:U=Math.round(M-N)*p;const H=U-t*(p>=0?1:-1),Ge=p>=0?H<0:H>ge;U=Math.max(H,0),j==="finished"&&E===null&&(U=ge);let ot=U,Ve=S;if(i){const hs=Math.min(U,ge)/te;let pn=Math.floor(hs),It=hs%1;!It&&hs>=1&&(It=1),It===1&&pn--,pn=Math.min(pn,i+1),!!(pn%2)&&(a==="reverse"?(It=1-It,o&&(It-=o/te)):a==="mirror"&&(Ve=k)),ot=Pr(0,1,It)*te}const je=Ge?{done:!1,value:n[0]}:Ve.next(ot);x&&(je.value=x(je.value));let{done:$t}=je;!Ge&&Q!==null&&($t=p>=0?U>=ge:U<=0);const Ma=E===null&&(j==="finished"||j==="running"&&$t);return d&&d(je.value),Ma&&C(),je},q=()=>{v&&v.stop(),v=void 0},ye=()=>{j="idle",q(),w(),y(),N=I=null},C=()=>{j="finished",u&&u(),q(),w()},$=()=>{if(g)return;v||(v=r(J));const M=v.now();l&&l(),E!==null?N=M-E:(!N||j==="finished")&&(N=M),j==="finished"&&y(),I=N,E=null,j="running",v.start()};e&&$();const V={then(M,H){return b.then(M,H)},get time(){return Ht(U)},set time(M){M=rn(M),U=M,E!==null||!v||p===0?E=M:N=v.now()-M/p},get duration(){const M=S.calculatedDuration===null?mf(S):S.calculatedDuration;return Ht(M)},get speed(){return p},set speed(M){M===p||!v||(p=M,V.time=Ht(U))},get state(){return j},play:$,pause:()=>{j="paused",E=U},stop:()=>{g=!0,j!=="idle"&&(j="idle",c&&c(),ye())},cancel:()=>{I!==null&&J(I),ye()},complete:()=>{j="finished"},sample:M=>(N=0,J(M))};return V}function s_(e){let t;return()=>(t===void 0&&(t=e()),t)}const i_=s_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),o_=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Yi=10,a_=2e4,l_=(e,t)=>t.type==="spring"||e==="backgroundColor"||!x0(t.ease);function c_(e,t,{onUpdate:r,onComplete:n,...s}){if(!(i_()&&o_.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(m=>{a=m})};u();let{keyframes:d,duration:f=300,ease:p,times:g}=s;if(l_(t,s)){const m=ea({...s,repeat:0,delay:0});let x={done:!1,value:d[0]};const S=[];let k=0;for(;!x.done&&k<a_;)x=m.sample(k),S.push(x.value),k+=Yi;g=void 0,d=S,f=k-Yi,p="linear"}const w=v1(e.owner.current,t,d,{...s,duration:f,ease:p,times:g}),b=()=>{c=!1,w.cancel()},y=()=>{c=!0,Y.update(b),a(),u()};return w.onfinish=()=>{c||(e.set(w1(d,s)),n&&n(),y())},{then(m,x){return l.then(m,x)},attachTimeline(m){return w.timeline=m,w.onfinish=null,he},get time(){return Ht(w.currentTime||0)},set time(m){w.currentTime=rn(m)},get speed(){return w.playbackRate},set speed(m){w.playbackRate=m},get duration(){return Ht(f)},play:()=>{o||(w.play(),Xt(b))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:m}=w;if(m){const x=ea({...s,autoplay:!1});e.setWithVelocity(x.sample(m-Yi).value,x.sample(m).value,Yi)}y()},complete:()=>{c||w.finish()},cancel:y}}function u_({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:he,pause:he,stop:he,then:i=>(i(),Promise.resolve()),cancel:he,complete:he});return t?ea({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const d_={type:"spring",stiffness:500,damping:25,restSpeed:10},h_=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),f_={type:"keyframes",duration:.8},p_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},m_=(e,{keyframes:t})=>t.length>2?f_:dn.has(e)?e.startsWith("scale")?h_(t[1]):d_:p_,Lc=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cr.test(t)||t==="0")&&!t.startsWith("url(")),g_=new Set(["brightness","contrast","saturate","opacity"]);function y_(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Na)||[];if(!n)return e;const s=r.replace(n,"");let i=g_.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const v_=/([a-z-]*)\(.*?\)/g,Mc={...Cr,getAnimatableNone:e=>{const t=e.match(v_);return t?t.map(y_).join(" "):e}},w_={...n0,color:$e,backgroundColor:$e,outlineColor:$e,fill:$e,stroke:$e,borderColor:$e,borderTopColor:$e,borderRightColor:$e,borderBottomColor:$e,borderLeftColor:$e,filter:Mc,WebkitFilter:Mc},yd=e=>w_[e];function W0(e,t){let r=yd(e);return r!==Mc&&(r=Cr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const q0=e=>/^0[^.\s]+$/.test(e);function x_(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||q0(e)}function b_(e,t,r,n){const s=Lc(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:e.get();let a;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),x_(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];i[u]=W0(t,a)}return i}function __({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function vd(e,t){return e[t]||e.default||e}const S_={skipAnimations:!1},wd=(e,t,r,n={})=>s=>{const i=vd(n,e)||{},o=i.delay||n.delay||0;let{elapsed:a=0}=n;a=a-rn(o);const l=b_(t,e,r,i),c=l[0],u=l[l.length-1],d=Lc(e,c),f=Lc(e,u);let p={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(__(i)||(p={...p,...m_(e,p)}),p.duration&&(p.duration=rn(p.duration)),p.repeatDelay&&(p.repeatDelay=rn(p.repeatDelay)),!d||!f||y1.current||i.type===!1||S_.skipAnimations)return u_(p);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=c_(t,e,p);if(g)return g}return ea(p)};function ta(e){return!!(He(e)&&e.add)}const H0=e=>/^\-?\d*\.?\d+$/.test(e);function xd(e,t){e.indexOf(t)===-1&&e.push(t)}function bd(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class _d{constructor(){this.subscriptions=[]}add(t){return xd(this.subscriptions,t),()=>bd(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const k_=e=>!isNaN(parseFloat(e));class j_{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=Ae;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Y.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Y.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=k_(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new _d);const n=this.events[t].add(r);return t==="change"?()=>{n(),Y.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?F0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ts(e,t){return new j_(e,t)}const G0=e=>t=>t.test(e),E_={test:e=>e==="auto",parse:e=>e},K0=[hn,L,Ot,ir,Ob,Rb,E_],bs=e=>K0.find(G0(e)),T_=[...K0,$e,Cr],P_=e=>T_.find(G0(e));function C_(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ts(r))}function N_(e,t){const r=Ra(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const a=Gb(i[o]);C_(e,o,a)}}function A_(e,t,r){var n,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],c=t[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(s=(n=r[l])!==null&&n!==void 0?n:e.readValue(l))!==null&&s!==void 0?s:t[l]),u!=null&&(typeof u=="string"&&(H0(u)||q0(u))?u=parseFloat(u):!P_(u)&&Cr.test(c)&&(u=W0(l,c)),e.addValue(l,ts(u,{owner:e})),r[l]===void 0&&(r[l]=u),u!==null&&e.setBaseTarget(l,u))}}function R_(e,t){return t?(t[e]||t.default||t).from:void 0}function O_(e,t,r){const n={};for(const s in e){const i=R_(s,t);if(i!==void 0)n[s]=i;else{const o=r.getValue(s);o&&(n[s]=o.get())}}return n}function $_({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function I_(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function Y0(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const f=e.getValue(d),p=a[d];if(!f||p===void 0||u&&$_(u,d))continue;const g={delay:r,elapsed:0,...vd(i||{},d)};if(window.HandoffAppearAnimations){const y=e.getProps()[Qg];if(y){const v=window.HandoffAppearAnimations(y,d,f,Y);v!==null&&(g.elapsed=v,g.isHandoff=!0)}}let w=!g.isHandoff&&!I_(f,p);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(w=!1),f.animation&&(w=!1),w)continue;f.start(wd(d,f,p,e.shouldReduceMotion&&dn.has(d)?{type:!1}:g));const b=f.animation;ta(l)&&(l.add(d),b.then(()=>l.remove(d))),c.push(b)}return o&&Promise.all(c).then(()=>{o&&N_(e,o)}),c}function Vc(e,t,r={}){const n=Ra(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(Y0(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=s;return D_(e,t,c+l,u,d,r)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,c]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function D_(e,t,r=0,n=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*n,l=s===1?(c=0)=>c*n:(c=0)=>a-c*n;return Array.from(e.variantChildren).sort(L_).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(Vc(c,t,{...i,delay:r+l(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function L_(e,t){return e.sortNodePosition(t)}function M_(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Vc(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Vc(e,t,r);else{const s=typeof t=="function"?Ra(e,t,r.custom):t;n=Promise.all(Y0(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const V_=[...nd].reverse(),B_=nd.length;function F_(e){return t=>Promise.all(t.map(({animation:r,options:n})=>M_(e,r,n)))}function U_(e){let t=F_(e);const r=W_();let n=!0;const s=(l,c)=>{const u=Ra(e,c);if(u){const{transition:d,transitionEnd:f,...p}=u;l={...l,...p,...f}}return l};function i(l){t=l(e)}function o(l,c){const u=e.getProps(),d=e.getVariantContext(!0)||{},f=[],p=new Set;let g={},w=1/0;for(let y=0;y<B_;y++){const v=V_[y],m=r[v],x=u[v]!==void 0?u[v]:d[v],S=di(x),k=v===c?m.isActive:null;k===!1&&(w=y);let j=x===d[v]&&x!==u[v]&&S;if(j&&n&&e.manuallyAnimateOnMount&&(j=!1),m.protectedKeys={...g},!m.isActive&&k===null||!x&&!m.prevProp||Pa(x)||typeof x=="boolean")continue;let N=z_(m.prevProp,x)||v===c&&m.isActive&&!j&&S||y>w&&S,I=!1;const Q=Array.isArray(x)?x:[x];let te=Q.reduce(s,{});k===!1&&(te={});const{prevResolvedValues:ge={}}=m,U={...ge,...te},J=q=>{N=!0,p.has(q)&&(I=!0,p.delete(q)),m.needsAnimating[q]=!0};for(const q in U){const ye=te[q],C=ge[q];if(g.hasOwnProperty(q))continue;let $=!1;Jo(ye)&&Jo(C)?$=!v0(ye,C):$=ye!==C,$?ye!==void 0?J(q):p.add(q):ye!==void 0&&p.has(q)?J(q):m.protectedKeys[q]=!0}m.prevProp=x,m.prevResolvedValues=te,m.isActive&&(g={...g,...te}),n&&e.blockInitialAnimation&&(N=!1),N&&(!j||I)&&f.push(...Q.map(q=>({animation:q,options:{type:v,...l}})))}if(p.size){const y={};p.forEach(v=>{const m=e.getBaseTarget(v);m!==void 0&&(y[v]=m)}),f.push({animation:y})}let b=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(f):Promise.resolve()}function a(l,c,u){var d;if(r[l].isActive===c)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),r[l].isActive=c;const f=o(u,l);for(const p in r)r[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r}}function z_(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!v0(t,e):!1}function Lr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function W_(){return{animate:Lr(!0),whileInView:Lr(),whileHover:Lr(),whileTap:Lr(),whileDrag:Lr(),whileFocus:Lr(),exit:Lr()}}class q_ extends Or{constructor(t){super(t),t.animationState||(t.animationState=U_(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Pa(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let H_=0;class G_ extends Or{constructor(){super(...arguments),this.id=H_++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const K_={animation:{Feature:q_},exit:{Feature:G_}},gf=(e,t)=>Math.abs(e-t);function Y_(e,t){const r=gf(e.x,t.x),n=gf(e.y,t.y);return Math.sqrt(r**2+n**2)}class Q0{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=jl(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Y_(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=d,{timestamp:w}=Ae;this.history.push({...g,timestamp:w});const{onStart:b,onMove:y}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=kl(f,this.transformPagePoint),Y.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=jl(d.type==="pointercancel"?this.lastMoveEventInfo:kl(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,b),g&&g(d,b)},!f0(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=Aa(t),a=kl(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ae;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=r;u&&u(t,jl(a,this.history)),this.removeListeners=jr(qt(this.contextWindow,"pointermove",this.handlePointerMove),qt(this.contextWindow,"pointerup",this.handlePointerUp),qt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xt(this.updatePoint)}}function kl(e,t){return t?{point:t(e.point)}:e}function yf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function jl({point:e},t){return{point:e,delta:yf(e,J0(t)),offset:yf(e,Q_(t)),velocity:J_(t,.1)}}function Q_(e){return e[0]}function J0(e){return e[e.length-1]}function J_(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=J0(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>rn(t)));)r--;if(!n)return{x:0,y:0};const i=Ht(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function nt(e){return e.max-e.min}function Bc(e,t=0,r=.01){return Math.abs(e-t)<=r}function vf(e,t,r,n=.5){e.origin=n,e.originPoint=se(t.min,t.max,e.origin),e.scale=nt(r)/nt(t),(Bc(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=se(r.min,r.max,e.origin)-e.originPoint,(Bc(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Us(e,t,r,n){vf(e.x,t.x,r.x,n?n.originX:void 0),vf(e.y,t.y,r.y,n?n.originY:void 0)}function wf(e,t,r){e.min=r.min+t.min,e.max=e.min+nt(t)}function X_(e,t,r){wf(e.x,t.x,r.x),wf(e.y,t.y,r.y)}function xf(e,t,r){e.min=t.min-r.min,e.max=e.min+nt(t)}function zs(e,t,r){xf(e.x,t.x,r.x),xf(e.y,t.y,r.y)}function Z_(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?se(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?se(r,e,n.max):Math.min(e,r)),e}function bf(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function eS(e,{top:t,left:r,bottom:n,right:s}){return{x:bf(e.x,r,s),y:bf(e.y,t,n)}}function _f(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function tS(e,t){return{x:_f(e.x,t.x),y:_f(e.y,t.y)}}function rS(e,t){let r=.5;const n=nt(e),s=nt(t);return s>n?r=fi(t.min,t.max-n,e.min):n>s&&(r=fi(e.min,e.max-s,t.min)),Pr(0,1,r)}function nS(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Fc=.35;function sS(e=Fc){return e===!1?e=0:e===!0&&(e=Fc),{x:Sf(e,"left","right"),y:Sf(e,"top","bottom")}}function Sf(e,t,r){return{min:kf(e,t),max:kf(e,r)}}function kf(e,t){return typeof e=="number"?e:e[t]||0}const jf=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vn=()=>({x:jf(),y:jf()}),Ef=()=>({min:0,max:0}),fe=()=>({x:Ef(),y:Ef()});function lt(e){return[e("x"),e("y")]}function X0({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function iS({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function oS(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function El(e){return e===void 0||e===1}function Uc({scale:e,scaleX:t,scaleY:r}){return!El(e)||!El(t)||!El(r)}function Ur(e){return Uc(e)||Z0(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Z0(e){return Tf(e.x)||Tf(e.y)}function Tf(e){return e&&e!=="0%"}function ra(e,t,r){const n=e-r,s=t*n;return r+s}function Pf(e,t,r,n,s){return s!==void 0&&(e=ra(e,s,n)),ra(e,r,n)+t}function zc(e,t=0,r=1,n,s){e.min=Pf(e.min,t,r,n,s),e.max=Pf(e.max,t,r,n,s)}function ey(e,{x:t,y:r}){zc(e.x,t.translate,t.scale,t.originPoint),zc(e.y,r.translate,r.scale,r.originPoint)}function aS(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Bn(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,ey(e,o)),n&&Ur(i.latestValues)&&Bn(e,i.latestValues))}t.x=Cf(t.x),t.y=Cf(t.y)}function Cf(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function cr(e,t){e.min=e.min+t,e.max=e.max+t}function Nf(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,o=se(e.min,e.max,i);zc(e,t[r],t[n],o,t.scale)}const lS=["x","scaleX","originX"],cS=["y","scaleY","originY"];function Bn(e,t){Nf(e.x,t,lS),Nf(e.y,t,cS)}function ty(e,t){return X0(oS(e.getBoundingClientRect(),t))}function uS(e,t,r){const n=ty(e,r),{scroll:s}=t;return s&&(cr(n.x,s.offset.x),cr(n.y,s.offset.y)),n}const ry=({current:e})=>e?e.ownerDocument.defaultView:null,dS=new WeakMap;class hS{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fe(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Aa(u,"page").point)},i=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=m0(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lt(b=>{let y=this.getAxisMotionValue(b).get()||0;if(Ot.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const m=v.layout.layoutBox[b];m&&(y=nt(m)*(parseFloat(y)/100))}}this.originPoint[b]=y}),g&&Y.update(()=>g(u,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=d;if(p&&this.currentDirection===null){this.currentDirection=fS(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),w&&w(u,d)},a=(u,d)=>this.stop(u,d),l=()=>lt(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Q0(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ry(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Y.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Qi(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=Z_(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&Ln(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=eS(s.layoutBox,r):this.constraints=!1,this.elastic=sS(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&lt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=nS(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Ln(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=uS(n,s.root,this.visualElement.getTransformPagePoint());let o=tS(s.layout.layoutBox,i);if(r){const a=r(iS(o));this.hasMutatedConstraints=!!a,a&&(o=X0(a))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=lt(u=>{if(!Qi(u,r,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(wd(t,n,0,r))}stopAnimation(){lt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){lt(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){lt(r=>{const{drag:n}=this.getProps();if(!Qi(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(t[r]-se(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Ln(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};lt(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=rS({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),lt(o=>{if(!Qi(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(se(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;dS.set(this.visualElement,this);const t=this.visualElement.current,r=qt(t,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Ln(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const o=zt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(lt(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Fc,dragMomentum:a=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Qi(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function fS(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class pS extends Or{constructor(t){super(t),this.removeGroupControls=he,this.removeListeners=he,this.controls=new hS(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||he}unmount(){this.removeGroupControls(),this.removeListeners()}}const Af=e=>(t,r)=>{e&&Y.update(()=>e(t,r))};class mS extends Or{constructor(){super(...arguments),this.removePointerDownListener=he}onPointerDown(t){this.session=new Q0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ry(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Af(t),onStart:Af(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Y.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=qt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function gS(){const e=_.useContext(Ea);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=_.useId();return _.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const _o={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rf(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _s={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(L.test(e))e=parseFloat(e);else return e;const r=Rf(e,t.target.x),n=Rf(e,t.target.y);return`${r}% ${n}%`}},yS={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Cr.parse(e);if(s.length>5)return n;const i=Cr.createTransformer(e),o=typeof s[0]!="number"?1:0,a=r.x.scale*t.x,l=r.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=se(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class vS extends Gt.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;jb(wS),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),_o.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Y.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ny(e){const[t,r]=gS(),n=_.useContext(id);return Gt.createElement(vS,{...e,layoutGroup:n,switchLayoutGroup:_.useContext(Xg),isPresent:t,safeToRemove:r})}const wS={borderRadius:{..._s,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_s,borderTopRightRadius:_s,borderBottomLeftRadius:_s,borderBottomRightRadius:_s,boxShadow:yS},sy=["TopLeft","TopRight","BottomLeft","BottomRight"],xS=sy.length,Of=e=>typeof e=="string"?parseFloat(e):e,$f=e=>typeof e=="number"||L.test(e);function bS(e,t,r,n,s,i){s?(e.opacity=se(0,r.opacity!==void 0?r.opacity:1,_S(n)),e.opacityExit=se(t.opacity!==void 0?t.opacity:1,0,SS(n))):i&&(e.opacity=se(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<xS;o++){const a=`border${sy[o]}Radius`;let l=If(t,a),c=If(r,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||$f(l)===$f(c)?(e[a]=Math.max(se(Of(l),Of(c),n),0),(Ot.test(c)||Ot.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||r.rotate)&&(e.rotate=se(t.rotate||0,r.rotate||0,n))}function If(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _S=iy(0,.5,T0),SS=iy(.5,.95,he);function iy(e,t,r){return n=>n<e?0:n>t?1:r(fi(e,t,n))}function Df(e,t){e.min=t.min,e.max=t.max}function at(e,t){Df(e.x,t.x),Df(e.y,t.y)}function Lf(e,t,r,n,s){return e-=t,e=ra(e,1/r,n),s!==void 0&&(e=ra(e,1/s,n)),e}function kS(e,t=0,r=1,n=.5,s,i=e,o=e){if(Ot.test(t)&&(t=parseFloat(t),t=se(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=se(i.min,i.max,n);e===i&&(a-=t),e.min=Lf(e.min,t,r,a,s),e.max=Lf(e.max,t,r,a,s)}function Mf(e,t,[r,n,s],i,o){kS(e,t[r],t[n],t[s],t.scale,i,o)}const jS=["x","scaleX","originX"],ES=["y","scaleY","originY"];function Vf(e,t,r,n){Mf(e.x,t,jS,r?r.x:void 0,n?n.x:void 0),Mf(e.y,t,ES,r?r.y:void 0,n?n.y:void 0)}function Bf(e){return e.translate===0&&e.scale===1}function oy(e){return Bf(e.x)&&Bf(e.y)}function TS(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function ay(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Ff(e){return nt(e.x)/nt(e.y)}class PS{constructor(){this.members=[]}add(t){xd(this.members,t),t.scheduleRender()}remove(t){if(bd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uf(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:l,rotateX:c,rotateY:u}=r;l&&(n+=`rotate(${l}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(n+=`scale(${o}, ${a})`),n||"none"}const CS=(e,t)=>e.depth-t.depth;class NS{constructor(){this.children=[],this.isDirty=!1}add(t){xd(this.children,t),this.isDirty=!0}remove(t){bd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(CS),this.isDirty=!1,this.children.forEach(t)}}function AS(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(Xt(n),e(i-t))};return Y.read(n,!0),()=>Xt(n)}function RS(e){window.MotionDebug&&window.MotionDebug.record(e)}function OS(e){return e instanceof SVGElement&&e.tagName!=="svg"}function $S(e,t,r){const n=He(e)?e:ts(e);return n.start(wd("",n,t,r)),n.animation}const zf=["","X","Y","Z"],IS={visibility:"hidden"},Wf=1e3;let DS=0;const zr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ly({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=DS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zr.totalNodes=zr.resolvedTargetDeltas=zr.recalculatedProjection=0,this.nodes.forEach(VS),this.nodes.forEach(WS),this.nodes.forEach(qS),this.nodes.forEach(BS),RS(zr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new NS)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new _d),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=OS(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=AS(f,250),_o.hasAnimatedSinceResize&&(_o.hasAnimatedSinceResize=!1,this.nodes.forEach(Hf))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||QS,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=u.getProps(),v=!this.targetLayout||!ay(this.targetLayout,g)||p,m=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||m||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,m);const x={...vd(w,"layout"),onPlay:b,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else f||Hf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HS),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qf);return}this.isUpdating||this.nodes.forEach(US),this.isUpdating=!1,this.nodes.forEach(zS),this.nodes.forEach(LS),this.nodes.forEach(MS),this.clearAllSnapshots();const a=performance.now();Ae.delta=Pr(0,1e3/60,a-Ae.timestamp),Ae.timestamp=a,Ae.isProcessing=!0,gl.update.process(Ae),gl.preRender.process(Ae),gl.render.process(Ae),Ae.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(FS),this.sharedNodes.forEach(GS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Y.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Y.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!oy(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Ur(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),JS(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return fe();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(cr(a.x,l.offset.x),cr(a.y,l.offset.y)),a}removeElementScroll(o){const a=fe();at(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){at(a,o);const{scroll:f}=this.root;f&&(cr(a.x,-f.offset.x),cr(a.y,-f.offset.y))}cr(a.x,u.offset.x),cr(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=fe();at(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Bn(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ur(u.latestValues)&&Bn(l,u.latestValues)}return Ur(this.latestValues)&&Bn(l,this.latestValues),l}removeTransform(o){const a=fe();at(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ur(c.latestValues))continue;Uc(c.latestValues)&&c.updateSnapshot();const u=fe(),d=c.measurePageBox();at(u,d),Vf(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ur(this.latestValues)&&Vf(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ae.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ae.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fe(),this.relativeTargetOrigin=fe(),zs(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),at(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fe(),this.targetWithTransforms=fe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),X_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):at(this.target,this.layout.layoutBox),ey(this.target,this.targetDelta)):at(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fe(),this.relativeTargetOrigin=fe(),zs(this.relativeTargetOrigin,this.target,p.target),at(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Uc(this.parent.latestValues)||Z0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ae.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;at(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;aS(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Vn(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Vn(),this.projectionDeltaWithTransform=Vn());const w=this.projectionTransform;Us(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Uf(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),zr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Vn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=fe(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,w=p!==g,b=this.getStack(),y=!b||b.members.length<=1,v=!!(w&&!y&&this.options.crossfade===!0&&!this.path.some(YS));this.animationProgress=0;let m;this.mixTargetDelta=x=>{const S=x/1e3;Gf(d.x,o.x,S),Gf(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zs(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KS(this.relativeTarget,this.relativeTargetOrigin,f,S),m&&TS(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=fe()),at(m,this.relativeTarget)),w&&(this.animationValues=u,bS(u,c,this.latestValues,S,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Y.update(()=>{_o.hasAnimatedSinceResize=!0,this.currentAnimation=$S(0,Wf,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&cy(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||fe();const d=nt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=nt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}at(a,l),Bn(a,u),Us(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new PS),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<zf.length;u++){const d="rotate"+zf[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return IS;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=bo(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=bo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ur(this.latestValues)&&(w.transform=u?u({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=Uf(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in Yo){if(f[w]===void 0)continue;const{correct:b,applyTo:y}=Yo[w],v=c.transform==="none"?f[w]:b(f[w],d);if(y){const m=y.length;for(let x=0;x<m;x++)c[y[x]]=v}else c[w]=v}return this.options.layoutId&&(c.pointerEvents=d===this?bo(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(qf),this.root.sharedNodes.clear()}}}function LS(e){e.updateLayout()}function MS(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?lt(d=>{const f=o?r.measuredBox[d]:r.layoutBox[d],p=nt(f);f.min=n[d].min,f.max=f.min+p}):cy(i,r.layoutBox,n)&&lt(d=>{const f=o?r.measuredBox[d]:r.layoutBox[d],p=nt(n[d]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const a=Vn();Us(a,n,r.layoutBox);const l=Vn();o?Us(l,e.applyTransform(s,!0),r.measuredBox):Us(l,n,r.layoutBox);const c=!oy(a);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=fe();zs(g,r.layoutBox,f.layoutBox);const w=fe();zs(w,n,p.layoutBox),ay(g,w)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function VS(e){zr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function BS(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function FS(e){e.clearSnapshot()}function qf(e){e.clearMeasurements()}function US(e){e.isLayoutDirty=!1}function zS(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Hf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function WS(e){e.resolveTargetDelta()}function qS(e){e.calcProjection()}function HS(e){e.resetRotation()}function GS(e){e.removeLeadSnapshot()}function Gf(e,t,r){e.translate=se(t.translate,0,r),e.scale=se(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Kf(e,t,r,n){e.min=se(t.min,r.min,n),e.max=se(t.max,r.max,n)}function KS(e,t,r,n){Kf(e.x,t.x,r.x,n),Kf(e.y,t.y,r.y,n)}function YS(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const QS={duration:.45,ease:[.4,0,.1,1]},Yf=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Qf=Yf("applewebkit/")&&!Yf("chrome/")?Math.round:he;function Jf(e){e.min=Qf(e.min),e.max=Qf(e.max)}function JS(e){Jf(e.x),Jf(e.y)}function cy(e,t,r){return e==="position"||e==="preserve-aspect"&&!Bc(Ff(t),Ff(r),.2)}const XS=ly({attachResizeListener:(e,t)=>zt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tl={current:void 0},uy=ly({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Tl.current){const e=new XS({});e.mount(window),e.setOptions({layoutScroll:!0}),Tl.current=e}return Tl.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),ZS={pan:{Feature:mS},drag:{Feature:pS,ProjectionNode:uy,MeasureLayout:ny}},ek=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function tk(e){const t=ek.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function Wc(e,t,r=1){const[n,s]=tk(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return H0(o)?parseFloat(o):o}else return Oc(s)?Wc(s,t,r+1):s}function rk(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!Oc(i))return;const o=Wc(i,n);o&&s.set(o)});for(const s in t){const i=t[s];if(!Oc(i))continue;const o=Wc(i,n);o&&(t[s]=o,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const nk=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),dy=e=>nk.has(e),sk=e=>Object.keys(e).some(dy),Xf=e=>e===hn||e===L,Zf=(e,t)=>parseFloat(e.split(", ")[t]),ep=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return Zf(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?Zf(i[1],e):0}},ik=new Set(["x","y","z"]),ok=Si.filter(e=>!ik.has(e));function ak(e){const t=[];return ok.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const rs={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ep(4,13),y:ep(5,14)};rs.translateX=rs.x;rs.translateY=rs.y;const lk=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(c=>{a[c]=rs[c](n,i)}),t.render();const l=t.measureViewportBox();return r.forEach(c=>{const u=t.getValue(c);u&&u.jump(a[c]),e[c]=rs[c](l,i)}),e},ck=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(dy);let i=[],o=!1;const a=[];if(s.forEach(l=>{const c=e.getValue(l);if(!e.hasValue(l))return;let u=r[l],d=bs(u);const f=t[l];let p;if(Jo(f)){const g=f.length,w=f[0]===null?1:0;u=f[w],d=bs(u);for(let b=w;b<g&&f[b]!==null;b++)p?fd(bs(f[b])===p):p=bs(f[b])}else p=bs(f);if(d!==p)if(Xf(d)&&Xf(p)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof f=="string"?t[l]=parseFloat(f):Array.isArray(f)&&p===L&&(t[l]=f.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?c.set(p.transform(u)):t[l]=d.transform(f):(o||(i=ak(e),o=!0),a.push(l),n[l]=n[l]!==void 0?n[l]:t[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=lk(t,e,a);return i.length&&i.forEach(([u,d])=>{e.getValue(u).set(d)}),e.render(),Ta&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:n}}else return{target:t,transitionEnd:n}};function uk(e,t,r,n){return sk(t)?ck(e,t,r,n):{target:t,transitionEnd:n}}const dk=(e,t,r,n)=>{const s=rk(e,t,n);return t=s.target,n=s.transitionEnd,uk(e,t,r,n)},qc={current:null},hy={current:!1};function hk(){if(hy.current=!0,!!Ta)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>qc.current=e.matches;e.addListener(t),t()}else qc.current=!1}function fk(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],o=r[s];if(He(i))e.addValue(s,i),ta(n)&&n.add(s);else if(He(o))e.addValue(s,ts(i,{owner:e})),ta(n)&&n.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,ts(a!==void 0?a:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const tp=new WeakMap,fy=Object.keys(hi),pk=fy.length,rp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],mk=sd.length;class gk{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Y.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=r.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Ca(r),this.isVariantNode=Jg(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const d in u){const f=u[d];a[d]!==void 0&&He(f)&&(f.set(a[d],!1),ta(c)&&c.add(d))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,tp.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),hy.current||hk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qc.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){tp.delete(this.current),this.projection&&this.projection.unmount(),Xt(this.notifyUpdate),Xt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=dn.has(t),s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Y.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let o,a;for(let l=0;l<pk;l++){const c=fy[l],{isEnabled:u,Feature:d,ProjectionNode:f,MeasureLayout:p}=hi[c];f&&(o=f),u(r)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:p}=r;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&Ln(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<rp.length;n++){const s=rp[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=fk(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<mk;n++){const s=sd[n],i=this.props[s];(di(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ts(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=hd(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!He(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new _d),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class py extends gk{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let o=O_(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),o&&(o=s(o))),i){A_(this,n,o);const a=dk(this,n,o,r);r=a.transitionEnd,n=a.target}return{transition:t,transitionEnd:r,...n}}}function yk(e){return window.getComputedStyle(e)}class vk extends py{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(dn.has(r)){const n=yd(r);return n&&n.default||0}else{const n=yk(t),s=(t0(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return ty(t,r)}build(t,r,n,s){ad(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return dd(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;He(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){a0(t,r,n,s)}}class wk extends py{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(dn.has(r)){const n=yd(r);return n&&n.default||0}return r=l0.has(r)?r:rd(r),t.getAttribute(r)}measureInstanceViewportBox(){return fe()}scrapeMotionValuesFromProps(t,r){return u0(t,r)}build(t,r,n,s){cd(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){c0(t,r,n,s)}mount(t){this.isSVGTag=ud(t.tagName),super.mount(t)}}const xk=(e,t)=>od(e)?new wk(t,{enableHardwareAcceleration:!1}):new vk(t,{enableHardwareAcceleration:!0}),bk={layout:{ProjectionNode:uy,MeasureLayout:ny}},_k={...K_,...p1,...ZS,...bk},T=Sb((e,t)=>t1(e,t,_k,xk));function my(){const e=_.useRef(!1);return td(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Sk(){const e=my(),[t,r]=_.useState(0),n=_.useCallback(()=>{e.current&&r(t+1)},[t]);return[_.useCallback(()=>Y.postRender(n),[n]),t]}class kk extends _.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jk({children:e,isPresent:t}){const r=_.useId(),n=_.useRef(null),s=_.useRef({width:0,height:0,top:0,left:0});return _.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),_.createElement(kk,{isPresent:t,childRef:n,sizeRef:s},_.cloneElement(e,{ref:n}))}const Pl=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=d0(Ek),l=_.useId(),c=_.useMemo(()=>({id:l,initial:t,isPresent:r,custom:s,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;n&&n()},register:u=>(a.set(u,!1),()=>a.delete(u))}),i?void 0:[r]);return _.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[r]),_.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(e=_.createElement(jk,{isPresent:r},e)),_.createElement(Ea.Provider,{value:c},e)};function Ek(){return new Map}function Tk(e){return _.useEffect(()=>()=>e(),[])}const Wr=e=>e.key||"";function Pk(e,t){e.forEach(r=>{const n=Wr(r);t.set(n,r)})}function Ck(e){const t=[];return _.Children.forEach(e,r=>{_.isValidElement(r)&&t.push(r)}),t}const tt=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=_.useContext(id).forceRender||Sk()[0],l=my(),c=Ck(e);let u=c;const d=_.useRef(new Map).current,f=_.useRef(u),p=_.useRef(new Map).current,g=_.useRef(!0);if(td(()=>{g.current=!1,Pk(c,p),f.current=u}),Tk(()=>{g.current=!0,p.clear(),d.clear()}),g.current)return _.createElement(_.Fragment,null,u.map(v=>_.createElement(Pl,{key:Wr(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},v)));u=[...u];const w=f.current.map(Wr),b=c.map(Wr),y=w.length;for(let v=0;v<y;v++){const m=w[v];b.indexOf(m)===-1&&!d.has(m)&&d.set(m,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((v,m)=>{if(b.indexOf(m)!==-1)return;const x=p.get(m);if(!x)return;const S=w.indexOf(m);let k=v;if(!k){const j=()=>{d.delete(m);const E=Array.from(p.keys()).filter(N=>!b.includes(N));if(E.forEach(N=>p.delete(N)),f.current=c.filter(N=>{const I=Wr(N);return I===m||E.includes(I)}),!d.size){if(l.current===!1)return;a(),n&&n()}};k=_.createElement(Pl,{key:Wr(x),isPresent:!1,onExitComplete:j,custom:t,presenceAffectsLayout:i,mode:o},x),d.set(m,k)}u.splice(S,0,k)}),u=u.map(v=>{const m=v.key;return d.has(m)?v:_.createElement(Pl,{key:Wr(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),_.createElement(_.Fragment,null,d.size?u:u.map(v=>_.cloneElement(v)))};let Nk={data:""},Ak=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Nk},Rk=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ok=/\/\*[^]*?\*\/|  +/g,np=/\n+/g,fr=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?fr(o,i):i+"{"+fr(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=fr(o,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=fr.p?fr.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},Lt={},gy=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+gy(e[r]);return t}return e},$k=(e,t,r,n,s)=>{let i=gy(e),o=Lt[i]||(Lt[i]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(i));if(!Lt[o]){let l=i!==e?e:(c=>{let u,d,f=[{}];for(;u=Rk.exec(c.replace(Ok,""));)u[4]?f.shift():u[3]?(d=u[3].replace(np," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][u[1]]=u[2].replace(np," ").trim();return f[0]})(e);Lt[o]=fr(s?{["@keyframes "+o]:l}:l,r?"":"."+o)}let a=r&&Lt.g?Lt.g:null;return r&&(Lt.g=Lt[o]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(Lt[o],t,n,a),o},Ik=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let a=o(r),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":fr(a,""):a===!1?"":a}return n+s+(o??"")},"");function Oa(e){let t=this||{},r=e.call?e(t.p):e;return $k(r.unshift?r.raw?Ik(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,Ak(t.target),t.g,t.o,t.k)}let yy,Hc,Gc;Oa.bind({g:1});let Zt=Oa.bind({k:1});function Dk(e,t,r,n){fr.p=t,yy=e,Hc=r,Gc=n}function $r(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let a=Object.assign({},i),l=a.className||s.className;r.p=Object.assign({theme:Hc&&Hc()},a),r.o=/ *go\d+/.test(l),a.className=Oa.apply(r,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),Gc&&c[0]&&Gc(a),yy(c,a)}return s}}var Lk=e=>typeof e=="function",na=(e,t)=>Lk(e)?e(t):e,Mk=(()=>{let e=0;return()=>(++e).toString()})(),vy=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Vk=20,Sd="default",wy=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return wy(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},So=[],xy={toasts:[],pausedAt:void 0,settings:{toastLimit:Vk}},Nt={},by=(e,t=Sd)=>{Nt[t]=wy(Nt[t]||xy,e),So.forEach(([r,n])=>{r===t&&n(Nt[t])})},_y=e=>Object.keys(Nt).forEach(t=>by(e,t)),Bk=e=>Object.keys(Nt).find(t=>Nt[t].toasts.some(r=>r.id===e)),$a=(e=Sd)=>t=>{by(t,e)},Fk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Uk=(e={},t=Sd)=>{let[r,n]=_.useState(Nt[t]||xy),s=_.useRef(Nt[t]);_.useEffect(()=>(s.current!==Nt[t]&&n(Nt[t]),So.push([t,n]),()=>{let o=So.findIndex(([a])=>a===t);o>-1&&So.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var a,l,c;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((a=e[o.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Fk[o.type],style:{...e.style,...(c=e[o.type])==null?void 0:c.style,...o.style}}});return{...r,toasts:i}},zk=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Mk()}),Ti=e=>(t,r)=>{let n=zk(t,e,r);return $a(n.toasterId||Bk(n.id))({type:2,toast:n}),n.id},de=(e,t)=>Ti("blank")(e,t);de.error=Ti("error");de.success=Ti("success");de.loading=Ti("loading");de.custom=Ti("custom");de.dismiss=(e,t)=>{let r={type:3,toastId:e};t?$a(t)(r):_y(r)};de.dismissAll=e=>de.dismiss(void 0,e);de.remove=(e,t)=>{let r={type:4,toastId:e};t?$a(t)(r):_y(r)};de.removeAll=e=>de.remove(void 0,e);de.promise=(e,t,r)=>{let n=de.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?na(t.success,s):void 0;return i?de.success(i,{id:n,...r,...r==null?void 0:r.success}):de.dismiss(n),s}).catch(s=>{let i=t.error?na(t.error,s):void 0;i?de.error(i,{id:n,...r,...r==null?void 0:r.error}):de.dismiss(n)}),e};var Wk=1e3,qk=(e,t="default")=>{let{toasts:r,pausedAt:n}=Uk(e,t),s=_.useRef(new Map).current,i=_.useCallback((d,f=Wk)=>{if(s.has(d))return;let p=setTimeout(()=>{s.delete(d),o({type:4,toastId:d})},f);s.set(d,p)},[]);_.useEffect(()=>{if(n)return;let d=Date.now(),f=r.map(p=>{if(p.duration===1/0)return;let g=(p.duration||0)+p.pauseDuration-(d-p.createdAt);if(g<0){p.visible&&de.dismiss(p.id);return}return setTimeout(()=>de.dismiss(p.id,t),g)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[r,n,t]);let o=_.useCallback($a(t),[t]),a=_.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=_.useCallback((d,f)=>{o({type:1,toast:{id:d,height:f}})},[o]),c=_.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=_.useCallback((d,f)=>{let{reverseOrder:p=!1,gutter:g=8,defaultPosition:w}=f||{},b=r.filter(m=>(m.position||w)===(d.position||w)&&m.height),y=b.findIndex(m=>m.id===d.id),v=b.filter((m,x)=>x<y&&m.visible).length;return b.filter(m=>m.visible).slice(...p?[v+1]:[0,v]).reduce((m,x)=>m+(x.height||0)+g,0)},[r]);return _.useEffect(()=>{r.forEach(d=>{if(d.dismissed)i(d.id,d.removeDelay);else{let f=s.get(d.id);f&&(clearTimeout(f),s.delete(d.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},Hk=Zt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Gk=Zt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Kk=Zt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yk=$r("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Hk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Gk} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Kk} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Qk=Zt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Jk=$r("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Qk} 1s linear infinite;
`,Xk=Zt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Zk=Zt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ej=$r("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Zk} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,tj=$r("div")`
  position: absolute;
`,rj=$r("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,nj=Zt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sj=$r("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${nj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ij=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?_.createElement(sj,null,t):t:r==="blank"?null:_.createElement(rj,null,_.createElement(Jk,{...n}),r!=="loading"&&_.createElement(tj,null,r==="error"?_.createElement(Yk,{...n}):_.createElement(ej,{...n})))},oj=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,aj=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,lj="0%{opacity:0;} 100%{opacity:1;}",cj="0%{opacity:1;} 100%{opacity:0;}",uj=$r("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,dj=$r("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hj=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=vy()?[lj,cj]:[oj(r),aj(r)];return{animation:t?`${Zt(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Zt(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fj=_.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?hj(e.position||t||"top-center",e.visible):{opacity:0},i=_.createElement(ij,{toast:e}),o=_.createElement(dj,{...e.ariaProps},na(e.message,e));return _.createElement(uj,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):_.createElement(_.Fragment,null,i,o))});Dk(_.createElement);var pj=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=_.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return _.createElement("div",{ref:i,className:t,style:r},s)},mj=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:vy()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},gj=Oa`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ji=16,yj=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=qk(r,i);return _.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Ji,left:Ji,right:Ji,bottom:Ji,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),p=mj(d,f);return _.createElement(pj,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?gj:"",style:p},u.type==="custom"?na(u.message,u):s?s(u):_.createElement(fj,{toast:u,position:d}))}))},Hr=de;const vj=({category:e,onClick:t,disabled:r=!1,highContrast:n=!1})=>h.jsxs(T.button,{className:`
        relative p-8 rounded-3xl shadow-2xl min-h-[200px] w-full
        ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        ${n?"bg-black text-white border-4 border-yellow-400":"bg-white text-gray-800"}
        transition-all duration-300 overflow-hidden
      `,style:n?void 0:{backgroundColor:e.color},whileHover:r?void 0:{scale:1.05,y:-5},whileTap:r?void 0:{scale:.95},onClick:r?void 0:t,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[h.jsxs("div",{className:"absolute inset-0 opacity-10",children:[h.jsx("div",{className:"absolute top-4 right-4 text-6xl transform rotate-12",children:e.icon}),h.jsx("div",{className:"absolute bottom-4 left-4 text-4xl transform -rotate-12",children:e.icon})]}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full",children:[h.jsx(T.div,{className:"text-8xl mb-4",whileHover:{rotate:[0,-10,10,-10,0],scale:1.1},transition:{duration:.5},children:e.icon}),h.jsx("h3",{className:`text-3xl font-bold text-center ${n?"text-yellow-400":"text-white"}`,children:e.name}),r&&h.jsx("div",{className:"mt-2 text-lg font-medium text-gray-500",children:"Coming Soon!"})]}),!r&&h.jsx(T.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0",whileHover:{opacity:[0,.3,0],x:["-100%","100%"]},transition:{duration:.8}})]}),Ir=()=>{const[e,t]=_.useState(!1),[r,n]=_.useState(!1),[s,i]=_.useState([]);_.useEffect(()=>{t("speechSynthesis"in window);const c=()=>{const u=speechSynthesis.getVoices();i(u)};c(),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=c)},[]);const o=_.useCallback((c,u)=>{if(!e||!c)return;speechSynthesis.cancel();const d=new SpeechSynthesisUtterance(c);d.rate=(u==null?void 0:u.rate)||1.1,d.pitch=(u==null?void 0:u.pitch)||1.3,d.volume=(u==null?void 0:u.volume)||1;const f=["Google UK English Female","Google US English Female","Samantha","Karen","Victoria","Fiona","Amelie","Anna","Google ","Microsoft Zira Desktop","Microsoft David Desktop"];let p=null;for(const g of f)if(p=s.find(w=>w.name.includes(g))||null,p)break;p||(p=s.find(g=>g.lang.startsWith("en")&&(g.name.toLowerCase().includes("female")||g.name.toLowerCase().includes("woman")))||null),p||(p=s.find(g=>g.lang.startsWith("en"))||null),p&&(d.voice=p,console.log("Using voice:",p.name)),d.onstart=()=>n(!0),d.onend=()=>n(!1),d.onerror=g=>{console.error("Speech error:",g),n(!1)},speechSynthesis.speak(d)},[e,s]),a=_.useCallback(()=>{speechSynthesis.cancel(),n(!1)},[]),l=_.useCallback(()=>s.filter(c=>c.lang.startsWith("en")),[s]);return{speak:o,stop:a,isSpeaking:r,isSupported:e,getAvailableVoices:l}},sp=({question:e,onAnswer:t,difficulty:r,soundEnabled:n,highContrast:s})=>{const{speak:i}=Ir(),[o,a]=_.useState(null),[l,c]=_.useState(!1),[u,d]=_.useState(r==="advanced"?30:0),[f,p]=_.useState(!1),g=Gt.useRef(null);_.useEffect(()=>{if(p(!1),n)if(e.audio&&g.current){const y=setTimeout(()=>{var v;(v=g.current)==null||v.play()},500);return()=>clearTimeout(y)}else{const y=setTimeout(()=>{i(e.narration)},500);return()=>clearTimeout(y)}},[e,n,i]),_.useEffect(()=>{if(r==="advanced"&&u>0){const y=setTimeout(()=>{d(u-1)},1e3);return()=>clearTimeout(y)}else r==="advanced"&&u===0&&!o&&w("",!1)},[u,r,o]);const w=(y,v)=>{a(y),c(!0),n&&i(v?`Great job! That's a ${e.correctAnswer}!`:"Oops! Let's try again!"),setTimeout(()=>{t(v,y),a(null),c(!1),d(r==="advanced"?30:0)},2e3)},b={hover:{scale:1.05,y:-2},tap:{scale:.95},correct:{scale:1.1,backgroundColor:"#4ECDC4",transition:{duration:.3}},incorrect:{scale:.95,backgroundColor:"#FF6B6B",transition:{duration:.3}}};return h.jsxs(T.div,{className:`max-w-4xl mx-auto p-8 rounded-3xl shadow-2xl ${s?"bg-black text-white border-4 border-yellow-400":"bg-gradient-to-br from-purple-400 via-pink-400 to-red-400"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r==="advanced"&&h.jsx("div",{className:"mb-4 text-center",children:h.jsxs("div",{className:`text-2xl font-bold ${u<=5?"text-red-500 animate-pulse":"text-white"}`,children:[" ",u,"s"]})}),e.audio&&h.jsxs("div",{className:"mb-6 text-center",children:[h.jsx("audio",{ref:g,src:e.audio,onEnded:()=>p(!0),onError:()=>console.error("Audio failed to load:",e.audio)}),h.jsxs(T.button,{onClick:()=>{var y;return(y=g.current)==null?void 0:y.play()},className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all shadow-lg ${s?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-white/90 text-purple-600 hover:bg-white"}`,whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},children:[" ",f?"Play Sound Again":"Listen to Sound"]})]}),h.jsx(T.h2,{className:`text-4xl font-bold text-center mb-8 ${s?"text-yellow-400":"text-white"}`,initial:{scale:.8},animate:{scale:1},transition:{delay:.2},children:e.question}),e.image&&h.jsx(T.div,{className:"flex justify-center mb-8",initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring",stiffness:200},children:h.jsx("img",{src:e.image,alt:"Quiz question",className:`w-80 h-80 object-cover rounded-3xl shadow-lg ${s?"border-4 border-yellow-400":""}`})}),h.jsx("div",{className:"grid grid-cols-2 gap-6",children:e.options.map((y,v)=>{const m=y===e.correctAnswer,x=o===y;return h.jsx(T.button,{className:`
                p-6 text-2xl font-bold rounded-2xl shadow-lg min-h-[100px]
                ${s?"bg-white text-black border-4 border-yellow-400 hover:bg-yellow-100":"bg-white text-gray-800 hover:bg-gray-100"}
                ${x&&m?"bg-green-400 text-white":""}
                ${x&&!m?"bg-red-400 text-white":""}
                disabled:cursor-not-allowed
                transition-all duration-300
              `,variants:b,whileHover:l?void 0:"hover",whileTap:l?void 0:"tap",animate:x?m?"correct":"incorrect":{opacity:1,y:0},initial:{opacity:0,y:20},transition:{delay:.6+v*.1},onClick:()=>!l&&w(y,m),disabled:l,"aria-label":`Option ${v+1}: ${y}`,children:h.jsxs("div",{className:"flex items-center justify-center gap-3",children:[h.jsx("span",{className:"text-3xl",children:String.fromCharCode(65+v)}),h.jsx("span",{children:y})]})},y)})}),h.jsx(tt,{children:l&&h.jsx(T.div,{className:"fixed inset-0 flex items-center justify-center pointer-events-none z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o===e.correctAnswer?h.jsx(T.div,{className:"text-8xl",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:""}):h.jsx(T.div,{className:"text-8xl",initial:{scale:0},animate:{scale:[1,1.2,1]},transition:{duration:.5},children:""})})})]})},wj=({question:e,adventure:t,chapter:r,onAnswer:n,difficulty:s,soundEnabled:i,highContrast:o,questionNumber:a,totalQuestions:l})=>{const{speak:c}=Ir(),[u,d]=_.useState(null),[f,p]=_.useState(!1),[g,w]=_.useState(s==="advanced"?30:0),[b,y]=_.useState(!1);_.useEffect(()=>{if(i){const k=setTimeout(()=>{const j=v();c(j)},500);return()=>clearTimeout(k)}},[e,i,c]),_.useEffect(()=>{if(s==="advanced"&&g>0){const k=setTimeout(()=>{w(g-1)},1e3);return()=>clearTimeout(k)}else s==="advanced"&&g===0&&!u&&S("",!1)},[g,s,u]);const v=()=>{const k=e.narration;return`${m()} ${k}`},m=()=>{switch(r.id){case"jungle_expedition":return"Deep in the jungle, we've discovered something amazing!";case"savanna_quest":return"Under the vast African sky, what do you see roaming the plains?";case"ocean_depths":return"Swimming through the crystal waters, we encounter...";case"orchard_awakening":return"In the magical orchard, which delicious fruit has appeared?";case"berry_patch_mystery":return"The mystery deepens! What fruit are we investigating?";case"harvest_festival":return"At the grand celebration, which fruit should we celebrate?";case"planet_discovery":return"On this alien world, we discover a fascinating shape!";case"constellation_creation":return"Among the stars, which shape shall we connect?";case"galaxy_architect":return"To build our galaxy, we need to identify this shape!";case"color_kingdom":return"To restore the kingdom's beauty, what color do we need?";case"prism_palace":return"The magical prisms are showing us this beautiful color!";case"rainbow_celebration":return"For our rainbow festival, which vibrant color do we see?";case"whispering_woods":return"Listen carefully to the forest's gentle sounds...";case"echo_caverns":return"The cavern echoes reveal this mysterious sound!";case"symphony_summit":return"At the mountain's peak, we hear this majestic sound!";default:return"On our adventure, we discover..."}},x=k=>{const j=t.character;if(k){const E=j.celebration;return E[Math.floor(Math.random()*E.length)]}else{const E=j.comfort;return E[Math.floor(Math.random()*E.length)]}},S=(k,j)=>{d(k),p(!0),y(!0);const E=x(j);i&&c(j?`${E} That's a ${e.correctAnswer}!`:E),setTimeout(()=>{n(j,k),d(null),p(!1),y(!1),w(s==="advanced"?30:0)},3e3)};return h.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-6",style:{backgroundImage:`url(${r.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[h.jsx("div",{className:`absolute inset-0 ${o?"bg-black/80":"bg-gradient-to-br from-purple-900/70 via-pink-900/70 to-blue-900/70"}`}),h.jsx(T.div,{className:"absolute top-8 right-8 z-20",animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,repeatType:"reverse"},children:h.jsx("div",{className:"text-8xl",children:t.character.avatar})}),h.jsx(tt,{children:b&&h.jsxs(T.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:`absolute top-32 right-8 z-20 p-4 rounded-3xl max-w-xs ${o?"bg-black border-2 border-yellow-400":"bg-white/90 backdrop-blur-sm"}`,children:[h.jsxs("div",{className:`font-bold text-lg ${o?"text-yellow-400":"text-purple-600"}`,children:[t.character.name,":"]}),h.jsx("div",{className:`${o?"text-white":"text-gray-800"}`,children:x(u===e.correctAnswer)})]})}),h.jsxs(T.div,{className:`relative z-10 max-w-4xl mx-auto p-8 rounded-3xl shadow-2xl ${o?"bg-black/90 text-white border-4 border-yellow-400":"bg-white/10 backdrop-blur-lg border-2 border-white/20"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsxs("div",{className:`text-lg font-bold ${o?"text-yellow-400":"text-white"}`,children:[r.title,"  Question ",a," of ",l]}),s==="advanced"&&h.jsxs("div",{className:`text-xl font-bold mt-2 ${g<=5?"text-red-500 animate-pulse":"text-white"}`,children:[" ",g,"s"]})]}),h.jsx(T.div,{className:`text-center mb-6 p-4 rounded-2xl ${o?"bg-gray-800 border-2 border-yellow-400":"bg-white/10 backdrop-blur-sm"}`,initial:{scale:.8},animate:{scale:1},transition:{delay:.2},children:h.jsx("div",{className:`text-lg italic ${o?"text-white":"text-white/90"}`,children:m()})}),h.jsx(T.h2,{className:`text-4xl font-bold text-center mb-8 ${o?"text-yellow-400":"text-white"}`,initial:{scale:.8},animate:{scale:1},transition:{delay:.4},children:e.question}),e.image&&h.jsx(T.div,{className:"flex justify-center mb-8",initial:{scale:0},animate:{scale:1},transition:{delay:.6,type:"spring",stiffness:200},children:h.jsx("img",{src:e.image,alt:"Quiz question",className:`w-80 h-80 object-cover rounded-3xl shadow-lg ${o?"border-4 border-yellow-400":"border-4 border-white/20"}`})}),h.jsx("div",{className:"grid grid-cols-2 gap-6",children:e.options.map((k,j)=>{const E=k===e.correctAnswer,N=u===k;return h.jsx(T.button,{className:`
                  p-6 text-2xl font-bold rounded-2xl shadow-lg min-h-[100px]
                  ${o?"bg-white text-black border-4 border-yellow-400 hover:bg-yellow-100":"bg-white/20 text-white hover:bg-white/30 border-2 border-white/30"}
                  ${N&&E?"bg-green-400 text-white border-green-400":""}
                  ${N&&!E?"bg-red-400 text-white border-red-400":""}
                  disabled:cursor-not-allowed
                  transition-all duration-300
                `,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8+j*.1},onClick:()=>!f&&S(k,E),disabled:f,whileHover:f?void 0:{scale:1.05,y:-2},whileTap:f?void 0:{scale:.95},children:h.jsxs("div",{className:"flex items-center justify-center gap-3",children:[h.jsx("span",{className:"text-3xl",children:String.fromCharCode(65+j)}),h.jsx("span",{children:k})]})},k)})}),h.jsxs("div",{className:"mt-8 text-center",children:[h.jsxs("div",{className:`text-sm ${o?"text-gray-400":"text-white/70"}`,children:["Chapter Progress: ",a,"/",r.questionsNeeded," questions"]}),h.jsx("div",{className:`w-full h-2 mt-2 rounded-full overflow-hidden ${o?"bg-gray-700":"bg-white/20"}`,children:h.jsx(T.div,{className:`h-full ${o?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${a/r.questionsNeeded*100}%`},transition:{duration:.5}})})]})]}),Array.from({length:12}).map((k,j)=>h.jsx(T.div,{className:"absolute text-2xl opacity-60",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],x:[0,Math.sin(j)*20,0],opacity:[.6,1,.6],scale:[1,1.2,1]},transition:{duration:4+Math.random()*2,repeat:1/0,delay:j*.5},children:["","","",""][j%4]},j)),h.jsx(tt,{children:f&&h.jsx(T.div,{className:"fixed inset-0 flex items-center justify-center pointer-events-none z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u===e.correctAnswer?h.jsx(T.div,{className:"text-8xl",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:""}):h.jsx(T.div,{className:"text-8xl",initial:{scale:0},animate:{scale:[1,1.2,1]},transition:{duration:.5},children:""})})})]})},xj=({progress:e,highContrast:t=!1})=>{const r=10-e.stars%10,n=50-e.stars%50;return h.jsxs("div",{className:`p-6 rounded-2xl ${t?"bg-black border-4 border-yellow-400":"bg-gradient-to-r from-purple-500 to-pink-500"} shadow-lg`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:`text-2xl font-bold ${t?"text-yellow-400":"text-white"}`,children:"Your Progress"}),h.jsxs("div",{className:`text-lg ${t?"text-white":"text-white/80"}`,children:["Level ",e.level]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("span",{className:"text-xl font-bold text-white",children:[e.stars," Stars"]})]}),h.jsxs("div",{className:"flex flex-wrap gap-1",children:[Array.from({length:Math.min(e.stars,20)}).map((s,i)=>h.jsx(T.span,{className:"text-2xl",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:i*.1,type:"spring"},children:""},i)),e.stars>20&&h.jsxs("span",{className:`text-lg ${t?"text-yellow-400":"text-white"}`,children:["+",e.stars-20," more!"]})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("span",{className:"text-xl font-bold text-white",children:[e.badges," Badges"]}),r>0&&h.jsxs("span",{className:`text-sm ${t?"text-yellow-400":"text-white/80"}`,children:["(",r," stars to next!)"]})]}),h.jsxs("div",{className:"flex gap-1",children:[Array.from({length:Math.min(e.badges,10)}).map((s,i)=>h.jsx(T.span,{className:"text-2xl",initial:{scale:0},animate:{scale:1},transition:{delay:i*.2,type:"spring"},children:""},i)),e.badges>10&&h.jsxs("span",{className:`text-lg ${t?"text-yellow-400":"text-white"}`,children:["+",e.badges-10]})]})]}),e.totalQuestions>0&&h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("span",{className:"text-xl font-bold text-white",children:[Math.round(e.totalCorrect/e.totalQuestions*100),"% Accuracy"]})]}),h.jsx("div",{className:`h-4 rounded-full ${t?"bg-gray-700":"bg-white/20"} overflow-hidden`,children:h.jsx(T.div,{className:`h-full ${t?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${e.totalCorrect/e.totalQuestions*100}%`},transition:{duration:1,delay:.5}})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("span",{className:"text-lg text-white",children:[n," stars to Level ",e.level+1]})]}),h.jsx("div",{className:`h-3 rounded-full ${t?"bg-gray-700":"bg-white/20"} overflow-hidden`,children:h.jsx(T.div,{className:`h-full ${t?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${e.stars%50/50*100}%`},transition:{duration:1,delay:.8}})})]})]})},Xi=[{id:"animal_1",category:"animals",question:"What is this animal?",image:"https://images.pexels.com/photos/792381/pexels-photo-792381.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Lion","Tiger","Bear","Wolf"],correctAnswer:"Lion",narration:"What is this animal? Is it a Lion, Tiger, Bear, or Wolf?"},{id:"animal_2",category:"animals",question:"What is this animal?",image:"https://images.pexels.com/photos/213399/pexels-photo-213399.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Horse","Elephant","Rhino","Hippo"],correctAnswer:"Elephant",narration:"What is this animal? Is it a Horse, Elephant, Rhino, or Hippo?"},{id:"animal_3",category:"animals",question:"What is this animal?",image:"https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Cat","Dog","Rabbit","Hamster"],correctAnswer:"Dog",narration:"What is this animal? Is it a Cat, Dog, Rabbit, or Hamster?"},{id:"animal_4",category:"animals",question:"What is this animal?",image:"https://images.pexels.com/photos/45201/kitty-cat-kitten-pet-45201.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Dog","Cat","Mouse","Rat"],correctAnswer:"Cat",narration:"What is this animal? Is it a Dog, Cat, Mouse, or Rat?"},{id:"animal_5",category:"animals",question:"What is this animal?",image:"https://images.pexels.com/photos/750988/pexels-photo-750988.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Zebra","Horse","Giraffe","Deer"],correctAnswer:"Giraffe",narration:"What is this animal? Is it a Zebra, Horse, Giraffe, or Deer?"},{id:"fruit_1",category:"fruits",question:"What is this fruit?",image:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Orange","Apple","Peach","Tomato"],correctAnswer:"Apple",narration:"What is this fruit? Is it an Orange, Apple, Peach, or Tomato?"},{id:"fruit_2",category:"fruits",question:"What is this fruit?",image:"https://images.pexels.com/photos/61127/pexels-photo-61127.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Apple","Banana","Lemon","Corn"],correctAnswer:"Banana",narration:"What is this fruit? Is it an Apple, Banana, Lemon, or Corn?"},{id:"fruit_3",category:"fruits",question:"What is this fruit?",image:"https://images.pexels.com/photos/161559/background-bitter-breakfast-bright-161559.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Apple","Lemon","Orange","Peach"],correctAnswer:"Orange",narration:"What is this fruit? Is it an Apple, Lemon, Orange, or Peach?"},{id:"fruit_4",category:"fruits",question:"What is this fruit?",image:"https://images.pexels.com/photos/89778/strawberry-red-fruit-sweet-89778.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Cherry","Strawberry","Raspberry","Tomato"],correctAnswer:"Strawberry",narration:"What is this fruit? Is it a Cherry, Strawberry, Raspberry, or Tomato?"},{id:"fruit_5",category:"fruits",question:"What is this fruit?",image:"https://images.pexels.com/photos/197907/pexels-photo-197907.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Blueberry","Grape","Plum","Olive"],correctAnswer:"Grape",narration:"What is this fruit? Is it a Blueberry, Grape, Plum, or Olive?"},{id:"shape_1",category:"shapes",question:"What shape is this?",image:"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Square","Circle","Triangle","Rectangle"],correctAnswer:"Circle",narration:"What shape is this? Is it a Square, Circle, Triangle, or Rectangle?"},{id:"shape_2",category:"shapes",question:"What shape is this?",image:"https://images.pexels.com/photos/1029604/pexels-photo-1029604.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Circle","Square","Triangle","Star"],correctAnswer:"Square",narration:"What shape is this? Is it a Circle, Square, Triangle, or Star?"},{id:"shape_3",category:"shapes",question:"What shape is this?",image:"https://images.pexels.com/photos/1029624/pexels-photo-1029624.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Square","Circle","Triangle","Diamond"],correctAnswer:"Triangle",narration:"What shape is this? Is it a Square, Circle, Triangle, or Diamond?"},{id:"shape_4",category:"shapes",question:"What shape is this?",image:"https://images.pexels.com/photos/1029641/pexels-photo-1029641.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Square","Rectangle","Triangle","Circle"],correctAnswer:"Rectangle",narration:"What shape is this? Is it a Square, Rectangle, Triangle, or Circle?"},{id:"shape_5",category:"shapes",question:"What shape is this?",image:"https://images.pexels.com/photos/1029898/pexels-photo-1029898.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Circle","Square","Star","Heart"],correctAnswer:"Star",narration:"What shape is this? Is it a Circle, Square, Star, or Heart?"},{id:"color_1",category:"colors",question:"What color is this?",image:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Yellow","Red","Green","Blue"],correctAnswer:"Red",narration:"What color is this? Is it Yellow, Red, Green, or Blue?"},{id:"color_2",category:"colors",question:"What color is this?",image:"https://images.pexels.com/photos/61127/pexels-photo-61127.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Red","Yellow","Green","Purple"],correctAnswer:"Yellow",narration:"What color is this? Is it Red, Yellow, Green, or Purple?"},{id:"color_3",category:"colors",question:"What color is this?",image:"https://images.pexels.com/photos/268533/pexels-photo-268533.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Red","Yellow","Blue","Green"],correctAnswer:"Blue",narration:"What color is this? Is it Red, Yellow, Blue, or Green?"},{id:"color_4",category:"colors",question:"What color is this?",image:"https://images.pexels.com/photos/1072179/pexels-photo-1072179.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Blue","Red","Green","Yellow"],correctAnswer:"Green",narration:"What color is this? Is it Blue, Red, Green, or Yellow?"},{id:"color_5",category:"colors",question:"What color is this?",image:"https://images.pexels.com/photos/161559/background-bitter-breakfast-bright-161559.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Yellow","Orange","Red","Pink"],correctAnswer:"Orange",narration:"What color is this? Is it Yellow, Orange, Red, or Pink?"},{id:"sound_1",category:"sounds",question:"What animal makes this sound?",audio:"/sounds/lion-roar.mp3",image:"https://images.pexels.com/photos/792381/pexels-photo-792381.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Lion","Tiger","Bear","Wolf"],correctAnswer:"Lion",narration:"Listen carefully. What animal makes this roaring sound?"},{id:"sound_2",category:"sounds",question:"What animal makes this sound?",audio:"/sounds/dog-bark.mp3",image:"https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Cat","Dog","Sheep","Cow"],correctAnswer:"Dog",narration:"Listen to this sound. Which animal barks like this?"},{id:"sound_3",category:"sounds",question:"What animal makes this sound?",audio:"/sounds/cat-meow.mp3",image:"https://images.pexels.com/photos/45201/kitty-cat-kitten-pet-45201.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Dog","Cat","Bird","Mouse"],correctAnswer:"Cat",narration:"What animal makes this meowing sound?"},{id:"sound_4",category:"sounds",question:"What animal makes this sound?",audio:"/sounds/cow-moo.mp3",image:"https://images.pexels.com/photos/422218/pexels-photo-422218.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Horse","Cow","Sheep","Pig"],correctAnswer:"Cow",narration:"Listen! What farm animal makes this mooing sound?"},{id:"sound_5",category:"sounds",question:"What animal makes this sound?",audio:"/sounds/bird-chirp.mp3",image:"https://images.pexels.com/photos/349758/hummingbird-bird-birds-349758.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Cat","Dog","Bird","Frog"],correctAnswer:"Bird",narration:"What makes this chirping sound?"},{id:"sound_6",category:"sounds",question:"What makes this sound?",audio:"/sounds/car-horn.mp3",image:"https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Car","Train","Boat","Airplane"],correctAnswer:"Car",narration:"Listen to this beep! What vehicle makes this honking sound?"},{id:"sound_7",category:"sounds",question:"What makes this sound?",audio:"/sounds/train-whistle.mp3",image:"https://images.pexels.com/photos/2351883/pexels-photo-2351883.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Car","Train","Truck","Bus"],correctAnswer:"Train",narration:"Choo choo! What makes this whistle sound?"},{id:"sound_8",category:"sounds",question:"What makes this sound?",audio:"/sounds/airplane-engine.mp3",image:"https://images.pexels.com/photos/46148/aircraft-jet-landing-cloud-46148.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Helicopter","Airplane","Rocket","Drone"],correctAnswer:"Airplane",narration:"Listen to this engine! What flies and makes this sound?"},{id:"sound_9",category:"sounds",question:"What makes this sound?",audio:"/sounds/boat-horn.mp3",image:"https://images.pexels.com/photos/163236/luxury-yacht-boat-speed-water-163236.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Car","Train","Boat","Truck"],correctAnswer:"Boat",narration:"What makes this deep horn sound on the water?"},{id:"sound_10",category:"sounds",question:"What makes this sound?",audio:"/sounds/siren.mp3",image:"https://images.pexels.com/photos/1346155/pexels-photo-1346155.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Police Car","Regular Car","Bicycle","Motorcycle"],correctAnswer:"Police Car",narration:"Listen! What emergency vehicle makes this siren sound?"},{id:"sound_11",category:"sounds",question:"What makes this sound?",audio:"/sounds/rain.mp3",image:"https://images.pexels.com/photos/459451/pexels-photo-459451.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Wind","Rain","Ocean","River"],correctAnswer:"Rain",narration:"Listen to this pitter-patter sound. What is it?"},{id:"sound_12",category:"sounds",question:"What makes this sound?",audio:"/sounds/thunder.mp3",image:"https://images.pexels.com/photos/1112048/pexels-photo-1112048.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Thunder","Drum","Fireworks","Explosion"],correctAnswer:"Thunder",narration:"Boom! What makes this loud rumbling sound in the sky?"},{id:"sound_13",category:"sounds",question:"What makes this sound?",audio:"/sounds/ocean-waves.mp3",image:"https://images.pexels.com/photos/1001682/pexels-photo-1001682.jpeg?auto=compress&cs=tinysrgb&w=400",options:["River","Ocean","Waterfall","Fountain"],correctAnswer:"Ocean",narration:"Listen to these waves! What body of water makes this sound?"},{id:"sound_14",category:"sounds",question:"What makes this sound?",audio:"/sounds/wind.mp3",image:"https://images.pexels.com/photos/414837/pexels-photo-414837.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Wind","Fan","Whistle","Flute"],correctAnswer:"Wind",narration:"Whoosh! What makes this blowing sound in nature?"},{id:"sound_15",category:"sounds",question:"What makes this sound?",audio:"/sounds/bell.mp3",image:"https://images.pexels.com/photos/2072039/pexels-photo-2072039.jpeg?auto=compress&cs=tinysrgb&w=400",options:["Bell","Drum","Piano","Guitar"],correctAnswer:"Bell",narration:"Ding dong! What makes this ringing sound?"}],pi=[{id:"animals",name:"Animals",icon:"",color:"#FF6B6B"},{id:"fruits",name:"Fruits",icon:"",color:"#4ECDC4"},{id:"shapes",name:"Shapes",icon:"",color:"#45B7D1"},{id:"colors",name:"Colors",icon:"",color:"#96CEB4"},{id:"sounds",name:"Sounds",icon:"",color:"#FFEAA7"}];class bj{constructor(){mn(this,"learningPatterns",new Map);mn(this,"performanceHistory",new Map);mn(this,"mistakePatterns",new Map);this.loadStoredData()}loadStoredData(){try{const t=localStorage.getItem("learning_patterns"),r=localStorage.getItem("performance_history"),n=localStorage.getItem("mistake_patterns");t&&(this.learningPatterns=new Map(JSON.parse(t))),r&&(this.performanceHistory=new Map(JSON.parse(r))),n&&(this.mistakePatterns=new Map(JSON.parse(n)))}catch(t){console.warn("Failed to load adaptive learning data:",t)}}saveData(){try{localStorage.setItem("learning_patterns",JSON.stringify([...this.learningPatterns])),localStorage.setItem("performance_history",JSON.stringify([...this.performanceHistory])),localStorage.setItem("mistake_patterns",JSON.stringify([...this.mistakePatterns]))}catch(t){console.warn("Failed to save adaptive learning data:",t)}}analyzePerformance(t,r){const n=r.questions.filter(d=>d.correct).length,s=r.questions.length,i=s>0?n/s:0,o=r.questions.reduce((d,f)=>d+f.timeSpent,0)/s,a=(r.sessionEnd.getTime()-r.sessionStart.getTime())/1e3/60;let l=0;for(let d=r.questions.length-1;d>=0&&r.questions[d].correct;d--)l++;const c={accuracy:i,averageResponseTime:o,streakLength:l,sessionDuration:a,questionsAttempted:s,categoriesExplored:[r.category],improvementRate:this.calculateImprovementRate(t,r.category,i),consistencyScore:this.calculateConsistencyScore(t)},u=this.performanceHistory.get(t)||[];return u.push(c),this.performanceHistory.set(t,u.slice(-20)),this.saveData(),c}calculateImprovementRate(t,r,n){const i=(this.performanceHistory.get(t)||[]).filter(a=>a.categoriesExplored.includes(r));if(i.length<2)return 0;const o=i[i.length-2].accuracy;return n-o}calculateConsistencyScore(t){const r=this.performanceHistory.get(t)||[];if(r.length<3)return .5;const n=r.slice(-5).map(i=>i.accuracy),s=this.calculateVariance(n);return Math.max(0,Math.min(1,1-s))}calculateVariance(t){const r=t.reduce((s,i)=>s+i,0)/t.length;return t.map(s=>Math.pow(s-r,2)).reduce((s,i)=>s+i,0)/t.length}generateRecommendations(t,r){const n=[],s=this.learningPatterns.get(t);r.accuracy>.9&&r.averageResponseTime<3?n.push({type:"difficulty",priority:"high",reason:"High accuracy with fast response times indicates readiness for more challenge",action:"Increase difficulty level",estimatedImpact:.8,confidence:.9}):r.accuracy<.4&&n.push({type:"difficulty",priority:"high",reason:"Low accuracy suggests current difficulty is too high",action:"Decrease difficulty level",estimatedImpact:.7,confidence:.85}),r.sessionDuration>((s==null?void 0:s.attentionSpan)||15)&&n.push({type:"break",priority:"medium",reason:"Session duration exceeds optimal attention span",action:"Suggest a short break",estimatedImpact:.6,confidence:.75});const o=(this.mistakePatterns.get(t)||[]).filter(a=>a.commonErrors.some(l=>l.frequency>3)).map(a=>a.category);return o.length>0&&n.push({type:"review",priority:"medium",reason:`Identified weakness in ${o.join(", ")}`,action:`Focus on ${o[0]} category`,estimatedImpact:.7,confidence:.8,category:o[0]}),n.sort((a,l)=>{const c={high:3,medium:2,low:1};return c[l.priority]-c[a.priority]})}updateLearningPattern(t,r){const n=this.learningPatterns.get(t)||this.createDefaultPattern(t);r.performance.accuracy>.8?(n.strengths.includes(r.category)||n.strengths.push(r.category),n.weaknesses=n.weaknesses.filter(s=>s!==r.category)):r.performance.accuracy<.5&&(n.weaknesses.includes(r.category)||n.weaknesses.push(r.category)),r.performance.averageResponseTime<2?n.learningSpeed="fast":r.performance.averageResponseTime>5?n.learningSpeed="slow":n.learningSpeed="medium",n.bestTimeOfDay=r.timeOfDay,this.updateMistakePatterns(t,r.category,r.mistakes),this.learningPatterns.set(t,n),this.saveData()}createDefaultPattern(t){return{userId:t,category:"",strengths:[],weaknesses:[],optimalDifficulty:.5,learningSpeed:"medium",attentionSpan:15,bestTimeOfDay:"afternoon",preferredFeedbackStyle:"immediate",motivationTriggers:["celebration","progress","achievement"]}}updateMistakePatterns(t,r,n){const s=this.mistakePatterns.get(t)||[];let i=s.find(o=>o.category===r);i||(i={category:r,commonErrors:[],recommendedPractice:{focusAreas:[],suggestedExercises:[],targetRepetitions:3}},s.push(i)),n.forEach(o=>{const a=`${o.correctAnswer}_confused_with_${o.selectedAnswer}`,l=i.commonErrors.find(c=>c.errorType===a);l?(l.frequency++,l.lastOccurrence=new Date):i.commonErrors.push({errorType:a,frequency:1,lastOccurrence:new Date,relatedConcepts:[o.correctAnswer,o.selectedAnswer]})}),this.mistakePatterns.set(t,s)}getDynamicDifficulty(t,r){var c;const n=this.learningPatterns.get(t),s=((c=this.performanceHistory.get(t))==null?void 0:c.slice(-3))||[];if(!n||s.length===0)return .5;const i=s.filter(u=>u.categoriesExplored.includes(r));if(i.length===0)return n.optimalDifficulty;const o=i.reduce((u,d)=>u+d.accuracy,0)/i.length,a=i.reduce((u,d)=>u+d.averageResponseTime,0)/i.length;let l=n.optimalDifficulty;return o>.85&&a<3?l=Math.min(1,l+.1):o<.5&&(l=Math.max(.1,l-.1)),n.optimalDifficulty=l,this.learningPatterns.set(t,n),l}getPersonalizedEncouragement(t,r){if(!this.learningPatterns.get(t))return"Great job! Keep learning!";const s={high_accuracy:["Wow! You're really mastering this!","Excellent work! Your understanding is growing!","Amazing! You're becoming an expert!"],improving:["I can see you're getting better!","Great progress! Keep it up!","You're learning so well!"],struggling:["That's okay! Learning takes practice!","Every expert was once a beginner!","You're doing great by trying!"],consistent:["I love your consistency!","Your steady effort is paying off!","You're building great learning habits!"]};return r.accuracy>.8?s.high_accuracy[Math.floor(Math.random()*s.high_accuracy.length)]:r.improvementRate>.1?s.improving[Math.floor(Math.random()*s.improving.length)]:r.consistencyScore>.7?s.consistent[Math.floor(Math.random()*s.consistent.length)]:s.struggling[Math.floor(Math.random()*s.struggling.length)]}}const Cs=new bj;/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),ip=e=>{const t=Sj(e);return t.charAt(0).toUpperCase()+t.slice(1)},Sy=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),kj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>_.createElement("svg",{ref:l,...jj,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Sy("lucide",s),...!i&&!kj(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>_.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(e,t)=>{const r=_.forwardRef(({className:n,...s},i)=>_.createElement(Ej,{ref:i,iconNode:t,className:Sy(`lucide-${_j(ip(e))}`,`lucide-${e}`,n),...s}));return r.displayName=ip(e),r};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Pj=jt("award",Tj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],op=jt("brain",Cj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Aj=jt("calendar",Nj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oj=jt("clock",Rj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ij=jt("log-out",$j);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ky=jt("star",Dj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],kd=jt("target",Lj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Vj=jt("trending-down",Mj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fj=jt("trending-up",Bj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],jy=jt("trophy",Uj);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wj=jt("user",zj),qj=({userId:e,userName:t,highContrast:r,onClose:n,onApplyRecommendation:s})=>{const[i,o]=_.useState(.5),[a,l]=_.useState(!1),[c,u]=_.useState(null),[d,f]=_.useState([]),[p,g]=_.useState([]);_.useEffect(()=>{w()},[e]);const w=()=>{var m;try{const x=localStorage.getItem("performance_history");if(x){const k=((m=JSON.parse(x).find(U=>U[0]===e))==null?void 0:m[1])||[],j=k.length,E=k.reduce((U,J)=>U+J.accuracy,0)/j||0,N=k.reduce((U,J)=>U+J.averageResponseTime,0)/j||0,I=k.reduce((U,J)=>U+J.questionsAttempted,0),Q=pi.map(U=>{const J=k.filter(ye=>ye.categoriesExplored.includes(U.id)),q=J.reduce((ye,C)=>ye+C.accuracy,0)/J.length||0;return{category:U.name,id:U.id,accuracy:q,sessions:J.length,improvement:J.length>1?J[J.length-1].accuracy-J[0].accuracy:0}});u({totalSessions:j,avgAccuracy:E,avgResponseTime:N,totalQuestions:I,categoryStats:Q,recentPerformance:k.slice(-7)});const te=k[k.length-1];if(te){const U=Cs.generateRecommendations(e,te);f(U)}const ge=b(Q);g(ge)}}catch(x){console.error("Error loading analytics:",x)}},b=m=>m.map(S=>({...S,priority:y(S)})).sort((S,k)=>k.priority-S.priority).slice(0,3).map((S,k)=>({step:k+1,category:S.category,categoryId:S.id,reason:S.accuracy<.5?"Needs improvement":S.accuracy<.7?"Building skills":"Ready for advanced",estimatedTime:Math.ceil((1-S.accuracy)*30),priority:S.priority})),y=m=>{let x=0;return m.accuracy<.5?x+=50:m.accuracy<.7&&(x+=30),m.improvement>0&&(x+=20),m.accuracy>.9&&(x-=30),x},v=(m,x)=>{if(!c)return null;const S=c.categoryStats.find(I=>I.id===m);if(!S)return null;const k=S.accuracy,j=(.5-x)*.3,E=S.improvement*.2,N=Math.max(0,Math.min(1,k+j+E));return{predictedAccuracy:Math.round(N*100),confidence:S.sessions>5?"High":S.sessions>2?"Medium":"Low",estimatedQuestions:10,estimatedCorrect:Math.round(N*10)}};return c?h.jsx("div",{className:`min-h-screen p-6 ${r?"bg-black text-white":"bg-gray-50"}`,children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:`text-4xl font-bold mb-2 ${r?"text-yellow-400":"text-gray-800"}`,children:" Learning Analytics Dashboard"}),h.jsxs("p",{className:`text-lg ${r?"text-white":"text-gray-600"}`,children:[t,"'s Learning Journey"]})]}),h.jsx("button",{onClick:n,className:`px-6 py-3 rounded-xl font-bold transition-all ${r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-blue-500 text-white hover:bg-blue-600"}`,children:" Back"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(Pj,{className:r?"text-yellow-400":"text-blue-500",size:24}),h.jsx("div",{className:`text-sm font-medium ${r?"text-gray-400":"text-gray-600"}`,children:"Overall Accuracy"})]}),h.jsxs("div",{className:`text-3xl font-bold ${r?"text-yellow-400":"text-gray-800"}`,children:[Math.round(c.avgAccuracy*100),"%"]}),h.jsxs("div",{className:"text-xs mt-2 text-gray-500",children:["Across ",c.totalSessions," sessions"]})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(Oj,{className:r?"text-yellow-400":"text-green-500",size:24}),h.jsx("div",{className:`text-sm font-medium ${r?"text-gray-400":"text-gray-600"}`,children:"Avg Response Time"})]}),h.jsxs("div",{className:`text-3xl font-bold ${r?"text-yellow-400":"text-gray-800"}`,children:[c.avgResponseTime.toFixed(1),"s"]}),h.jsx("div",{className:"text-xs mt-2 text-gray-500",children:"Per question"})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(kd,{className:r?"text-yellow-400":"text-purple-500",size:24}),h.jsx("div",{className:`text-sm font-medium ${r?"text-gray-400":"text-gray-600"}`,children:"Total Questions"})]}),h.jsx("div",{className:`text-3xl font-bold ${r?"text-yellow-400":"text-gray-800"}`,children:c.totalQuestions}),h.jsx("div",{className:"text-xs mt-2 text-gray-500",children:"Questions answered"})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(op,{className:r?"text-yellow-400":"text-pink-500",size:24}),h.jsx("div",{className:`text-sm font-medium ${r?"text-gray-400":"text-gray-600"}`,children:"AI Difficulty"})]}),h.jsxs("div",{className:`text-3xl font-bold ${r?"text-yellow-400":"text-gray-800"}`,children:[Math.round(i*100),"%"]}),h.jsx("div",{className:"text-xs mt-2 text-gray-500",children:"Recommended level"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:`lg:col-span-2 p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsx("h3",{className:`text-2xl font-bold mb-6 ${r?"text-yellow-400":"text-gray-800"}`,children:" Performance by Category"}),h.jsx("div",{className:"space-y-4",children:c.categoryStats.map((m,x)=>{var E;const S=Math.round(m.accuracy*100),k=m.accuracy>=.8,j=m.accuracy<.5;return h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-2xl",children:(E=pi.find(N=>N.id===m.id))==null?void 0:E.icon}),h.jsx("span",{className:`font-semibold ${r?"text-white":"text-gray-700"}`,children:m.category}),k&&h.jsx("span",{className:"text-green-500 text-sm",children:" Strength"}),j&&h.jsx("span",{className:"text-orange-500 text-sm",children:" Focus Area"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:`font-bold ${r?"text-yellow-400":"text-gray-800"}`,children:[S,"%"]}),m.improvement>0&&h.jsx(Fj,{className:"text-green-500",size:16}),m.improvement<0&&h.jsx(Vj,{className:"text-red-500",size:16})]})]}),h.jsx("div",{className:`h-3 rounded-full overflow-hidden ${r?"bg-gray-700":"bg-gray-200"}`,children:h.jsx(T.div,{className:`h-full ${k?"bg-green-500":j?"bg-orange-500":"bg-blue-500"}`,initial:{width:0},animate:{width:`${S}%`},transition:{duration:1,delay:.6+x*.1}})}),h.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[m.sessions," sessions completed"]})]},m.id)})})]}),h.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:`p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsx("h3",{className:`text-xl font-bold mb-4 ${r?"text-yellow-400":"text-gray-800"}`,children:" AI Recommendations"}),d.length>0?h.jsx("div",{className:"space-y-3",children:d.slice(0,3).map((m,x)=>h.jsxs("div",{className:`p-4 rounded-xl ${m.priority==="high"?r?"bg-red-900/50 border border-red-500":"bg-red-50 border border-red-200":m.priority==="medium"?r?"bg-yellow-900/50 border border-yellow-500":"bg-yellow-50 border border-yellow-200":r?"bg-gray-800 border border-gray-600":"bg-gray-50 border border-gray-200"}`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:`text-xs font-bold uppercase ${m.priority==="high"?"text-red-500":m.priority==="medium"?"text-yellow-600":"text-gray-500"}`,children:[m.priority," Priority"]}),h.jsxs("div",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:[Math.round(m.confidence*100),"% confident"]})]}),h.jsx("div",{className:`text-sm font-semibold mb-2 ${r?"text-white":"text-gray-700"}`,children:m.action}),h.jsx("div",{className:`text-xs mb-3 ${r?"text-gray-400":"text-gray-600"}`,children:m.reason}),h.jsx("button",{onClick:()=>s(m.action,m.category),className:`w-full py-2 rounded-lg text-sm font-bold transition-all ${r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Apply Recommendation"})]},x))}):h.jsxs("div",{className:`text-center py-8 ${r?"text-gray-400":"text-gray-500"}`,children:[h.jsx(op,{size:48,className:"mx-auto mb-3 opacity-50"}),h.jsx("p",{children:"Complete more quizzes to receive personalized recommendations!"})]})]})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`mt-6 p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsx("h3",{className:`text-xl font-bold mb-4 ${r?"text-yellow-400":"text-gray-800"}`,children:" AI-Powered Difficulty Slider"}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"Easy"}),h.jsxs("span",{className:`text-sm font-bold ${r?"text-yellow-400":"text-blue-600"}`,children:["AI Recommended: ",Math.round(i*100),"%"]}),h.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:"Hard"})]}),h.jsx("input",{type:"range",min:"0",max:"100",value:Math.round(i*100),onChange:m=>o(parseInt(m.target.value)/100),className:"w-full h-3 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${Math.round(i*100)}%, ${r?"#374151":"#e5e7eb"} ${Math.round(i*100)}%, ${r?"#374151":"#e5e7eb"} 100%)`}}),h.jsx("div",{className:`text-center mt-3 text-sm ${r?"text-gray-400":"text-gray-600"}`,children:i<.3?" Beginner":i<.6?" Intermediate":i<.8?" Advanced":" Expert"})]})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:`mt-6 p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsx("h3",{className:`text-xl font-bold mb-4 ${r?"text-yellow-400":"text-gray-800"}`,children:" Personalized Learning Path"}),h.jsx("div",{className:"space-y-4",children:p.map((m,x)=>h.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl ${r?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-200"}`,children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${r?"bg-yellow-400 text-black":"bg-blue-500 text-white"}`,children:m.step}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:`font-bold ${r?"text-white":"text-gray-800"}`,children:m.category}),h.jsxs("div",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:[m.reason,"  Est. ",m.estimatedTime," min"]})]}),h.jsx("button",{onClick:()=>s("practice",m.categoryId),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Start Practice"})]},x))})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:`mt-6 p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:`text-xl font-bold ${r?"text-yellow-400":"text-gray-800"}`,children:" Performance Predictor"}),h.jsxs("button",{onClick:()=>l(!a),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a?"Hide":"Show"," Predictions"]})]}),a&&h.jsx("div",{className:"space-y-3",children:c.categoryStats.filter(m=>m.sessions>0).map(m=>{const x=v(m.id,i);return x?h.jsxs("div",{className:`p-4 rounded-xl ${r?"bg-gray-800 border border-gray-700":"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:`font-semibold ${r?"text-white":"text-gray-800"}`,children:[m.category," - Next Quiz"]}),h.jsxs("div",{className:`text-xs px-2 py-1 rounded ${x.confidence==="High"?"bg-green-500 text-white":x.confidence==="Medium"?"bg-yellow-500 text-white":"bg-gray-500 text-white"}`,children:[x.confidence," Confidence"]})]}),h.jsxs("div",{className:`text-2xl font-bold mb-1 ${r?"text-yellow-400":"text-blue-600"}`,children:["Predicted: ",x.predictedAccuracy,"% accuracy"]}),h.jsxs("div",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:["Expected: ",x.estimatedCorrect," / ",x.estimatedQuestions," correct"]})]},m.id):null})})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:`mt-6 p-6 rounded-2xl ${r?"bg-gray-900 border-2 border-yellow-400":"bg-white shadow-lg"}`,children:[h.jsx("h3",{className:`text-xl font-bold mb-4 ${r?"text-yellow-400":"text-gray-800"}`,children:" Category Priority Ranking"}),h.jsx("div",{className:`text-sm mb-4 ${r?"text-gray-400":"text-gray-600"}`,children:"AI-calculated priorities based on performance, improvement, and mastery"}),h.jsx("div",{className:"space-y-2",children:c.categoryStats.map(m=>({...m,priority:y(m)})).sort((m,x)=>x.priority-m.priority).map((m,x)=>h.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${r?"bg-gray-800":"bg-gray-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${x===0?"bg-yellow-500 text-white":x===1?"bg-gray-400 text-white":x===2?"bg-orange-600 text-white":r?"bg-gray-700 text-white":"bg-gray-300 text-gray-700"}`,children:x+1}),h.jsx("span",{className:`font-semibold ${r?"text-white":"text-gray-800"}`,children:m.category})]}),h.jsxs("div",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:["Priority: ",m.priority>0?"High":m.priority<-20?"Low":"Medium"]})]},m.id))})]})]})}):h.jsx("div",{className:`min-h-screen flex items-center justify-center ${r?"bg-black text-white":"bg-white"}`,children:h.jsx("div",{className:"text-2xl",children:"Loading analytics... "})})},Hj=({isOpen:e,onClose:t,settings:r,onUpdateSettings:n,onResetProgress:s})=>{const[i,o]=_.useState(r),[a,l]=_.useState(!1),[c,u]=_.useState(!1);_.useEffect(()=>{o(r)},[r]);const d=()=>{n(i),t()},f=()=>{s(),l(!1),t()},p=w=>{o(b=>({...b,categories_enabled:{...b.categories_enabled,[w]:!b.categories_enabled[w]}}))},g=(w,b)=>{u(!1),w.includes("Increase difficulty")?o(y=>({...y,difficulty:"advanced"})):w.includes("Decrease difficulty")&&o(y=>({...y,difficulty:"beginner"})),setTimeout(()=>{d()},500)};return c&&e?h.jsx(qj,{userId:"guest",userName:"Child",highContrast:i.high_contrast,onClose:()=>u(!1),onApplyRecommendation:g}):h.jsx(tt,{children:e&&h.jsx(T.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:h.jsxs(T.div,{className:"bg-white rounded-3xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:w=>w.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:" Parent Settings"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-2xl","aria-label":"Close menu",children:""})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" Difficulty Level"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("button",{className:`p-4 rounded-xl border-2 transition-all ${i.difficulty==="beginner"?"border-green-500 bg-green-50 text-green-800":"border-gray-300 bg-gray-50 text-gray-600"}`,onClick:()=>o(w=>({...w,difficulty:"beginner"})),children:[h.jsx("div",{className:"text-2xl mb-2",children:""}),h.jsx("div",{className:"font-bold",children:"Beginner"}),h.jsx("div",{className:"text-sm",children:"4 choices, no timer"})]}),h.jsxs("button",{className:`p-4 rounded-xl border-2 transition-all ${i.difficulty==="advanced"?"border-blue-500 bg-blue-50 text-blue-800":"border-gray-300 bg-gray-50 text-gray-600"}`,onClick:()=>o(w=>({...w,difficulty:"advanced"})),children:[h.jsx("div",{className:"text-2xl mb-2",children:""}),h.jsx("div",{className:"font-bold",children:"Advanced"}),h.jsx("div",{className:"text-sm",children:"6 choices, 30s timer"})]})]})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" Audio & Accessibility"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("label",{className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50",children:[h.jsx("input",{type:"checkbox",checked:i.sound_enabled,onChange:w=>o(b=>({...b,sound_enabled:w.target.checked})),className:"w-6 h-6 text-blue-600 rounded"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-gray-800",children:" Voice Narration"}),h.jsx("div",{className:"text-sm text-gray-600",children:"Read questions and answers aloud"})]})]}),h.jsxs("label",{className:"flex items-center gap-4 p-4 rounded-xl bg-gray-50",children:[h.jsx("input",{type:"checkbox",checked:i.high_contrast,onChange:w=>o(b=>({...b,high_contrast:w.target.checked})),className:"w-6 h-6 text-blue-600 rounded"}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-gray-800",children:" High Contrast Mode"}),h.jsx("div",{className:"text-sm text-gray-600",children:"Better visibility for visual impairments"})]})]})]})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" Learning Analytics"}),h.jsxs("button",{onClick:()=>u(!0),className:"w-full p-4 bg-purple-500 text-white rounded-xl font-bold hover:bg-purple-600 transition-colors flex items-center justify-center gap-3",children:[h.jsx("span",{children:""}),h.jsx("span",{children:"View Detailed Analytics & AI Recommendations"})]})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" Quiz Categories"}),h.jsx("div",{className:"grid grid-cols-2 gap-4",children:pi.map(w=>h.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-xl bg-gray-50",children:[h.jsx("input",{type:"checkbox",checked:i.categories_enabled[w.id]!==!1,onChange:()=>p(w.id),className:"w-5 h-5 text-blue-600 rounded"}),h.jsx("div",{className:"text-2xl",children:w.icon}),h.jsx("div",{className:"font-bold text-gray-800",children:w.name})]},w.id))})]}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:" Reset Progress"}),a?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-4 bg-red-50 rounded-xl text-red-800",children:[h.jsx("div",{className:"font-bold mb-2",children:" Are you sure?"}),h.jsx("div",{className:"text-sm",children:"This will delete all stars, badges, and progress. This cannot be undone."})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:f,className:"flex-1 p-3 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors",children:"Yes, Reset Everything"}),h.jsx("button",{onClick:()=>l(!1),className:"flex-1 p-3 bg-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}):h.jsx("button",{onClick:()=>l(!0),className:"w-full p-4 bg-red-500 text-white rounded-xl font-bold hover:bg-red-600 transition-colors",children:"Reset All Progress"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:t,className:"flex-1 p-4 bg-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-400 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:d,className:"flex-1 p-4 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition-colors",children:"Save Settings"})]})]})})})};var ko={linear:function(e,t,r,n){var s=r-t;return s*e/n+t},easeInQuad:function(e,t,r,n){var s=r-t;return s*(e/=n)*e+t},easeOutQuad:function(e,t,r,n){var s=r-t;return-s*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,r,n){var s=r-t;return(e/=n/2)<1?s/2*e*e+t:-s/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,n){var s=r-t;return s*(e/=n)*e*e+t},easeOutCubic:function(e,t,r,n){var s=r-t;return s*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,n){var s=r-t;return(e/=n/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,n){var s=r-t;return s*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,r,n){var s=r-t;return-s*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,n){var s=r-t;return(e/=n/2)<1?s/2*e*e*e*e+t:-s/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,n){var s=r-t;return s*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,r,n){var s=r-t;return s*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,n){var s=r-t;return(e/=n/2)<1?s/2*e*e*e*e*e+t:s/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,n){var s=r-t;return-s*Math.cos(e/n*(Math.PI/2))+s+t},easeOutSine:function(e,t,r,n){var s=r-t;return s*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,r,n){var s=r-t;return-s/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,r,n){var s=r-t;return e==0?t:s*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,r,n){var s=r-t;return e==n?t+s:s*(-Math.pow(2,-10*e/n)+1)+t},easeInOutExpo:function(e,t,r,n){var s=r-t;return e===0?t:e===n?t+s:(e/=n/2)<1?s/2*Math.pow(2,10*(e-1))+t:s/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,r,n){var s=r-t;return-s*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,r,n){var s=r-t;return s*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,r,n){var s=r-t;return(e/=n/2)<1?-s/2*(Math.sqrt(1-e*e)-1)+t:s/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,r,n){var s=r-t,i,o,a;return a=1.70158,o=0,i=s,e===0?t:(e/=n)===1?t+s:(o||(o=n*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o))+t)},easeOutElastic:function(e,t,r,n){var s=r-t,i,o,a;return a=1.70158,o=0,i=s,e===0?t:(e/=n)===1?t+s:(o||(o=n*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*e)*Math.sin((e*n-a)*(2*Math.PI)/o)+s+t)},easeInOutElastic:function(e,t,r,n){var s=r-t,i,o,a;return a=1.70158,o=0,i=s,e===0?t:(e/=n/2)===2?t+s:(o||(o=n*(.3*1.5)),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),e<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o))+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-a)*(2*Math.PI)/o)*.5+s+t)},easeInBack:function(e,t,r,n,s){var i=r-t;return s===void 0&&(s=1.70158),i*(e/=n)*e*((s+1)*e-s)+t},easeOutBack:function(e,t,r,n,s){var i=r-t;return s===void 0&&(s=1.70158),i*((e=e/n-1)*e*((s+1)*e+s)+1)+t},easeInOutBack:function(e,t,r,n,s){var i=r-t;return s===void 0&&(s=1.70158),(e/=n/2)<1?i/2*(e*e*(((s*=1.525)+1)*e-s))+t:i/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},easeInBounce:function(e,t,r,n){var s=r-t,i;return i=ko.easeOutBounce(n-e,0,s,n),s-i+t},easeOutBounce:function(e,t,r,n){var s=r-t;return(e/=n)<1/2.75?s*(7.5625*e*e)+t:e<2/2.75?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,n){var s=r-t,i;return e<n/2?(i=ko.easeInBounce(e*2,0,s,n),i*.5+t):(i=ko.easeOutBounce(e*2-n,0,s,n),i*.5+s*.5+t)}},Gj=ko;function Kj(e){return e*Math.PI/180}function Ke(e,t){return e+Math.random()*(t-e)}function Yj(e,t){return Math.floor(e+Math.random()*(t-e+1))}var Ws;(function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"})(Ws||(Ws={}));var ur;(function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"})(ur||(ur={}));const Qj=1e3/60;class Jj{constructor(t,r,n,s){this.getOptions=r;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=t,this.x=n,this.y=s,this.w=Ke(5,20),this.h=Ke(5,20),this.radius=Ke(5,10),this.vx=typeof o=="number"?Ke(-o,o):Ke(o.min,o.max),this.vy=typeof a=="number"?Ke(-a,0):Ke(a.min,a.max),this.shape=Yj(0,2),this.angle=Kj(Ke(0,360)),this.angularSpin=Ke(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=Ke(0,1),this.rotationDirection=Ke(0,1)?ur.Positive:ur.Negative}update(t){const{gravity:r,wind:n,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=t/Qj;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=r*a,this.vx+=n*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===ur.Positive?this.rotationDirection=ur.Negative:this.rotateY<=-1&&this.rotationDirection===ur.Negative&&(this.rotationDirection=ur.Positive);const l=.1*this.rotationDirection*a;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case Ws.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ws.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ws.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Xj{constructor(t,r){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Ke(this.x,this.w+this.x),i=Ke(this.y,this.h+this.y);return new Jj(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:d,debug:f,tweenFunction:p,tweenDuration:g}=this.getOptions();if(!c)return!1;const w=this.particles.length,b=u?w:a;if(b<d){l!==d&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(g,Math.max(0,this.tweenProgress+s));const y=p(this.tweenProgress,this.tweenFrom,d,g),v=Math.round(y-b);for(let m=0;m<v;m++)this.particles.push(this.getParticle());this.particlesGenerated+=v}f&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${w}`,i.width-10,i.height-20));for(let y=this.particles.length-1;y>=0;y--){const v=this.particles[y];v.update(s),(v.y>i.height||v.y<-100||v.x>i.width+100||v.x<-100)&&(u&&b<=d?this.particles[y]=this.getParticle():this.removeParticleAt(y))}return w>0||b<d},this.canvas=t;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=r}}const jd={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Gj.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class Zj{constructor(t,r){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...jd,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:l,context:c}=this,u=Math.min(s-this.lastFrameTime,50);if(a&&u<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?u%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new Xj(this.canvas,()=>this.options),this.options=r,this.update()}get options(){return this._options}set options(t){var s,i;const r=(s=this._options)==null?void 0:s.run,n=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&n===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&r===!1&&this.update()}}const eE=Gt.createRef();class Ed extends Gt.Component{constructor(t){super(t),this.canvas=Gt.createRef(),this.canvas=t.canvasRef||eE}componentDidMount(){if(this.canvas.current){const t=Cl(this.props)[0];this.confetti=new Zj(this.canvas.current,t)}}componentDidUpdate(){const t=Cl(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,r]=Cl(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...r.style};return h.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...r,style:n})}}Ed.defaultProps={...jd};Ed.displayName="ReactConfetti";function Cl(e){const t={},r={},n={},s=[...Object.keys(jd),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in e){const a=e[o];s.includes(o)?t[o]=a:i.includes(o)?i[o]=a:n[o]=a}return[t,n,r]}const Ey=Gt.forwardRef((e,t)=>h.jsx(Ed,{canvasRef:t,...e})),tE=({show:e,type:t,onComplete:r})=>{_.useEffect(()=>{if(e){const i=setTimeout(r,3e3);return()=>clearTimeout(i)}},[e,r]);const n=()=>{switch(t){case"correct":return["","","",""];case"badge":return["","","",""];case"level":return["","","",""];default:return["","",""]}},s=()=>{switch(t){case"correct":return"Great Job!";case"badge":return"New Badge Earned!";case"level":return"Level Up!";default:return"Awesome!"}};return h.jsx(tt,{children:e&&h.jsxs(T.div,{className:"fixed inset-0 pointer-events-none z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[h.jsx(Ey,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:t==="level"?200:t==="badge"?100:50,gravity:.3,colors:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"]}),h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs(T.div,{className:"text-center",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:200,damping:10},children:[h.jsx(T.div,{className:"text-8xl mb-4",animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:1,repeat:1/0,repeatType:"reverse"},children:n()[0]}),h.jsx(T.h2,{className:"text-6xl font-bold text-white drop-shadow-lg",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:s()})]})}),n().map((i,o)=>h.jsx(T.div,{className:"absolute text-6xl",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},initial:{scale:0,rotate:0,opacity:0},animate:{scale:[0,1,0],rotate:[0,360,720],opacity:[0,1,0],y:[0,-100,-200]},transition:{duration:3,delay:o*.2,ease:"easeOut"},children:i},o)),Array.from({length:20}).map((i,o)=>h.jsx(T.div,{className:"absolute w-2 h-2 bg-yellow-300 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},initial:{scale:0,opacity:1},animate:{scale:[0,1,0],opacity:[1,1,0]},transition:{duration:2,delay:Math.random()*2,repeat:1/0,repeatType:"loop"}},`sparkle-${o}`))]})})},Ss=[{id:"leo_lion",name:"Leo the Lion",avatar:"",personality:"brave",catchphrase:"Roar with knowledge!",introduction:"Greetings, young explorer! I'm Leo, the bravest lion in the Animal Kingdom. Join me on a wild safari adventure!",encouragement:["You're as brave as a lion!","Keep exploring, young adventurer!","Your curiosity makes you stronger!","Every great explorer makes mistakes - let's try again!"],celebration:["Magnificent! You've earned your explorer stripes!","Roar-some job! The animals are impressed!","You're becoming a true wildlife expert!","Outstanding! Even the king of the jungle is proud!"],comfort:["Don't worry, every great explorer learns from their journey!","The best adventurers never give up!","You're doing great - let's discover more together!"]},{id:"ruby_rabbit",name:"Ruby the Rabbit",avatar:"",personality:"friendly",catchphrase:"Hop into learning!",introduction:"Hi there! I'm Ruby, and I love hopping through the Magical Garden! Want to discover the most delicious fruits with me?",encouragement:["You're berry good at this!","Keep hopping toward success!","Your learning is growing like a beautiful garden!","Every seed of knowledge will bloom!"],celebration:["Fan-tas-tic! You've harvested great knowledge!","Sweet success! You know your fruits!","You're the best garden helper ever!","Absolutely a-peel-ing work!"],comfort:["Don't worry, every garden needs time to grow!","The sweetest fruits come to those who keep trying!","You're planting seeds of wisdom!"]},{id:"stella_star",name:"Stella the Star",avatar:"",personality:"wise",catchphrase:"Shape your destiny!",introduction:"Welcome to the Cosmic Shape Realm! I'm Stella, your guide through the geometric wonders of the universe!",encouragement:["You're shaping up to be amazing!","Your mind is as bright as a star!","Every shape tells a cosmic story!","The universe believes in you!"],celebration:["Stellar performance! You've mastered the shapes!","You're a geometric genius!","The cosmos celebrates your wisdom!","Shape-tacular! You're a star!"],comfort:["Even stars need time to shine their brightest!","The universe is patient with all learners!","Your potential is infinite like space itself!"]},{id:"rainbow_phoenix",name:"Rainbow the Phoenix",avatar:"",personality:"playful",catchphrase:"Paint the world with colors!",introduction:"Hello, little artist! I'm Rainbow, the Phoenix of Colors! Let's paint the world with knowledge and joy!",encouragement:["You're adding beautiful colors to the world!","Your learning palette is expanding!","Every color has its own magic!","Keep painting your path to success!"],celebration:["Brilliant! You've created a masterpiece of knowledge!","Color-ful job! You're a rainbow of talent!","You've painted success with flying colors!","Vibrant victory! You shine like a rainbow!"],comfort:["Every great artist starts with simple strokes!","Colors are more beautiful when we take our time!","Your creative spirit will guide you!"]},{id:"echo_owl",name:"Echo the Owl",avatar:"",personality:"curious",catchphrase:"Listen to learn!",introduction:"Hoot hoot! I'm Echo, the wisest owl in the Sound Forest! Let's explore the magical world of sounds together!",encouragement:["Your ears are getting sharper!","You're becoming a sound detective!","Every sound tells a story!","Listen carefully - wisdom is all around!"],celebration:["Hoot-ray! You've mastered the sounds!","Sound-sational! Your ears are amazing!","You've solved the mystery of sounds!","Wise work! You're as clever as an owl!"],comfort:["The forest is patient with all young listeners!","Every sound expert started just like you!","Your curiosity will lead you to success!"]}],_n=[{id:"safari_adventure",categoryId:"animals",title:"The Great Safari Adventure",description:"Join Leo the Lion on an epic journey through different habitats to meet amazing animals!",character:Ss[0],chapters:[{id:"jungle_expedition",title:"Jungle Expedition",description:"Venture deep into the lush jungle to discover its wild inhabitants!",setting:"Dense jungle with towering trees and mysterious sounds",backgroundImage:"https://images.pexels.com/photos/975771/pexels-photo-975771.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:0,questionsNeeded:3,completionReward:"Jungle Explorer Badge"},{id:"savanna_quest",title:"Savanna Quest",description:"Cross the vast savanna to meet the majestic creatures of the plains!",setting:"Golden grasslands stretching to the horizon under the African sun",backgroundImage:"https://images.pexels.com/photos/631317/pexels-photo-631317.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:5,questionsNeeded:4,completionReward:"Savanna Ranger Badge"},{id:"ocean_depths",title:"Ocean Depths",description:"Dive into the mysterious ocean to discover marine life!",setting:"Crystal blue waters teeming with colorful sea creatures",backgroundImage:"https://images.pexels.com/photos/1001594/pexels-photo-1001594.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:15,questionsNeeded:3,completionReward:"Ocean Explorer Badge"}],finalReward:"Master Wildlife Guardian Certificate"},{id:"garden_adventure",categoryId:"fruits",title:"The Magical Garden Quest",description:"Help Ruby the Rabbit tend to the enchanted fruit garden and learn about delicious fruits!",character:Ss[1],chapters:[{id:"orchard_awakening",title:"Orchard Awakening",description:"Wake up the sleepy orchard and help the fruit trees bloom!",setting:"A magical orchard with sparkling fruit trees",backgroundImage:"https://images.pexels.com/photos/1300972/pexels-photo-1300972.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:0,questionsNeeded:3,completionReward:"Garden Helper Badge"},{id:"berry_patch_mystery",title:"Berry Patch Mystery",description:"Solve the mystery of the missing berries in the enchanted berry patch!",setting:"A colorful patch filled with berry bushes and friendly garden creatures",backgroundImage:"https://images.pexels.com/photos/1327838/pexels-photo-1327838.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:8,questionsNeeded:4,completionReward:"Berry Detective Badge"},{id:"harvest_festival",title:"Grand Harvest Festival",description:"Celebrate the harvest with all the garden friends!",setting:"A festive garden party with fruits, flowers, and celebration",backgroundImage:"https://images.pexels.com/photos/1132047/pexels-photo-1132047.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:20,questionsNeeded:3,completionReward:"Harvest Master Badge"}],finalReward:"Master Gardener Certificate"},{id:"cosmic_adventure",categoryId:"shapes",title:"The Cosmic Shape Journey",description:"Travel through space with Stella the Star to discover geometric wonders across the universe!",character:Ss[2],chapters:[{id:"planet_discovery",title:"Planet Discovery",description:"Explore different planets, each with unique geometric features!",setting:"Colorful alien planets with geometric landscapes",backgroundImage:"https://images.pexels.com/photos/2156/sky-earth-space-working.jpg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:0,questionsNeeded:3,completionReward:"Space Explorer Badge"},{id:"constellation_creation",title:"Constellation Creation",description:"Connect the stars to create beautiful shape constellations!",setting:"The vast cosmos with twinkling stars waiting to be connected",backgroundImage:"https://images.pexels.com/photos/1252890/pexels-photo-1252890.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:10,questionsNeeded:4,completionReward:"Star Mapper Badge"},{id:"galaxy_architect",title:"Galaxy Architect",description:"Design your own galaxy using the power of geometric shapes!",setting:"A cosmic workshop where galaxies are born from geometric patterns",backgroundImage:"https://images.pexels.com/photos/2150/sky-space-dark-galaxy.jpg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:25,questionsNeeded:3,completionReward:"Galaxy Builder Badge"}],finalReward:"Master Cosmic Architect Certificate"},{id:"rainbow_adventure",categoryId:"colors",title:"The Rainbow Phoenix Quest",description:"Join Rainbow the Phoenix on a magical journey to restore colors to the world!",character:Ss[3],chapters:[{id:"color_kingdom",title:"The Faded Kingdom",description:"Help bring color back to the kingdom that lost its hues!",setting:"A once-colorful kingdom now in grayscale, waiting for color magic",backgroundImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:0,questionsNeeded:3,completionReward:"Color Restorer Badge"},{id:"prism_palace",title:"The Prism Palace",description:"Navigate through the magical prism palace where colors dance and play!",setting:"A crystalline palace where light refracts into beautiful rainbows",backgroundImage:"https://images.pexels.com/photos/1323712/pexels-photo-1323712.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:12,questionsNeeded:4,completionReward:"Prism Master Badge"},{id:"rainbow_celebration",title:"The Great Rainbow Celebration",description:"Celebrate the return of colors with a magnificent rainbow festival!",setting:"A vibrant celebration with rainbows, fireworks, and colorful joy",backgroundImage:"https://images.pexels.com/photos/1323712/pexels-photo-1323712.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:30,questionsNeeded:3,completionReward:"Rainbow Guardian Badge"}],finalReward:"Master Color Phoenix Certificate"},{id:"sound_adventure",categoryId:"sounds",title:"The Enchanted Sound Forest",description:"Explore the mystical Sound Forest with Echo the Owl to discover the secrets of every sound!",character:Ss[4],chapters:[{id:"whispering_woods",title:"The Whispering Woods",description:"Listen carefully to the gentle sounds of the forest awakening!",setting:"A peaceful forest where every leaf and branch creates gentle melodies",backgroundImage:"https://images.pexels.com/photos/1005058/pexels-photo-1005058.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:0,questionsNeeded:3,completionReward:"Forest Listener Badge"},{id:"echo_caverns",title:"The Echo Caverns",description:"Venture into mysterious caverns where sounds bounce and multiply!",setting:"Mystical caverns with crystal formations that amplify every sound",backgroundImage:"https://images.pexels.com/photos/1670187/pexels-photo-1670187.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:15,questionsNeeded:4,completionReward:"Echo Master Badge"},{id:"symphony_summit",title:"Symphony Summit",description:"Reach the highest peak where all the sounds of nature create a grand symphony!",setting:"A majestic mountain peak where all sounds unite in perfect harmony",backgroundImage:"https://images.pexels.com/photos/1624496/pexels-photo-1624496.jpeg?auto=compress&cs=tinysrgb&w=800",unlockRequirement:35,questionsNeeded:3,completionReward:"Symphony Conductor Badge"}],finalReward:"Master Sound Sage Certificate"}],Ty=(e,t)=>e.chapters.filter(r=>t>=r.unlockRequirement),rE=(e,t)=>{const r=Ty(e,t);return r.length===0?e.chapters[0]:r[r.length-1]},nE=({progress:e,onSelectAdventure:t,highContrast:r})=>h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsxs(T.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[h.jsx("h2",{className:`text-5xl font-bold mb-4 ${r?"text-yellow-400":"text-white"}`,children:" Adventure Stories "}),h.jsx("p",{className:`text-xl ${r?"text-white":"text-white/90"}`,children:"Choose your magical learning adventure!"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_n.map((n,s)=>{const i=Ty(n,e.stars),o=n.chapters.length,a=i.length/o*100;return h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:`relative overflow-hidden rounded-3xl shadow-2xl cursor-pointer transform transition-all duration-300 hover:scale-105 ${r?"bg-black border-4 border-yellow-400":"bg-gradient-to-br from-purple-500 to-pink-500"}`,onClick:()=>t(n.id),whileHover:{y:-5},whileTap:{scale:.98},children:[h.jsx("div",{className:"absolute top-4 right-4 z-10",children:h.jsx(T.div,{className:"text-6xl",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:n.character.avatar})}),h.jsxs("div",{className:"absolute top-4 left-4 right-20 z-10",children:[h.jsx("div",{className:`h-2 rounded-full overflow-hidden ${r?"bg-gray-700":"bg-white/20"}`,children:h.jsx(T.div,{className:`h-full ${r?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${a}%`},transition:{duration:1,delay:s*.2}})}),h.jsxs("div",{className:`text-sm mt-1 font-bold ${r?"text-yellow-400":"text-white"}`,children:[i.length,"/",o," Chapters"]})]}),h.jsxs("div",{className:"p-6 pt-20",children:[h.jsx("h3",{className:`text-2xl font-bold mb-2 ${r?"text-yellow-400":"text-white"}`,children:n.title}),h.jsx("p",{className:`text-sm mb-4 ${r?"text-white":"text-white/90"}`,children:n.description}),h.jsxs("div",{className:`p-3 rounded-2xl mb-4 ${r?"bg-gray-800 border-2 border-yellow-400":"bg-white/10 backdrop-blur-sm"}`,children:[h.jsxs("div",{className:`text-lg font-bold mb-1 ${r?"text-yellow-400":"text-white"}`,children:[n.character.name," says:"]}),h.jsxs("div",{className:`text-sm italic ${r?"text-white":"text-white/90"}`,children:['"',n.character.catchphrase,'"']})]}),h.jsx("div",{className:"space-y-2",children:n.chapters.map((l,c)=>{const u=e.stars>=l.unlockRequirement,d=i.length>c;return h.jsxs("div",{className:`flex items-center gap-2 text-sm ${u?r?"text-white":"text-white/90":r?"text-gray-600":"text-white/50"}`,children:[h.jsx("div",{className:"text-lg",children:d?"":u?"":""}),h.jsx("span",{className:d?"line-through":"",children:l.title}),!u&&h.jsxs("span",{className:"text-xs",children:["(Need ",l.unlockRequirement," )"]})]},l.id)})}),h.jsx(T.button,{className:`w-full mt-4 p-3 rounded-2xl font-bold text-lg transition-all ${r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-white text-purple-600 hover:bg-gray-100"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:i.length===0?"Start Adventure!":i.length===o?"Replay Adventure":"Continue Adventure"})]}),Array.from({length:5}).map((l,c)=>h.jsx(T.div,{className:"absolute w-1 h-1 bg-yellow-300 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,delay:c*.4+s*.1,repeat:1/0,repeatType:"loop"}},c))]},n.id)})})]}),sE=({adventure:e,progress:t,onStartChapter:r,onBack:n,soundEnabled:s,highContrast:i})=>{const{speak:o}=Ir(),[a,l]=_.useState("introduction"),[c,u]=_.useState(null),d=rE(e,t.stars);_.useEffect(()=>{if(s&&a==="introduction"){const p=setTimeout(()=>{o(e.character.introduction)},1e3);return()=>clearTimeout(p)}},[e,s,o,a]);const f=p=>{u(p),s&&o(`${p.title}: ${p.description}`)};return h.jsxs("div",{className:"min-h-screen relative overflow-hidden",style:{backgroundImage:d?`url(${d.backgroundImage})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[h.jsx("div",{className:`absolute inset-0 ${i?"bg-black/80":"bg-gradient-to-br from-purple-900/80 via-pink-900/80 to-blue-900/80"}`}),h.jsx("div",{className:"relative z-10 p-6",children:h.jsxs(tt,{mode:"wait",children:[a==="introduction"&&h.jsxs(T.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"max-w-4xl mx-auto text-center",children:[h.jsxs(T.div,{className:"mb-8",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[h.jsx(T.div,{className:"text-9xl mb-4",animate:{rotate:[0,5,-5,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,repeatType:"reverse"},children:e.character.avatar}),h.jsx("h1",{className:`text-6xl font-bold mb-4 ${i?"text-yellow-400":"text-white"}`,children:e.character.name}),h.jsxs("div",{className:`text-2xl italic mb-6 ${i?"text-white":"text-white/90"}`,children:['"',e.character.catchphrase,'"']})]}),h.jsxs(T.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"mb-8",children:[h.jsx("h2",{className:`text-5xl font-bold mb-4 ${i?"text-yellow-400":"text-white"}`,children:e.title}),h.jsx("p",{className:`text-xl ${i?"text-white":"text-white/90"}`,children:e.description})]}),h.jsxs(T.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.6,type:"spring",stiffness:200},className:`relative p-8 rounded-3xl mb-8 max-w-2xl mx-auto ${i?"bg-black border-4 border-yellow-400":"bg-white/10 backdrop-blur-lg border-2 border-white/20"}`,children:[h.jsx("div",{className:"text-xl leading-relaxed text-white",children:e.character.introduction}),h.jsx("div",{className:`absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-0 h-0 ${i?"border-l-8 border-r-8 border-t-8 border-transparent border-t-yellow-400":"border-l-8 border-r-8 border-t-8 border-transparent border-t-white/10"}`})]}),h.jsxs(T.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},className:"flex gap-4 justify-center",children:[h.jsx("button",{onClick:n,className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all ${i?"bg-gray-700 text-white hover:bg-gray-600":"bg-white/20 text-white hover:bg-white/30"}`,children:" Back to Stories"}),h.jsx("button",{onClick:()=>l("chapter-select"),className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all ${i?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-gradient-to-r from-pink-500 to-purple-500 text-white hover:from-pink-600 hover:to-purple-600"}`,children:"Choose Chapter "})]}),Array.from({length:8}).map((p,g)=>h.jsx(T.div,{className:"absolute text-4xl opacity-30",style:{left:`${10+g*12}%`,top:`${20+Math.sin(g)*30}%`},animate:{y:[0,-20,0],rotate:[0,10,-10,0],opacity:[.3,.7,.3]},transition:{duration:3+g*.5,repeat:1/0,delay:g*.3},children:["","","","","","","",""][g]},g))]},"introduction"),a==="chapter-select"&&h.jsxs(T.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"max-w-6xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h2",{className:`text-4xl font-bold mb-4 ${i?"text-yellow-400":"text-white"}`,children:"Choose Your Chapter"}),h.jsx("p",{className:`text-xl ${i?"text-white":"text-white/90"}`,children:"Select which part of the adventure you'd like to explore!"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:e.chapters.map((p,g)=>{const w=t.stars>=p.unlockRequirement,b=(c==null?void 0:c.id)===p.id;return h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},className:`relative overflow-hidden rounded-3xl cursor-pointer transition-all duration-300 ${w?`transform hover:scale-105 ${b?i?"ring-4 ring-yellow-400 bg-yellow-400/20":"ring-4 ring-white bg-white/20":i?"bg-black border-2 border-yellow-400 hover:border-yellow-300":"bg-white/10 hover:bg-white/20"}`:`opacity-50 cursor-not-allowed ${i?"bg-gray-800 border-2 border-gray-600":"bg-gray-800/50"}`}`,onClick:()=>w&&f(p),style:{backgroundImage:w?`url(${p.backgroundImage})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[h.jsx("div",{className:`absolute inset-0 ${i?"bg-black/70":"bg-gradient-to-t from-black/80 to-transparent"}`}),h.jsxs("div",{className:"relative z-10 p-6",children:[h.jsx("div",{className:"text-right mb-2",children:h.jsx("div",{className:"text-3xl",children:w?"":""})}),h.jsx("h3",{className:`text-2xl font-bold mb-2 ${i?"text-yellow-400":"text-white"}`,children:p.title}),h.jsx("p",{className:`text-sm mb-4 ${i?"text-white":"text-white/90"}`,children:p.description}),!w&&h.jsxs("div",{className:`text-sm ${i?"text-gray-400":"text-white/70"}`,children:["Need ",p.unlockRequirement,"  to unlock"]}),w&&h.jsxs("div",{className:`text-sm font-bold ${i?"text-yellow-400":"text-white"}`,children:["Reward: ",p.completionReward]})]})]},p.id)})}),h.jsxs("div",{className:"flex gap-4 justify-center",children:[h.jsx("button",{onClick:()=>l("introduction"),className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all ${i?"bg-gray-700 text-white hover:bg-gray-600":"bg-white/20 text-white hover:bg-white/30"}`,children:" Back to Introduction"}),c&&h.jsxs("button",{onClick:()=>r(c.id),className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all ${i?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-green-600 hover:to-blue-600"}`,children:["Start ",c.title," "]})]})]},"chapter-select")]})})]})},iE=({adventure:e,completedChapter:t,progress:r,score:n,onContinue:s,onReturnToStory:i,soundEnabled:o,highContrast:a})=>{const{speak:l}=Ir(),c=Math.round(n.correct/n.total*100),u=e.chapters.find(w=>w.unlockRequirement>t.unlockRequirement),d=u?r.stars>=u.unlockRequirement:!1;_.useEffect(()=>{if(o){const w=setTimeout(()=>{const b=f();l(b)},1e3);return()=>clearTimeout(w)}},[o,l]);const f=()=>{const w=e.character,b=w.celebration[Math.floor(Math.random()*w.celebration.length)];return c>=80?`${b} You've completed ${t.title} with flying colors! You earned ${t.completionReward}!`:c>=60?`${b} Great work completing ${t.title}! You've earned ${t.completionReward}!`:`${b} You completed ${t.title}! Every adventure teaches us something new. You've earned ${t.completionReward}!`},p=()=>c>=90?"":c>=80?"":c>=70?"":c>=60?"":"",g=()=>c>=90?"Legendary Performance!":c>=80?"Outstanding Adventure!":c>=70?"Great Journey!":c>=60?"Good Exploration!":"Learning Adventure!";return h.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center p-6",style:{backgroundImage:`url(${t.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:[h.jsx(Ey,{width:window.innerWidth,height:window.innerHeight,recycle:!1,numberOfPieces:c>=80?200:100,gravity:.3,colors:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD"]}),h.jsx("div",{className:`absolute inset-0 ${a?"bg-black/85":"bg-gradient-to-br from-purple-900/80 via-pink-900/80 to-blue-900/80"}`}),h.jsxs(T.div,{className:`relative z-10 max-w-4xl mx-auto text-center p-12 rounded-3xl shadow-2xl ${a?"bg-black/90 border-4 border-yellow-400":"bg-white/10 backdrop-blur-lg border-2 border-white/20"}`,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,type:"spring",stiffness:100},children:[h.jsxs(T.div,{className:"mb-8",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[h.jsx(T.div,{className:"text-9xl mb-4",animate:{rotate:[0,10,-10,0],scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:e.character.avatar}),h.jsx("h1",{className:`text-5xl font-bold mb-4 ${a?"text-yellow-400":"text-white"}`,children:"Chapter Complete!"})]}),h.jsxs(T.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},className:"mb-8",children:[h.jsx("h2",{className:"text-4xl font-bold mb-2 text-white",children:t.title}),h.jsx("p",{className:`text-xl ${a?"text-gray-300":"text-white/90"}`,children:t.description})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mb-8",children:[h.jsx("div",{className:"text-8xl mb-4",children:p()}),h.jsx("div",{className:`text-3xl font-bold mb-4 ${a?"text-yellow-400":"text-white"}`,children:g()}),h.jsxs("div",{className:`text-2xl mb-4 ${a?"text-white":"text-white/90"}`,children:["You answered ",h.jsx("span",{className:"font-bold text-green-400",children:n.correct})," out of ",h.jsx("span",{className:"font-bold",children:n.total})," questions correctly!"]}),h.jsxs("div",{className:`text-xl ${a?"text-gray-300":"text-white/80"}`,children:[c,"% Success Rate"]})]}),h.jsxs(T.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.9,type:"spring",stiffness:150},className:`p-6 rounded-3xl mb-8 ${a?"bg-yellow-400/20 border-2 border-yellow-400":"bg-white/20 border-2 border-white/30"}`,children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("div",{className:`text-2xl font-bold mb-2 ${a?"text-yellow-400":"text-white"}`,children:"Reward Earned!"}),h.jsx("div",{className:`text-xl ${a?"text-white":"text-white/90"}`,children:t.completionReward})]}),h.jsxs(T.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:1.1},className:`p-6 rounded-3xl mb-8 relative ${a?"bg-black/50 border-2 border-yellow-400":"bg-white/10 backdrop-blur-sm border-2 border-white/20"}`,children:[h.jsxs("div",{className:`text-lg font-bold mb-2 ${a?"text-yellow-400":"text-white"}`,children:[e.character.name," says:"]}),h.jsxs("div",{className:`text-lg italic ${a?"text-white":"text-white/90"}`,children:['"',e.character.celebration[Math.floor(Math.random()*e.character.celebration.length)],'"']}),h.jsx("div",{className:`absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-0 h-0 ${a?"border-l-8 border-r-8 border-t-8 border-transparent border-t-yellow-400":"border-l-8 border-r-8 border-t-8 border-transparent border-t-white/10"}`})]}),u&&h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.3},className:`p-6 rounded-3xl mb-8 ${d?a?"bg-green-900/50 border-2 border-green-400":"bg-green-500/20 border-2 border-green-400":a?"bg-gray-800/50 border-2 border-gray-600":"bg-gray-500/20 border-2 border-gray-400"}`,children:[h.jsx("div",{className:"text-4xl mb-2",children:d?"":""}),h.jsxs("div",{className:`text-xl font-bold mb-2 ${d?"text-green-400":a?"text-gray-400":"text-gray-300"}`,children:["Next Chapter: ",u.title]}),h.jsx("div",{className:`text-sm ${d?a?"text-white":"text-white/90":a?"text-gray-500":"text-gray-400"}`,children:d?u.description:`Unlock with ${u.unlockRequirement} stars (You have ${r.stars})`})]}),h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5},className:"flex flex-wrap gap-4 justify-center",children:[u&&d&&h.jsx("button",{onClick:s,className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all ${a?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-green-600 hover:to-blue-600"}`,children:"Continue Adventure "}),h.jsx("button",{onClick:i,className:`px-8 py-4 rounded-2xl font-bold text-xl transition-all ${a?"bg-white text-black hover:bg-gray-200":"bg-white/20 text-white hover:bg-white/30"}`,children:"Return to Story"})]})]}),Array.from({length:15}).map((w,b)=>h.jsx(T.div,{className:"absolute text-4xl opacity-70",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-50,0],x:[0,Math.sin(b)*30,0],rotate:[0,360],scale:[1,1.5,1],opacity:[.7,1,.7]},transition:{duration:4+Math.random()*2,repeat:1/0,delay:b*.2},children:["","","","","","","",""][b%8]},b))]})};var Kc=function(e,t){return Kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Kc(e,t)};function Py(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Kc(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var sa=function(){return sa=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},sa.apply(this,arguments)};function ls(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Cy(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function Ny(e,t){return function(r,n){t(r,n,e)}}function Ay(e,t,r,n,s,i){function o(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!t&&e?n.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,f=!1,p=r.length-1;p>=0;p--){var g={};for(var w in n)g[w]=w==="access"?{}:n[w];for(var w in n.access)g.access[w]=n.access[w];g.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(y||null))};var b=(0,r[p])(a==="accessor"?{get:u.get,set:u.set}:u[l],g);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(d=o(b.get))&&(u.get=d),(d=o(b.set))&&(u.set=d),(d=o(b.init))&&s.unshift(d)}else(d=o(b))&&(a==="field"?s.unshift(d):u[l]=d)}c&&Object.defineProperty(c,n.name,u),f=!0}function Ry(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function Oy(e){return typeof e=="symbol"?e:"".concat(e)}function $y(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Iy(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function O(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}function Dy(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ia=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Ly(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Ia(t,e,r)}function ia(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Td(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function My(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Td(arguments[t]));return e}function Vy(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function By(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function ns(e){return this instanceof ns?(this.v=e,this):new ns(e)}function Fy(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(g){return Promise.resolve(g).then(p,d)}}function a(p,g){n[p]&&(s[p]=function(w){return new Promise(function(b,y){i.push([p,w,b,y])>1||l(p,w)})},g&&(s[p]=g(s[p])))}function l(p,g){try{c(n[p](g))}catch(w){f(i[0][3],w)}}function c(p){p.value instanceof ns?Promise.resolve(p.value.v).then(u,d):f(i[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function f(p,g){p(g),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Uy(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:ns(e[s](o)),done:!1}:i?i(o):o}:i}}function zy(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ia=="function"?ia(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,l){o=e[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Wy(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var oE=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Yc=function(e){return Yc=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Yc(e)};function qy(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Yc(e),n=0;n<r.length;n++)r[n]!=="default"&&Ia(t,e,r[n]);return oE(t,e),t}function Hy(e){return e&&e.__esModule?e:{default:e}}function Gy(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function Ky(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function Yy(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Qy(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var aE=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Jy(e){function t(i){e.error=e.hasError?new aE(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function Xy(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}const lE={__extends:Py,__assign:sa,__rest:ls,__decorate:Cy,__param:Ny,__esDecorate:Ay,__runInitializers:Ry,__propKey:Oy,__setFunctionName:$y,__metadata:Iy,__awaiter:O,__generator:Dy,__createBinding:Ia,__exportStar:Ly,__values:ia,__read:Td,__spread:My,__spreadArrays:Vy,__spreadArray:By,__await:ns,__asyncGenerator:Fy,__asyncDelegator:Uy,__asyncValues:zy,__makeTemplateObject:Wy,__importStar:qy,__importDefault:Hy,__classPrivateFieldGet:Gy,__classPrivateFieldSet:Ky,__classPrivateFieldIn:Yy,__addDisposableResource:Qy,__disposeResources:Jy,__rewriteRelativeImportExtension:Xy},cE=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Qy,get __assign(){return sa},__asyncDelegator:Uy,__asyncGenerator:Fy,__asyncValues:zy,__await:ns,__awaiter:O,__classPrivateFieldGet:Gy,__classPrivateFieldIn:Yy,__classPrivateFieldSet:Ky,__createBinding:Ia,__decorate:Cy,__disposeResources:Jy,__esDecorate:Ay,__exportStar:Ly,__extends:Py,__generator:Dy,__importDefault:Hy,__importStar:qy,__makeTemplateObject:Wy,__metadata:Iy,__param:Ny,__propKey:Oy,__read:Td,__rest:ls,__rewriteRelativeImportExtension:Xy,__runInitializers:Ry,__setFunctionName:$y,__spread:My,__spreadArray:By,__spreadArrays:Vy,__values:ia,default:lE},Symbol.toStringTag,{value:"Module"})),uE="modulepreload",dE=function(e){return"/"+e},ap={},cs=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=dE(l),l in ap)return;ap[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":uE,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},hE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Pd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class lp extends Pd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cp extends Pd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class up extends Pd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Qc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qc||(Qc={}));class fE{constructor(t,{headers:r={},customFetch:n,region:s=Qc.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=hE(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return O(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:o,body:a,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${r}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(c["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(c["Content-Type"]="application/json",f=JSON.stringify(a)):f=a;const p=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:f,signal:l}).catch(y=>{throw y.name==="AbortError"?y:new lp(y)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new cp(p);if(!p.ok)throw new up(p);let w=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return w==="application/json"?b=yield p.json():w==="application/octet-stream"||w==="application/pdf"?b=yield p.blob():w==="text/event-stream"?b=p:w==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new lp(i)}:{data:null,error:i,response:i instanceof up||i instanceof cp?i.context:void 0}}})}}var Fe={};const us=Ip(cE);var Zi={},eo={},to={},ro={},no={},pE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ss=pE();const mE=ss.fetch,Zy=ss.fetch.bind(ss),ev=ss.Headers,gE=ss.Request,yE=ss.Response,fn=Object.freeze(Object.defineProperty({__proto__:null,Headers:ev,Request:gE,Response:yE,default:Zy,fetch:mE},Symbol.toStringTag,{value:"Module"})),vE=Ip(fn);var so={},dp;function tv(){if(dp)return so;dp=1,Object.defineProperty(so,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return so.default=e,so}var hp;function rv(){if(hp)return no;hp=1,Object.defineProperty(no,"__esModule",{value:!0});const e=us,t=e.__importDefault(vE),r=e.__importDefault(tv());class n{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,f,p;let g=null,w=null,b=null,y=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?w=k:w=JSON.parse(k))}const x=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),S=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&S&&S.length>1&&(b=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(g={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,b=null,y=406,v="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const x=await c.text();try{g=JSON.parse(x),Array.isArray(g)&&c.status===404&&(w=[],g=null,y=200,v="OK")}catch{c.status===404&&x===""?(y=204,v="No Content"):g={message:x}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,y=200,v="OK"),g&&this.shouldThrowOnError)throw new r.default(g)}return{error:g,data:w,count:b,status:y,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,f;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return no.default=n,no}var fp;function nv(){if(fp)return ro;fp=1,Object.defineProperty(ro,"__esModule",{value:!0});const t=us.__importDefault(rv());class r extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return ro.default=r,ro}var pp;function Cd(){if(pp)return to;pp=1,Object.defineProperty(to,"__esModule",{value:!0});const t=us.__importDefault(nv());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${c}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return to.default=r,to}var mp;function sv(){if(mp)return eo;mp=1,Object.defineProperty(eo,"__esModule",{value:!0});const t=us.__importDefault(Cd());class r{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return eo.default=r,eo}var gp;function wE(){if(gp)return Zi;gp=1,Object.defineProperty(Zi,"__esModule",{value:!0});const e=us,t=e.__importDefault(sv()),r=e.__importDefault(Cd());class n{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const f=new URL(`${this.url}/rpc/${i}`);let p;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{f.searchParams.append(w,b)})):(d="POST",p=o);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new r.default({method:d,url:f,headers:g,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Zi.default=n,Zi}Object.defineProperty(Fe,"__esModule",{value:!0});Fe.PostgrestError=Fe.PostgrestBuilder=Fe.PostgrestTransformBuilder=Fe.PostgrestFilterBuilder=Fe.PostgrestQueryBuilder=Fe.PostgrestClient=void 0;const ds=us,iv=ds.__importDefault(wE());Fe.PostgrestClient=iv.default;const ov=ds.__importDefault(sv());Fe.PostgrestQueryBuilder=ov.default;const av=ds.__importDefault(Cd());Fe.PostgrestFilterBuilder=av.default;const lv=ds.__importDefault(nv());Fe.PostgrestTransformBuilder=lv.default;const cv=ds.__importDefault(rv());Fe.PostgrestBuilder=cv.default;const uv=ds.__importDefault(tv());Fe.PostgrestError=uv.default;var xE=Fe.default={PostgrestClient:iv.default,PostgrestQueryBuilder:ov.default,PostgrestFilterBuilder:av.default,PostgrestTransformBuilder:lv.default,PostgrestBuilder:cv.default,PostgrestError:uv.default};const{PostgrestClient:bE,PostgrestQueryBuilder:KP,PostgrestFilterBuilder:YP,PostgrestTransformBuilder:QP,PostgrestBuilder:JP,PostgrestError:XP}=xE;class _E{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const SE="2.76.1",kE=`realtime-js/${SE}`,jE="1.0.0",Jc=1e4,EE=1e3,TE=100;var qs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(qs||(qs={}));var ve;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ve||(ve={}));var xt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xt||(xt={}));var Xc;(function(e){e.websocket="websocket"})(Xc||(Xc={}));var Gr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Gr||(Gr={}));class PE{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(t.slice(o,o+s));o=o+s;const l=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class dv{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var G;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(G||(G={}));const yp=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=CE(o,e,t,s),i),{}):{}},CE=(e,t,r,n)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?hv(i,o):Zc(o)},hv=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return OE(t,r)}switch(e){case G.bool:return NE(t);case G.float4:case G.float8:case G.int2:case G.int4:case G.int8:case G.numeric:case G.oid:return AE(t);case G.json:case G.jsonb:return RE(t);case G.timestamp:return $E(t);case G.abstime:case G.date:case G.daterange:case G.int4range:case G.int8range:case G.money:case G.reltime:case G.text:case G.time:case G.timestamptz:case G.timetz:case G.tsrange:case G.tstzrange:return Zc(t);default:return Zc(t)}},Zc=e=>e,NE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},AE=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},RE=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},OE=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>hv(t,a))}return e},$E=e=>typeof e=="string"?e.replace(" ","T"):e,fv=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Nl{constructor(t,r,n={},s=Jc){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var vp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(vp||(vp={}));class Hs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Hs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Hs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(b=>b.presence_ref),p=d.map(b=>b.presence_ref),g=u.filter(b=>p.indexOf(b.presence_ref)<0),w=d.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(a[c]=g),w.length>0&&(l[c]=w)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(wp||(wp={}));var Gs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gs||(Gs={}));var Vt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Vt||(Vt={}));class Nd{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Nl(this,xt.join,this.params,this.timeout),this.rejoinTimer=new dv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ve.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Hs(this),this.broadcastEndpointURL=fv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ve.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Gs.PRESENCE]&&this.bindings[Gs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Vt.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Vt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){t==null||t(Vt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,y=[];for(let v=0;v<b;v++){const m=w[v],{filter:{event:x,schema:S,table:k,filter:j}}=m,E=p&&p[v];if(E&&E.event===x&&E.schema===S&&E.table===k&&E.filter===j)y.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=ve.errored,t==null||t(Vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Vt.SUBSCRIBED);return}}).receive("error",p=>{this.state=ve.errored,t==null||t(Vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ve.joined&&t===Gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ve.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Nl(this,xt.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ve.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Nl(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>TE){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=xt;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,w,b;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(w=p.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var g,w,b,y,v,m;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const x=p.id,S=(g=p.filter)===null||g===void 0?void 0:g.event;return x&&((w=r.ids)===null||w===void 0?void 0:w.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const x=(v=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:w,table:b,commit_timestamp:y,type:v,errors:m}=g;f=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:y,eventType:v,new:{},old:{},errors:m}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===ve.closed}_isJoined(){return this.state===ve.joined}_isJoining(){return this.state===ve.joining}_isLeaving(){return this.state===ve.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Nd.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xt.close,{},t)}_onError(t){this._on(xt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ve.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=yp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=yp(t.columns,t.old_record)),r}}const Al=()=>{},io={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IE=[1e3,2e3,5e3,1e4],DE=1e4,LE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ME{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jc,this.transport=null,this.heartbeatIntervalMs=io.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Al,this.ref=0,this.reconnectTimer=null,this.logger=Al,this.conn=null,this.sendBuffer=[],this.serializer=new PE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>cs(async()=>{const{default:a}=await Promise.resolve().then(()=>fn);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Xc.websocket}`,this.httpEndpoint=fv(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_E.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jE}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case qs.connecting:return Gr.Connecting;case qs.open:return Gr.Open;case qs.closing:return Gr.Closing;default:return Gr.Closed}}isConnected(){return this.connectionState()===Gr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Nd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(EE,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},io.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(xt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([LE],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:kE};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(xt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new dv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},io.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,a,l,c,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Jc,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:io.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:Al,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>IE[d-1]||DE,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ad extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function re(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class VE extends Ad{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eu extends Ad{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Rd=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},BE=()=>O(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield cs(()=>Promise.resolve().then(()=>fn),void 0)).Response:Response}),tu=e=>{if(Array.isArray(e))return e.map(r=>tu(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=tu(n)}),t},FE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Rl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),UE=(e,t,r)=>O(void 0,void 0,void 0,function*(){const n=yield BE();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new VE(Rl(s),i,o))}).catch(s=>{t(new eu(Rl(s),s))}):t(new eu(Rl(e),e))}),zE=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(FE(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Pi(e,t,r,n,s,i){return O(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,zE(t,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>UE(l,a,n))})})}function mi(e,t,r,n){return O(this,void 0,void 0,function*(){return Pi(e,"GET",t,r,n)})}function vt(e,t,r,n,s){return O(this,void 0,void 0,function*(){return Pi(e,"POST",t,n,s,r)})}function ru(e,t,r,n,s){return O(this,void 0,void 0,function*(){return Pi(e,"PUT",t,n,s,r)})}function WE(e,t,r,n){return O(this,void 0,void 0,function*(){return Pi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Od(e,t,r,n,s){return O(this,void 0,void 0,function*(){return Pi(e,"DELETE",t,n,s,r)})}class qE{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return O(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(re(t))return{data:null,error:t};throw t}})}}var pv;class HE{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[pv]="BlobDownloadBuilder",this.promise=null}asStream(){return new qE(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return O(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(re(t))return{data:null,error:t};throw t}})}}pv=Symbol.toStringTag;const GE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class KE{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Rd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return O(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},xp),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),d=yield(t=="PUT"?ru:vt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(re(i))return{data:null,error:i};throw i}})}upload(t,r,n){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return O(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:xp.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield ru(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(re(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return O(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield vt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ad("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}update(t,r,n){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return O(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}copy(t,r,n){return O(this,void 0,void 0,function*(){try{return{data:{path:(yield vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return O(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield vt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return O(this,void 0,void 0,function*(){try{const s=yield vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(t),l=()=>mi(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new HE(l,this.shouldThrowOnError)}info(t){return O(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield mi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:tu(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}exists(t){return O(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield WE(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n)&&n instanceof eu){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return O(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}list(t,r,n){return O(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},GE),r),{prefix:t||""});return{data:yield vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}listV2(t,r){return O(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield vt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const mv="2.76.1",gv={"X-Client-Info":`storage-js/${mv}`};class YE{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gv),r),this.fetch=Rd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return O(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(re(t))return{data:null,error:t};throw t}})}getBucket(t){return O(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}createBucket(t){return O(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(re(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return O(this,void 0,void 0,function*(){try{return{data:yield ru(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(re(n))return{data:null,error:n};throw n}})}emptyBucket(t){return O(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}deleteBucket(t){return O(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}}class QE{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gv),r),this.fetch=Rd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return O(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}listBuckets(t){return O(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,i=yield mi(this.fetch,s,{headers:this.headers});return{data:Array.isArray(i)?i.filter(a=>a.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}deleteBucket(t){return O(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(re(r))return{data:null,error:r};throw r}})}}const $d={"X-Client-Info":`storage-js/${mv}`,"Content-Type":"application/json"};class yv extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Je(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Ol extends yv{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class JE extends yv{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var bp;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(bp||(bp={}));const Id=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},XE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_p=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZE=(e,t,r)=>O(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Ol(_p(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;t(new Ol(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;t(new Ol(a,s,o))}}else t(new JE(_p(e),e))}),eT=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(XE(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function tT(e,t,r,n,s,i){return O(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(r,eT(t,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>ZE(l,a,n))})})}function Xe(e,t,r,n,s){return O(this,void 0,void 0,function*(){return tT(e,"POST",t,n,s,r)})}class rT{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$d),r),this.fetch=Id(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return O(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}getIndex(t,r){return O(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}listIndexes(t){return O(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return O(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}})}}class nT{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$d),r),this.fetch=Id(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return O(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Xe(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}getVectors(t){return O(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}listVectors(t){return O(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Xe(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}queryVectors(t){return O(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}deleteVectors(t){return O(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Xe(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}}class sT{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$d),r),this.fetch=Id(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return O(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}getBucket(t){return O(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}listBuckets(){return O(this,arguments,void 0,function*(t={}){try{return{data:yield Xe(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}deleteBucket(t){return O(this,void 0,void 0,function*(){try{return{data:(yield Xe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}})}}class iT extends sT{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new oT(this.url,this.headers,t,this.fetch)}}class oT extends rT{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return O(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return O(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return O(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return O(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new aT(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class aT extends nT{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return O(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return O(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return O(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return O(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return O(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class lT extends YE{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new KE(this.url,this.headers,t,this.fetch)}get vectors(){return new iT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new QE(this.url+"/iceberg",this.headers,this.fetch)}}const cT="2.76.1";let Ns="";typeof Deno<"u"?Ns="deno":typeof document<"u"?Ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ns="react-native":Ns="node";const uT={"X-Client-Info":`supabase-js-${Ns}/${cT}`},dT={headers:uT},hT={schema:"public"},fT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pT={},mT=e=>{let t;return e?t=e:typeof fetch>"u"?t=Zy:t=fetch,(...r)=>t(...r)},gT=()=>typeof Headers>"u"?ev:Headers,yT=(e,t,r)=>{const n=mT(r),s=gT();return async(i,o)=>{var a;const l=(a=await t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function vT(e){return e.endsWith("/")?e:e+"/"}function wT(e,t){var r,n;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function xT(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const vv="2.76.1",Sn=30*1e3,nu=3,$l=nu*Sn,bT="http://localhost:9999",_T="supabase.auth.token",ST={"X-Client-Info":`gotrue-js/${vv}`},su="X-Supabase-Api-Version",wv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jT=10*60*1e3;class gi extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function D(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ET extends gi{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function TT(e){return D(e)&&e.name==="AuthApiError"}class Kr extends gi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Dr extends gi{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class or extends Dr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function PT(e){return D(e)&&e.name==="AuthSessionMissingError"}class yn extends Dr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oo extends Dr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ao extends Dr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CT(e){return D(e)&&e.name==="AuthImplicitGrantRedirectError"}class Sp extends Dr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iu extends Dr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Il(e){return D(e)&&e.name==="AuthRetryableFetchError"}class kp extends Dr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ou extends Dr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jp=` 	
\r=`.split(""),NT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jp.length;t+=1)e[jp[t].charCodeAt(0)]=-2;for(let t=0;t<oa.length;t+=1)e[oa[t].charCodeAt(0)]=t;return e})();function Ep(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(oa[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(oa[n]),t.queuedBits-=6}}function xv(e,t,r){const n=NT[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Tp(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{OT(o,n,r)};for(let o=0;o<e.length;o+=1)xv(e.charCodeAt(o),s,i);return t.join("")}function AT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function RT(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}AT(n,t)}}function OT(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Gn(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)xv(e.charCodeAt(s),r,n);return new Uint8Array(t)}function $T(e){const t=[];return RT(e,r=>t.push(r)),new Uint8Array(t)}function Zr(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Ep(s,r,n)),Ep(null,r,n),t.join("")}function IT(e){return Math.round(Date.now()/1e3)+e}function DT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ye=()=>typeof window<"u"&&typeof document<"u",Mr={tested:!1,writable:!1},bv=()=>{if(!Ye())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mr.tested)return Mr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Mr.tested=!0,Mr.writable=!0}catch{Mr.tested=!0,Mr.writable=!1}return Mr.writable};function LT(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const _v=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>cs(async()=>{const{default:n}=await Promise.resolve().then(()=>fn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},MT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",kn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Vr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},sr=async(e,t)=>{await e.removeItem(t)};class Da{constructor(){this.promise=new Da.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Da.promiseConstructor=Promise;function Dl(e){const t=e.split(".");if(t.length!==3)throw new ou("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!kT.test(t[n]))throw new ou("JWT not in base64url format");return{header:JSON.parse(Tp(t[0])),payload:JSON.parse(Tp(t[1])),signature:Gn(t[2]),raw:{header:t[0],payload:t[1]}}}async function VT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function BT(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function FT(e){return("0"+e.toString(16)).substr(-2)}function UT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,FT).join("")}async function zT(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function WT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await zT(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vn(e,t,r=!1){const n=UT();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await kn(e,`${t}-code-verifier`,s);const i=await WT(n);return[i,n===i?"plain":"s256"]}const qT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HT(e){const t=e.headers.get(su);if(!t||!t.match(qT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function GT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function KT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wn(e){if(!YT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ll(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Pp(e){return JSON.parse(JSON.stringify(e))}const qr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QT=[502,503,504];async function Cp(e){var t;if(!MT(e))throw new iu(qr(e),0);if(QT.includes(e.status))throw new iu(qr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Kr(qr(i),i)}let n;const s=HT(e);if(s&&s.getTime()>=wv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new kp(qr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new or}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new kp(qr(r),e.status,r.weak_password.reasons);throw new ET(qr(r),e.status||500,n)}const JT=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function B(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[su]||(i[su]=wv["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await XT(e,t,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function XT(e,t,r,n,s,i){const o=JT(t,n,s,i);let a;try{a=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new iu(qr(l),0)}if(a.ok||await Cp(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Cp(l)}}function gt(e){var t;let r=null;tP(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IT(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Np(e){const t=gt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function pr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ZT(e){return{data:e,error:null}}function eP(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=ls(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ap(e){return e}function tP(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ml=["global","local","others"];class rP{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=_v(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ml[0]){if(Ml.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ml.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:pr})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ls(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:eP,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(D(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pr})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ap});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(D(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){wn(t);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pr})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){wn(t);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:pr})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){wn(t);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:pr})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){wn(t.userId);try{const{data:r,error:n}=await B(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteFactor(t){wn(t.userId),wn(t.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await B(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ap});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(D(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await B(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await B(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}}function Rp(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const xn={debug:!!(globalThis&&bv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class nP extends Sv{}async function sP(e,t,r){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new nP(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function iP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kv(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function oP(e){return parseInt(e,16)}function aP(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function lP(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=kv(e.address),g=u?`${u}://${n}`:n,w=e.statement?`${e.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${p}

${w}`;let y=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),l&&(y+=`
Request ID: ${l}`),c){let v=`
Resources:`;for(const m of c){if(!m||typeof m!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${m}`);v+=`
- ${m}`}y+=v}return`${b}
${y}`}class pe extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class aa extends pe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function cP({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(jv(o)){if(i.rp.id!==o)return new pe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function uP({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(jv(n)){if(r.rpId!==n)return new pe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class dP{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const hP=new dP;function fP(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ls(e,["challenge","user","excludeCredentials"]),i=Gn(t).buffer,o=Object.assign(Object.assign({},r),{id:Gn(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Gn(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function pP(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ls(e,["challenge","allowCredentials"]),s=Gn(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Gn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function mP(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gP(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zr(new Uint8Array(s.authenticatorData)),clientDataJSON:Zr(new Uint8Array(s.clientDataJSON)),signature:Zr(new Uint8Array(s.signature)),userHandle:s.userHandle?Zr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jv(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Op(){var e,t;return!!(Ye()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function yP(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new aa("Browser returned unexpected credential type",t)}:{data:null,error:new aa("Empty credential response",t)}}catch(t){return{data:null,error:cP({error:t,options:e})}}}async function vP(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new aa("Browser returned unexpected credential type",t)}:{data:null,error:new aa("Empty credential response",t)}}catch(t){return{data:null,error:uP({error:t,options:e})}}}const wP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},xP={userVerification:"preferred",hints:["security-key"]};function la(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const a=n[i];t(a)?n[i]=la(a,o):n[i]=la(o)}else n[i]=o}return n}function bP(e,t){return la(wP,e,t||{})}function _P(e,t){return la(xP,e,t||{})}class SP{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:a};const l=s??hP.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=bP(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await yP({publicKey:c,signal:l});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=_P(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await vP(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new Kr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new gi("rpId is required for WebAuthn authentication")};try{if(!Op())return{data:null,error:new Kr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new Kr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new gi("rpId is required for WebAuthn registration")};try{if(!Op())return{data:null,error:new Kr("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return D(o)?{data:null,error:o}:{data:null,error:new Kr("Unexpected error in register",o)}}}}iP();const kP={url:bT,storageKey:_T,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ST,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $p(e,t,r){return await r()}const bn={};class yi{get jwks(){var t,r;return(r=(t=bn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=bn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yi.nextInstanceID,yi.nextInstanceID+=1,this.instanceID>0&&Ye()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},kP),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new rP({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=_v(s.fetch),this.lock=s.lock||$p,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ye()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=sP:this.lock=$p,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new SP(this)},this.persistSession?(s.storage?this.storage=s.storage:bv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Rp(this.memoryStorage)),Ye()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=LT(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ye()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),CT(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?{error:r}:{error:new Kr("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:gt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:u,password:d,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await vn(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:gt})}else if("phone"in t){const{phone:u,password:d,options:f}=t;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:gt})}else throw new oo("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:a}=t;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Np})}else if("phone"in t){const{phone:i,password:o,options:a}=t;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Np})}else throw new oo("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new yn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,a,l,c,u,d,f;let p,g;if("message"in t)p=t.message,g=t.signature;else{const{chain:w,wallet:b,statement:y,options:v}=t;let m;if(Ye())if(typeof b=="object")m=b;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")m=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=b}const x=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),S=await m.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=kv(S[0]);let j=(n=v==null?void 0:v.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const N=await m.request({method:"eth_chainId"});j=oP(N)}const E={domain:x.host,address:k,statement:y,uri:x.href,version:"1",chainId:j,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=lP(E),g=await m.request({method:"personal_sign",params:[aP(p),k]})}try{const{data:w,error:b}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:gt});if(b)throw b;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new yn}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:b})}catch(w){if(D(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var r,n,s,i,o,a,l,c,u,d,f,p;let g,w;if("message"in t)g=t.message,w=t.signature;else{const{chain:b,wallet:y,statement:v,options:m}=t;let x;if(Ye())if(typeof y=="object")x=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))x=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const S=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const k=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let j;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")j=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)j=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)g=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),w=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const k=await x.signMessage(new TextEncoder().encode(g),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=k}}try{const{data:b,error:y}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Zr(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:gt});if(y)throw y;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new yn}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:y})}catch(b){if(D(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Vr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:gt});if(await sr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new yn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(D(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,a=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:gt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new yn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vn(this.storage,this.storageKey));const{error:d}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new oo("You must provide either an email or phone number.")}catch(a){if(D(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:gt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await vn(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ZT})}catch(i){if(D(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new or;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await B(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:a}=await B(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new oo("You must provide either an email or phone number and a type")}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Vr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<$l:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Vr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ll()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:pr}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new or}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:pr})})}catch(r){if(D(r))return PT(r)&&(await this._removeSession(),await sr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new or;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await vn(this.storage,this.storageKey));const{data:c,error:u}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:pr});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new or;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Dl(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(D(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:a}=r;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new or;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ye())throw new ao("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ao(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Sp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ao("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Sp("No code detected.");const{data:v,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new ao("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=Sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const g=f-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(D(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Vr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(TT(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await sr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=DT(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await vn(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(D(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ye()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(D(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=t,d=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gt}),{data:f,error:p}=d;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new yn}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:p})}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await BT(async s=>(s>0&&await VT(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:gt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Il(i)&&Date.now()+o-n<Sn})}catch(n){if(this._debug(r,"error",n),D(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ye()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Vr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Vr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await kn(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ll()}else if(s&&!s.user&&!s.user){const o=await Vr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await sr(this.storage,this.storageKey+"-user"),await kn(this.storage,this.storageKey,s)):s.user=Ll()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<$l;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${$l}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Il(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Da;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new or;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),D(i)){const o={data:null,error:i};return Il(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await kn(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Pp(s);await kn(this.storage,this.storageKey,i)}else{const s=Pp(r);await kn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await sr(this.storage,this.storageKey),await sr(this.storage,this.storageKey+"-code-verifier"),await sr(this.storage,this.storageKey+"-user"),this.userStorage&&await sr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Sn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Sn}ms, refresh threshold is ${nu} ticks`),s<=nu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Sv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await vn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await B(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?mP(t.webauthn.credential_response):gP(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const o=await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:fP(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:pP(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Dl(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+jT>s)return n;const{data:i,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Dl(n);r!=null&&r.allowExpired||GT(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=KT(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,$T(`${a}.${l}`)))throw new ou("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}}yi.nextInstanceID=0;const jP=yi;class EP extends jP{constructor(t){super(t)}}class TP{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const a=xT(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:hT,realtime:pT,auth:Object.assign(Object.assign({},fT),{storageKey:l}),global:dT},u=wT(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=yT(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new bE(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new lT(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new fE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new EP({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ME(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const PP=(e,t,r)=>new TP(e,t,r);function CP(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}CP()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const NP="https://dlbhoeewbrhtwxnjeqwq.supabase.co",AP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsYmhvZWV3YnJodHd4bmplcXdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NDUwODYsImV4cCI6MjA3NjAyMTA4Nn0.rF8qrCxDM4A8V2xG2DtMHMGTkCBljLJGFuxcQwnRnzw",ce=PP(NP,AP),La=()=>{const[e,t]=_.useState(null),[r,n]=_.useState(!1),[s,i]=_.useState(!0),o=_.useCallback(async d=>{var p;if(!d)return null;const{data:f}=await ce.from("users").select("user_name, user_role").eq("id",d.id).single();return{id:d.id,email:d.email,userName:(f==null?void 0:f.user_name)||((p=d.user_metadata)==null?void 0:p.user_name),userRole:(f==null?void 0:f.user_role)||"USER",createdAt:d.created_at}},[]);_.useEffect(()=>{(async()=>{try{const{data:{session:p}}=await ce.auth.getSession();if(p!=null&&p.user){const g=await o(p.user);t(g),n(!0)}}catch(p){console.error("Session check failed:",p)}finally{i(!1)}})();const{data:{subscription:f}}=ce.auth.onAuthStateChange(async(p,g)=>{if(g!=null&&g.user){const w=await o(g.user);t(w),n(!0)}else t(null),n(!1)});return()=>{f.unsubscribe()}},[o]);const a=_.useCallback(async(d,f)=>{try{i(!0);const{data:p,error:g}=await ce.auth.signInWithPassword({email:d,password:f});if(g)throw g;return p}catch(p){throw console.error("Sign in failed:",p),p}finally{i(!1)}},[]),l=_.useCallback(async()=>{try{i(!0);const{data:d,error:f}=await ce.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(f)throw f;return d}catch(d){throw console.error("Google sign in failed:",d),d}finally{i(!1)}},[]),c=_.useCallback(async(d,f,p)=>{try{i(!0);const{data:g,error:w}=await ce.auth.signUp({email:d,password:f,options:{data:{user_name:p}}});if(w)throw w;return g.user&&await ce.from("users").insert({id:g.user.id,email:g.user.email,user_name:p,user_role:"USER"}),g}catch(g){throw console.error("Sign up failed:",g),g}finally{i(!1)}},[]),u=_.useCallback(async()=>{try{i(!0);const{error:d}=await ce.auth.signOut();if(d)throw d}catch(d){throw console.error("Sign out failed:",d),d}finally{i(!1)}},[]);return{user:e,isAuthenticated:r,loading:s,userRole:e==null?void 0:e.userRole,signIn:a,signInWithGoogle:l,signUp:c,signOut:u}},RP=({children:e,requireAuth:t=!1,showUserInfo:r=!0})=>{const{user:n,isAuthenticated:s,loading:i,signIn:o,signOut:a}=La();return i?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-400 via-pink-400 to-red-400",children:h.jsx("div",{className:"text-white text-2xl font-bold",children:"Loading..."})}):t&&!s?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-400 via-pink-400 to-red-400",children:h.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-3xl p-12 shadow-2xl text-center max-w-md mx-4",children:[h.jsx("div",{className:"text-8xl mb-6",children:""}),h.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Welcome to Kids Quiz Adventure!"}),h.jsx("p",{className:"text-gray-600 mb-8",children:"Sign in to save your progress, unlock achievements, and continue your learning journey!"}),h.jsx(T.button,{onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 px-8 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-shadow",children:"Sign In to Continue"}),h.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Your progress will be saved and synced across devices"})]})}):h.jsxs("div",{className:"min-h-screen",children:[r&&s&&n&&h.jsx(T.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:h.jsx("div",{className:"max-w-7xl mx-auto px-6 py-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full flex items-center justify-center",children:h.jsx(Wj,{size:20,className:"text-white"})}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-white font-semibold",children:["Welcome back, ",n.userName,"!"]}),h.jsx("div",{className:"text-white/70 text-sm",children:n.userRole==="ADMIN"?"Administrator":"Learning Explorer"})]})]}),h.jsxs("div",{className:"flex items-center space-x-6",children:[h.jsxs("div",{className:"hidden md:flex items-center space-x-4 text-white/90",children:[h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(ky,{size:16,className:"text-yellow-300"}),h.jsx("span",{className:"text-sm font-medium",children:"Stars"})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(jy,{size:16,className:"text-orange-300"}),h.jsx("span",{className:"text-sm font-medium",children:"Badges"})]}),h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx(kd,{size:16,className:"text-green-300"}),h.jsx("span",{className:"text-sm font-medium",children:"Level"})]})]}),h.jsxs(T.button,{onClick:a,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-xl transition-colors",children:[h.jsx(Ij,{size:16}),h.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})]})})}),e]})},OP=()=>{const{user:e,isAuthenticated:t}=La(),[r,n]=_.useState({stars:0,badges:0,level:1,totalCorrect:0,totalQuestions:0,streakDays:0,achievements:[],categoryProgress:{}}),[s,i]=_.useState(!0),o=_.useCallback(async()=>{if(!t||!e){const d=localStorage.getItem("quiz_progress");d&&n(JSON.parse(d)),i(!1);return}try{i(!0);const{data:d,error:f}=await ce.from("user_progress").select("*").eq("user_id",e.userId).single();d&&!f?n({stars:d.stars||0,badges:d.badges||0,level:d.level||1,totalCorrect:d.total_correct||0,totalQuestions:d.total_questions||0,streakDays:d.streak_days||0,achievements:d.achievements||[],categoryProgress:d.category_progress||{}}):f&&f.code==="PGRST116"&&await a()}catch(d){console.error("Error loading progress:",d),Hr.error("Failed to load progress")}finally{i(!1)}},[e,t]),a=async()=>{if(e)try{const{error:d}=await ce.from("user_progress").insert({user_id:e.userId,stars:0,badges:0,level:1,total_correct:0,total_questions:0,streak_days:0,achievements:[],category_progress:{}});if(d)throw d}catch(d){console.error("Error initializing progress:",d)}},l=_.useCallback(async(d,f)=>{const p={...r,totalQuestions:r.totalQuestions+1,totalCorrect:d?r.totalCorrect+1:r.totalCorrect,stars:d?r.stars+1:r.stars};if(p.badges=Math.floor(p.stars/10),p.level=Math.floor(p.stars/50)+1,f){const g=p.categoryProgress[f]||{correct:0,total:0};g.total+=1,d&&(g.correct+=1),p.categoryProgress[f]=g}if(n(p),t&&e)try{const{error:g}=await ce.from("user_progress").upsert({user_id:e.userId,stars:p.stars,badges:p.badges,level:p.level,total_correct:p.totalCorrect,total_questions:p.totalQuestions,streak_days:p.streakDays,achievements:p.achievements,category_progress:p.categoryProgress,last_active:new Date().toISOString()});if(g)throw g}catch(g){console.error("Error updating progress:",g),Hr.error("Failed to save progress")}else localStorage.setItem("quiz_progress",JSON.stringify(p));return p},[r,e,t]),c=_.useCallback(async d=>{if(!(!t||!e))try{const{error:f}=await ce.from("quiz_results").insert({user_id:e.userId,category:d.category,question_id:d.questionId,question_text:d.questionText,selected_answer:d.selectedAnswer,correct_answer:d.correctAnswer,is_correct:d.isCorrect,response_time_ms:d.responseTimeMs,difficulty:d.difficulty,session_id:d.sessionId,answered_at:new Date().toISOString()});if(f)throw f}catch(f){console.error("Error saving quiz result:",f)}},[e,t]),u=_.useCallback(async()=>{const d={stars:0,badges:0,level:1,totalCorrect:0,totalQuestions:0,streakDays:0,achievements:[],categoryProgress:{}};if(n(d),t&&e)try{const{error:f}=await ce.from("user_progress").upsert({user_id:e.userId,...d,total_correct:d.totalCorrect,total_questions:d.totalQuestions,streak_days:d.streakDays,category_progress:d.categoryProgress,last_active:new Date().toISOString()});if(f)throw f;Hr.success("Progress reset successfully")}catch(f){console.error("Error resetting progress:",f),Hr.error("Failed to reset progress")}else localStorage.setItem("quiz_progress",JSON.stringify(d)),Hr.success("Progress reset successfully")},[e,t]);return _.useEffect(()=>{o()},[o]),{progress:r,loading:s,updateProgress:l,saveQuizResult:c,resetProgress:u,loadProgress:o}},$P=()=>{const{user:e,isAuthenticated:t}=La(),[r,n]=_.useState({}),[s,i]=_.useState(!0),o=_.useCallback(async()=>{if(!t||!e){const f=localStorage.getItem("story_progress");f&&n(JSON.parse(f)),i(!1);return}try{i(!0);const{data:f,error:p}=await ce.from("user_adventure_progress").select("*").eq("user_id",e.userId);if(f&&!p){const g={};f.forEach(w=>{g[w.adventure_id]={adventureId:w.adventure_id,currentChapterId:w.current_chapter_id,completedChapters:w.chapters_completed||[],chapterScores:w.chapter_scores||{},totalStars:w.total_stars||0,completionPercentage:w.completion_percentage||0,startedAt:w.started_at,lastPlayed:w.last_played,completedAt:w.completed_at}}),n(g)}}catch(f){console.error("Error loading story progress:",f),Hr.error("Failed to load story progress")}finally{i(!1)}},[e,t]),a=_.useCallback(async(f,p)=>{const g=r[f.id];if(g&&g.currentChapterId){const b=f.chapters.find(y=>y.id===g.currentChapterId);if(b&&p>=b.unlockRequirement)return b}const w=(g==null?void 0:g.completedChapters)||[];for(const b of f.chapters)if(p>=b.unlockRequirement&&!w.includes(b.id))return b;return f.chapters[f.chapters.length-1]||null},[r]),l=_.useCallback(async(f,p,g)=>{const w=g.correct,b=r[f]||{adventureId:f,currentChapterId:null,completedChapters:[],chapterScores:{},totalStars:0,completionPercentage:0,startedAt:new Date().toISOString(),lastPlayed:new Date().toISOString(),completedAt:null},y={...b,currentChapterId:p,chapterScores:{...b.chapterScores,[p]:{...g,stars:w}},lastPlayed:new Date().toISOString()};if(y.completedChapters.includes(p)||y.completedChapters.push(p),y.totalStars=Object.values(y.chapterScores).reduce((v,m)=>v+m.stars,0),n(v=>({...v,[f]:y})),t&&e)try{const{error:v}=await ce.from("user_adventure_progress").upsert({user_id:e.userId,adventure_id:f,current_chapter_id:y.currentChapterId,chapters_completed:y.completedChapters,chapter_scores:y.chapterScores,total_stars:y.totalStars,completion_percentage:y.completionPercentage,started_at:y.startedAt,last_played:y.lastPlayed,completed_at:y.completedAt});if(v)throw v}catch(v){console.error("Error updating adventure progress:",v),Hr.error("Failed to save story progress")}else localStorage.setItem("story_progress",JSON.stringify({...r,[f]:y}));return y},[r,e,t]),c=_.useCallback(f=>r[f]||null,[r]),u=_.useCallback((f,p)=>p>=f.unlockRequirement,[]),d=_.useCallback((f,p)=>f.chapters.filter(g=>p>=g.unlockRequirement),[]);return _.useEffect(()=>{o()},[o]),{storyProgress:r,loading:s,getCurrentChapter:a,updateAdventureProgress:l,getAdventureProgress:c,isChapterUnlocked:u,getUnlockedChapters:d,loadStoryProgress:o}};class IP{constructor(){mn(this,"adventuresCache",new Map);mn(this,"chaptersCache",new Map)}async getAdventureByCategory(t){try{const r=`category_${t}`;if(this.adventuresCache.has(r))return this.adventuresCache.get(r);const{data:n,error:s}=await ce.from("adventures").select("*").eq("category_id",t).eq("is_active",!0).single();if(n&&!s){const{data:o,error:a}=await ce.from("chapters").select("*").eq("adventure_id",n.id).eq("is_active",!0).order("chapter_order");if(!a&&o){const l=this.mapDatabaseToAdventure(n,o);return this.adventuresCache.set(r,l),l}}const i=_n.find(o=>o.categoryId===t);return i?(this.adventuresCache.set(r,i),i):null}catch(r){return console.error("Error in getAdventureByCategory:",r),_n.find(s=>s.categoryId===t)||null}}async getCurrentChapter(t,r,n){try{if(n){const{data:s,error:i}=await ce.from("user_adventure_progress").select("current_chapter_id, chapters_completed").eq("user_id",n).eq("adventure_id",t.id).single();if(s&&!i){if(s.current_chapter_id){const a=t.chapters.find(l=>l.id===s.current_chapter_id);if(a&&r>=a.unlockRequirement)return a}const o=s.chapters_completed||[];for(const a of t.chapters)if(r>=a.unlockRequirement&&!o.includes(a.id))return a}}for(const s of t.chapters)if(r>=s.unlockRequirement)return s;return t.chapters[0]||null}catch(s){return console.error("Error in getCurrentChapter:",s),t.chapters.find(i=>r>=i.unlockRequirement)||t.chapters[0]||null}}async getAllAdventures(){try{const{data:t,error:r}=await ce.from("adventures").select("*").eq("is_active",!0).order("category_id");if(t&&!r){const n=[];for(const s of t){const{data:i,error:o}=await ce.from("chapters").select("*").eq("adventure_id",s.id).eq("is_active",!0).order("chapter_order");if(!o&&i){const a=this.mapDatabaseToAdventure(s,i);n.push(a)}}if(n.length>0)return n}return _n}catch(t){return console.error("Error fetching all adventures:",t),_n}}async getUnlockedChapters(t,r){return t.chapters.filter(n=>r>=n.unlockRequirement)}mapDatabaseToAdventure(t,r){const n=r.map(i=>({id:i.id,title:i.title,description:i.description||"",setting:i.setting||"",backgroundImage:i.background_image||"",unlockRequirement:i.unlock_requirement,questionsNeeded:i.questions_needed,completionReward:i.completion_reward||""})),s=t.character_data||{id:t.character_id,name:"Adventure Character",avatar:"",personality:"friendly",catchphrase:"Let's learn together!",introduction:"Welcome to this adventure!",encouragement:["You're doing great!"],celebration:["Excellent work!"],comfort:["Keep trying!"]};return{id:t.id,categoryId:t.category_id,title:t.title,description:t.description||"",character:s,chapters:n,finalReward:t.final_reward||""}}clearCache(){this.adventuresCache.clear(),this.chaptersCache.clear()}async syncStaticDataToDatabase(){try{for(const t of _n){const{error:r}=await ce.from("adventures").upsert({id:t.id,category_id:t.categoryId,title:t.title,description:t.description,character_id:t.character.id,character_data:t.character,final_reward:t.finalReward,unlock_requirement:0,is_active:!0});if(r){console.error("Error syncing adventure:",t.id,r);continue}for(let n=0;n<t.chapters.length;n++){const s=t.chapters[n],{error:i}=await ce.from("chapters").upsert({id:s.id,adventure_id:t.id,chapter_order:n+1,title:s.title,description:s.description,setting:s.setting,background_image:s.backgroundImage,unlock_requirement:s.unlockRequirement,questions_needed:s.questionsNeeded,completion_reward:s.completionReward,is_active:!0});i&&console.error("Error syncing chapter:",s.id,i)}}console.log("Static data synced to database successfully")}catch(t){console.error("Error syncing static data to database:",t)}}}const DP=new IP,LP=[{id:"spark",name:"Spark",avatar:"",personality:"energetic",level:1,experience:0,mood:"excited",preferences:{favoriteCategory:"sounds",encouragementStyle:"enthusiastic",celebrationLevel:"explosive"},relationships:{trustLevel:50,playfulness:80,learningBond:30},memories:{bestSubject:"sounds",strugglingArea:"shapes",lastPlayTime:new Date,totalSessions:0,favoriteTime:"morning"}},{id:"luna",name:"Luna",avatar:"",personality:"gentle",level:1,experience:0,mood:"curious",preferences:{favoriteCategory:"colors",encouragementStyle:"gentle",celebrationLevel:"moderate"},relationships:{trustLevel:70,playfulness:40,learningBond:60},memories:{bestSubject:"colors",strugglingArea:"animals",lastPlayTime:new Date,totalSessions:0,favoriteTime:"evening"}},{id:"sage",name:"Sage",avatar:"",personality:"wise",level:1,experience:0,mood:"curious",preferences:{favoriteCategory:"shapes",encouragementStyle:"patient",celebrationLevel:"subtle"},relationships:{trustLevel:90,playfulness:30,learningBond:80},memories:{bestSubject:"shapes",strugglingArea:"fruits",lastPlayTime:new Date,totalSessions:0,favoriteTime:"afternoon"}}],MP=(e,t,r)=>{var a,l,c;const n={correct:{cheerful:["Hooray! That was absolutely amazing! ","You're getting so good at this! I'm so proud! ","Wow! You're like a learning superhero! "],wise:["Excellent thinking! Your mind is growing stronger! ","Wonderful! You understood that perfectly! ","That's the spirit of a true learner! Keep exploring! "],playful:["Yippee! That was so much fun! Let's do another! ","You nailed it! High five! ","Awesome sauce! You're on fire! "],gentle:["Beautiful work, my friend. You're learning so well! ","That's right! You should feel very proud! ","Lovely! Your effort is really paying off! "],energetic:["BOOM! That was incredible! You're unstoppable! ","YES! You're crushing it! Keep going! ","WOW! That was lightning fast! Amazing! "]},incorrect:{cheerful:["That's okay! Learning is all about trying! Let's think together! ","No worries! Every mistake helps us grow! You've got this! ","That's part of learning! I believe in you! "],wise:["Hmm, let's think about this differently. What do you notice? ","Learning happens step by step. Let's try another approach! ","Every great learner makes mistakes. They help us understand better! "],playful:["Oopsie! That's okay - let's play with this idea some more! ","No biggie! Let's have another go at it! ","That's alright! Learning is like a fun puzzle! "],gentle:["It's perfectly okay, dear. Let's take our time and try again! ","That's fine! Learning takes patience, and you're doing great! ","Don't worry at all. Let's explore this together gently! "],energetic:["No problem! Let's power through this together! ","That's cool! Mistakes are just practice in disguise! ","All good! Let's charge ahead and try again! "]},greeting:{cheerful:["Hello there, sunshine! Ready for some fun learning? ","Hi buddy! I've been waiting to learn with you! ","Welcome back! I missed you! Let's have an amazing time! "],wise:["Greetings, young scholar! What shall we discover today? ","Hello! I sense great curiosity in you today! ","Welcome! Your mind is ready for new knowledge! "],playful:["Hey there, learning buddy! Time to play and learn! ","Hiya! Let's make learning super fun today! ","Hello! Ready for some awesome learning adventures? "],gentle:["Hello, dear friend. I'm so happy you're here! ","Hi there! Take your time, we'll learn together peacefully! ","Welcome! Let's have a gentle, wonderful learning time! "],energetic:["HEY THERE! Ready to LEARN and GROW? Let's GO! ","HELLO! Time for some HIGH-ENERGY learning! ","HI! Let's make today AMAZING with super learning! "]},goodbye:{cheerful:["See you soon! Keep being awesome! "],wise:["Farewell, young scholar! Until we meet again! "],playful:["Bye bye! Can't wait to play again! "],gentle:["Goodbye, dear friend. Rest well! "],energetic:["BYE! You were AMAZING today! "]},encouragement:{cheerful:["You're doing great! Keep it up! "],wise:["Your progress is remarkable! "],playful:["Woohoo! You're a star! "],gentle:["You're doing wonderfully! "],energetic:["KEEP GOING! You're AWESOME! "]},rest:{cheerful:["I'll rest here while you think... "],wise:["Taking a moment to ponder... "],playful:["Just chilling for a bit! "],gentle:["Resting peacefully... "],energetic:["Recharging my energy! "]},idle:{cheerful:["Ready when you are! "],wise:["Awaiting your next question... "],playful:["Let's go! "],gentle:["Take your time... "],energetic:["READY TO GO! "]}},s=((a=n[t])==null?void 0:a[e.personality])||((l=n.idle)==null?void 0:l[e.personality])||["Great job!"],i=s[Math.floor(Math.random()*s.length)],o={correct:["bounce","dance","cheer","spin"],incorrect:["think","bounce"],greeting:["bounce","dance"],goodbye:["bounce"],encouragement:["cheer","bounce"],rest:["sleep"],idle:["bounce"]};return{type:t,text:i,animation:((c=o[t])==null?void 0:c[Math.floor(Math.random()*o[t].length)])||"bounce",emotion:e.mood,voiceTone:e.personality==="energetic"?"excited":e.personality==="gentle"?"gentle":e.personality==="wise"?"curious":"excited"}},VP=(e,t)=>{const r={...e};return r.experience+=t.correct?10:3,r.experience>=r.level*100&&(r.level+=1,r.experience=0),t.correct&&(r.relationships.trustLevel=Math.min(100,r.relationships.trustLevel+2),r.relationships.learningBond=Math.min(100,r.relationships.learningBond+3)),r.memories.totalSessions+=1,r.memories.lastPlayTime=new Date,t.correct&&Math.random()>.7&&(r.memories.bestSubject=t.category),!t.correct&&Math.random()>.8&&(r.memories.strugglingArea=t.category),t.correct?r.mood=r.relationships.learningBond>70?"proud":"happy":r.mood="curious",r},BP=({buddy:e,onBuddyUpdate:t,context:r,performanceData:n,soundEnabled:s,highContrast:i})=>{const{speak:o}=Ir(),[a,l]=_.useState(null),[c,u]=_.useState(!0),[d,f]=_.useState("active"),[p,g]=_.useState(new Date),w=_.useCallback(()=>{const m=MP(e,r);l(m),s&&m.text&&o(m.text),m.animation==="sleep"?f("sleeping"):m.animation==="think"?f("thinking"):m.animation==="dance"||m.animation==="cheer"?f("celebrating"):f("active"),g(new Date)},[e,r,n,s,o]);_.useEffect(()=>{r!=="idle"&&w()},[r,w]),_.useEffect(()=>{if(n&&(r==="correct"||r==="incorrect")){const m=VP(e,{correct:r==="correct",category:n.category,timeSpent:n.timeSpent});t(m)}},[n,r,e,t]),_.useEffect(()=>{const x=setInterval(()=>{(new Date().getTime()-p.getTime())/1e3/60>5&&d!=="sleeping"&&(f("sleeping"),l({type:"rest",text:"I'll just rest here while you think... ",animation:"sleep",emotion:"sleepy",voiceTone:"gentle"}))},3e4);return()=>clearInterval(x)},[p,d]);const b=()=>({idle:{y:[0,-5,0],rotate:[0,2,-2,0],scale:1,transition:{duration:3,repeat:1/0,ease:"easeInOut"}},bounce:{y:[0,-20,0],scale:[1,1.1,1],transition:{duration:.6,repeat:2}},dance:{rotate:[0,10,-10,10,-10,0],scale:[1,1.2,1.1,1.2,1],y:[0,-10,-5,-10,0],transition:{duration:1.5,repeat:1}},spin:{rotate:[0,360],scale:[1,1.3,1],transition:{duration:1,repeat:1}},sleep:{y:[0,3,0],opacity:[1,.7,1],scale:.9,transition:{duration:2,repeat:1/0,ease:"easeInOut"}},think:{rotate:[0,5,-5,0],y:[0,-3,0],transition:{duration:1,repeat:3}},cheer:{y:[0,-25,-10,-25,0],rotate:[0,15,-15,15,0],scale:[1,1.2,1.1,1.2,1],transition:{duration:2,repeat:1}}}),y=()=>({happy:"",excited:"",sleepy:"",curious:"",proud:""})[e.mood]||"",v=()=>"".repeat(Math.min(e.level,5));return h.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[h.jsx(tt,{children:c&&h.jsxs(T.div,{initial:{opacity:0,scale:0,x:100},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:0,x:100},className:"relative",children:[h.jsx(tt,{children:a&&a.text&&h.jsxs(T.div,{initial:{opacity:0,scale:0,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0,y:20},className:`absolute bottom-full right-0 mb-4 max-w-xs p-4 rounded-2xl shadow-lg ${i?"bg-black border-2 border-yellow-400 text-white":"bg-white text-gray-800 border-2 border-purple-200"}`,children:[h.jsx("div",{className:"text-sm font-medium",children:a.text}),h.jsx("div",{className:`absolute top-full right-4 w-0 h-0 ${i?"border-l-8 border-r-8 border-t-8 border-transparent border-t-yellow-400":"border-l-8 border-r-8 border-t-8 border-transparent border-t-purple-200"}`})]})}),h.jsxs(T.div,{className:`relative w-20 h-20 rounded-full flex items-center justify-center cursor-pointer ${i?"bg-black border-4 border-yellow-400":"bg-gradient-to-br from-purple-400 to-pink-400 shadow-lg"}`,variants:b(),animate:(a==null?void 0:a.animation)||"idle",onClick:()=>{w(),g(new Date)},whileHover:{scale:1.05},whileTap:{scale:.95},children:[h.jsxs("div",{className:"text-4xl relative",children:[e.avatar,h.jsx("div",{className:"absolute -top-1 -right-1 text-lg",children:y()}),d==="sleeping"&&h.jsx(T.div,{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 text-lg",animate:{opacity:[0,1,0]},transition:{duration:1,repeat:1/0},children:""})]}),h.jsx("div",{className:`absolute -bottom-2 left-1/2 transform -translate-x-1/2 text-xs ${i?"text-yellow-400":"text-white"}`,children:v()}),h.jsx("div",{className:`absolute -bottom-1 left-0 right-0 h-1 rounded-full overflow-hidden ${i?"bg-gray-700":"bg-white/30"}`,children:h.jsx(T.div,{className:`h-full ${i?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${e.experience/(e.level*100)*100}%`},transition:{duration:1}})})]}),h.jsxs(T.div,{className:`absolute top-full left-1/2 transform -translate-x-1/2 mt-2 p-2 rounded-lg text-xs opacity-0 pointer-events-none ${i?"bg-black border border-yellow-400 text-white":"bg-white text-gray-700 shadow-lg"}`,whileHover:{opacity:1},children:[h.jsxs("div",{children:["Level ",e.level]}),h.jsxs("div",{children:["Trust: ",e.relationships.trustLevel,"%"]}),h.jsxs("div",{children:["Bond: ",e.relationships.learningBond,"%"]}),h.jsxs("div",{children:[e.memories.totalSessions," sessions"]})]}),h.jsx(tt,{children:d==="celebrating"&&h.jsx(h.Fragment,{children:Array.from({length:8}).map((m,x)=>h.jsx(T.div,{className:"absolute text-2xl pointer-events-none",style:{left:"50%",top:"50%"},initial:{opacity:1,scale:0,x:0,y:0},animate:{opacity:0,scale:1,x:(Math.random()-.5)*100,y:(Math.random()-.5)*100},transition:{duration:2,delay:x*.1},children:["","","","","","","",""][x]},x))})}),h.jsx("button",{onClick:()=>u(!1),className:`absolute -top-2 -left-2 w-6 h-6 rounded-full text-xs ${i?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:""})]})}),!c&&h.jsx(T.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},onClick:()=>u(!0),className:`w-12 h-12 rounded-full flex items-center justify-center ${i?"bg-black border-2 border-yellow-400 text-yellow-400":"bg-purple-500 text-white shadow-lg"}`,children:e.avatar})]})},Vl={parent:{name:"Quiz Master",description:"Guide and encourage, provide hints when needed",abilities:["give_hints","adjust_difficulty","celebrate_progress","create_custom_questions"],avatar:""},child:{name:"Super Learner",description:"The star of the show! Answer questions and explore",abilities:["answer_questions","ask_for_help","choose_categories","express_creativity"],avatar:""},sibling:{name:"Learning Partner",description:"Team up, take turns, and support each other",abilities:["team_answers","peer_support","friendly_competition","shared_celebrations"],avatar:""},grandparent:{name:"Wisdom Keeper",description:"Share stories, provide gentle guidance, celebrate achievements",abilities:["storytelling","gentle_encouragement","cultural_knowledge","patience_modeling"],avatar:""},guardian:{name:"Learning Guide",description:"Support, encourage, and create a safe learning environment",abilities:["guidance","encouragement","safety_monitoring","progress_tracking"],avatar:""}},FP=[{id:"collaborative_drawing",name:"Family Drawing Challenge",description:"Draw the answer together before choosing!",type:"creative",minParticipants:2,duration:15,categories:["animals","shapes","fruits"],instructions:["Look at the question together","Each family member adds to the drawing","Discuss what you drew","Choose the answer together","Celebrate your teamwork!"]},{id:"story_creation",name:"Learning Story Time",description:"Create stories using quiz answers!",type:"narrative",minParticipants:2,duration:20,categories:["animals","colors","sounds"],instructions:["Start with a quiz question","Each person adds to the story using the answer","Pass the story to the next person","Continue until everyone contributes","Read the complete story together!"]},{id:"memory_palace",name:"Family Memory Palace",description:"Build memories together using quiz content!",type:"memory",minParticipants:2,duration:25,categories:["shapes","colors","animals"],instructions:["Choose a familiar place (like your house)","Place quiz answers in different rooms","Walk through together mentally","Test each other on the locations","Add new items as you learn!"]}],UP=({onStartFamilySession:e,soundEnabled:t,highContrast:r})=>{const{speak:n}=Ir(),[s,i]=_.useState([]),[o,a]=_.useState(null),[l,c]=_.useState("collaborative"),[u,d]=_.useState(!1),[f,p]=_.useState({});_.useEffect(()=>{const y=localStorage.getItem("family_members");y&&i(JSON.parse(y))},[]),_.useEffect(()=>{localStorage.setItem("family_members",JSON.stringify(s))},[s]);const g=()=>{var y;if(f.name&&f.role){const v={id:`member_${Date.now()}`,name:f.name,role:f.role,avatar:((y=Vl[f.role])==null?void 0:y.avatar)||"",age:f.age,preferences:{difficulty:"medium",categories:["animals","fruits","shapes"],participationStyle:"active"},stats:{sessionsPlayed:0,questionsAnswered:0,helpGiven:0,encouragementGiven:0}};i([...s,v]),p({}),d(!1),t&&n(`Welcome to the family, ${v.name}! Let's learn together!`)}},w=y=>{i(s.filter(v=>v.id!==y))},b=()=>{var v;if(s.length<2){t&&n("We need at least 2 family members to start a family session!");return}const y={id:`session_${Date.now()}`,type:l,participants:s,leader:((v=s.find(m=>m.role==="parent"))==null?void 0:v.id)||s[0].id,category:"mixed",difficulty:"adaptive",duration:20,specialRules:{helpAllowed:!0,discussionTime:10,drawingMode:o==="collaborative_drawing",voiceAnswers:l==="story-time"}};e(y),t&&n("Let's start our family learning adventure! Everyone ready?")};return h.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[h.jsxs(T.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[h.jsx("h2",{className:`text-5xl font-bold mb-4 ${r?"text-yellow-400":"text-white"}`,children:" Family Learning Time "}),h.jsx("p",{className:`text-xl ${r?"text-white":"text-white/90"}`,children:"Learn together, grow together, celebrate together!"})]}),h.jsxs(T.div,{className:`mb-8 p-6 rounded-3xl ${r?"bg-black border-4 border-yellow-400":"bg-white/10 backdrop-blur-lg border-2 border-white/20"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsxs("h3",{className:`text-2xl font-bold ${r?"text-yellow-400":"text-white"}`,children:["Family Members (",s.length,")"]}),h.jsx("button",{onClick:()=>d(!0),className:`px-6 py-3 rounded-2xl font-bold transition-all ${r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-white/20 text-white hover:bg-white/30"}`,children:"+ Add Family Member"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.map((y,v)=>{var m;return h.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.1},className:`p-4 rounded-2xl relative ${r?"bg-gray-800 border-2 border-yellow-400":"bg-white/10 border border-white/20"}`,children:[h.jsx("button",{onClick:()=>w(y.id),className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-red-500 text-white text-xs",children:""}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-4xl mb-2",children:y.avatar}),h.jsx("div",{className:`font-bold text-lg ${r?"text-yellow-400":"text-white"}`,children:y.name}),h.jsx("div",{className:`text-sm ${r?"text-white":"text-white/80"}`,children:(m=Vl[y.role])==null?void 0:m.name}),y.age&&h.jsxs("div",{className:`text-xs ${r?"text-gray-400":"text-white/60"}`,children:["Age: ",y.age]}),h.jsxs("div",{className:`mt-2 text-xs ${r?"text-gray-400":"text-white/60"}`,children:[y.stats.sessionsPlayed," sessions played"]})]})]},y.id)}),s.length===0&&h.jsxs("div",{className:`col-span-full text-center p-8 ${r?"text-white":"text-white/70"}`,children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("p",{children:"Add family members to start learning together!"})]})]})]}),h.jsxs(T.div,{className:`mb-8 p-6 rounded-3xl ${r?"bg-black border-4 border-yellow-400":"bg-white/10 backdrop-blur-lg border-2 border-white/20"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:[h.jsx("h3",{className:`text-2xl font-bold mb-6 ${r?"text-yellow-400":"text-white"}`,children:"Choose Learning Style"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"collaborative",name:"Team Work",description:"Work together on every question",icon:"",color:"from-blue-500 to-purple-500"},{type:"turn-based",name:"Take Turns",description:"Each person answers different questions",icon:"",color:"from-green-500 to-blue-500"},{type:"team-challenge",name:"Challenge Mode",description:"Compete in friendly challenges",icon:"",color:"from-yellow-500 to-orange-500"},{type:"story-time",name:"Story Time",description:"Learn through storytelling",icon:"",color:"from-pink-500 to-purple-500"}].map(y=>h.jsxs(T.button,{onClick:()=>c(y.type),className:`p-4 rounded-2xl text-center transition-all ${l===y.type?r?"bg-yellow-400 text-black border-4 border-yellow-300":"bg-white/20 border-2 border-white scale-105":r?"bg-gray-800 border-2 border-gray-600 hover:border-yellow-400":"bg-white/5 border border-white/20 hover:bg-white/10"}`,whileHover:{scale:l===y.type?1.05:1.02},whileTap:{scale:.98},children:[h.jsx("div",{className:"text-4xl mb-2",children:y.icon}),h.jsx("div",{className:`font-bold text-lg mb-1 ${l===y.type&&!r?"text-white":l===y.type&&r?"text-black":r?"text-yellow-400":"text-white"}`,children:y.name}),h.jsx("div",{className:`text-sm ${l===y.type&&!r?"text-white/90":l===y.type&&r?"text-black":r?"text-white":"text-white/70"}`,children:y.description})]},y.type))})]}),h.jsxs(T.div,{className:`mb-8 p-6 rounded-3xl ${r?"bg-black border-4 border-yellow-400":"bg-white/10 backdrop-blur-lg border-2 border-white/20"}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6},children:[h.jsx("h3",{className:`text-2xl font-bold mb-6 ${r?"text-yellow-400":"text-white"}`,children:"Special Activities"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:FP.map((y,v)=>h.jsxs(T.button,{onClick:()=>a(o===y.id?null:y.id),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7+v*.1},className:`p-4 rounded-2xl text-left transition-all ${o===y.id?r?"bg-yellow-400 text-black border-4 border-yellow-300":"bg-white/20 border-2 border-white":r?"bg-gray-800 border-2 border-gray-600 hover:border-yellow-400":"bg-white/5 border border-white/20 hover:bg-white/10"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[h.jsx("div",{className:`font-bold text-lg mb-2 ${o===y.id&&!r?"text-white":o===y.id&&r?"text-black":r?"text-yellow-400":"text-white"}`,children:y.name}),h.jsx("div",{className:`text-sm mb-3 ${o===y.id&&!r?"text-white/90":o===y.id&&r?"text-black":r?"text-white":"text-white/70"}`,children:y.description}),h.jsxs("div",{className:`text-xs ${o===y.id&&!r?"text-white/80":o===y.id&&r?"text-black/80":r?"text-gray-400":"text-white/60"}`,children:[y.duration," minutes  ",y.minParticipants,"+ people"]})]},y.id))})]}),h.jsxs(T.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[h.jsx("button",{onClick:b,disabled:s.length<2,className:`px-12 py-6 rounded-3xl font-bold text-2xl transition-all ${s.length>=2?r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-green-600 hover:to-blue-600":"bg-gray-500 text-gray-300 cursor-not-allowed"}`,whileHover:s.length>=2?{scale:1.05}:void 0,whileTap:s.length>=2?{scale:.95}:void 0,children:s.length>=2?" Start Family Learning!":" Need 2+ Family Members"}),s.length<2&&h.jsx("p",{className:`mt-4 text-sm ${r?"text-gray-400":"text-white/60"}`,children:"Add family members above to unlock family learning mode!"})]}),h.jsx(tt,{children:u&&h.jsx(T.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:h.jsxs(T.div,{className:`max-w-md w-full p-6 rounded-3xl ${r?"bg-black border-4 border-yellow-400":"bg-white"}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[h.jsx("h3",{className:`text-2xl font-bold mb-6 ${r?"text-yellow-400":"text-gray-800"}`,children:"Add Family Member"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-white":"text-gray-700"}`,children:"Name"}),h.jsx("input",{type:"text",value:f.name||"",onChange:y=>p({...f,name:y.target.value}),className:`w-full p-3 rounded-2xl ${r?"bg-gray-800 text-white border-2 border-yellow-400":"bg-gray-100 text-gray-800 border border-gray-300"}`,placeholder:"Enter name..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-white":"text-gray-700"}`,children:"Role"}),h.jsxs("select",{value:f.role||"",onChange:y=>p({...f,role:y.target.value}),className:`w-full p-3 rounded-2xl ${r?"bg-gray-800 text-white border-2 border-yellow-400":"bg-gray-100 text-gray-800 border border-gray-300"}`,children:[h.jsx("option",{value:"",children:"Select role..."}),Object.entries(Vl).map(([y,v])=>h.jsxs("option",{value:y,children:[v.avatar," ",v.name]},y))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-white":"text-gray-700"}`,children:"Age (optional)"}),h.jsx("input",{type:"number",value:f.age||"",onChange:y=>p({...f,age:parseInt(y.target.value)||void 0}),className:`w-full p-3 rounded-2xl ${r?"bg-gray-800 text-white border-2 border-yellow-400":"bg-gray-100 text-gray-800 border border-gray-300"}`,placeholder:"Age..."})]})]}),h.jsxs("div",{className:"flex gap-4 mt-6",children:[h.jsx("button",{onClick:()=>d(!1),className:`flex-1 py-3 rounded-2xl font-bold ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Cancel"}),h.jsx("button",{onClick:g,disabled:!f.name||!f.role,className:`flex-1 py-3 rounded-2xl font-bold ${f.name&&f.role?r?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-400 text-gray-600 cursor-not-allowed"}`,children:"Add Member"})]})]})})})]})},zP=({challenge:e,onComplete:t,soundEnabled:r,highContrast:n,onDismiss:s})=>{const{speak:i}=Ir(),[o,a]=_.useState(!1),[l,c]=_.useState("");_.useEffect(()=>{const d=()=>{const p=Date.now(),g=e.expiresAt-p;if(g<=0)c("Expired");else{const w=Math.floor(g/36e5),b=Math.floor(g%(1e3*60*60)/(1e3*60));c(`${w}h ${b}m remaining`)}};d();const f=setInterval(d,6e4);return()=>clearInterval(f)},[e.expiresAt]),_.useEffect(()=>{e.currentCount>=e.targetCount&&!e.completed&&(a(!0),r&&i(`Amazing! You completed the daily challenge! You earned ${e.rewardStars} bonus stars!`),setTimeout(()=>{t()},3e3))},[e.currentCount,e.targetCount,e.completed,r,i,t,e.rewardStars]);const u=Math.min(100,e.currentCount/e.targetCount*100);return h.jsx(tt,{children:h.jsxs(T.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`mb-6 p-6 rounded-3xl shadow-2xl relative overflow-hidden ${n?"bg-black border-4 border-yellow-400":"bg-gradient-to-r from-purple-500 via-pink-500 to-red-500"}`,children:[h.jsxs("div",{className:"absolute inset-0 opacity-10",children:[h.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full -translate-x-16 -translate-y-16"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-white rounded-full translate-x-20 translate-y-20"})]}),s&&h.jsx("button",{onClick:s,className:`absolute top-4 right-4 w-8 h-8 rounded-full flex items-center justify-center ${n?"bg-gray-700 text-white hover:bg-gray-600":"bg-white/20 text-white hover:bg-white/30"}`,children:""}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[h.jsx(T.div,{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${n?"bg-yellow-400 text-black":"bg-white/20 backdrop-blur-sm"}`,animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:h.jsx(Aj,{size:32,className:n?"text-black":"text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("h3",{className:`text-2xl font-bold ${n?"text-yellow-400":"text-white"}`,children:e.title}),e.completed&&h.jsx(T.div,{initial:{scale:0},animate:{scale:1},className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:" Completed!"})]}),h.jsx("p",{className:`text-lg ${n?"text-white":"text-white/90"}`,children:e.description})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:`text-sm font-medium ${n?"text-gray-300":"text-white/80"}`,children:["Progress: ",e.currentCount," / ",e.targetCount," quizzes"]}),h.jsxs("div",{className:`text-sm font-medium ${n?"text-gray-300":"text-white/80"}`,children:[Math.round(u),"%"]})]}),h.jsx("div",{className:`h-4 rounded-full overflow-hidden ${n?"bg-gray-700":"bg-white/20"}`,children:h.jsx(T.div,{className:`h-full ${e.completed?"bg-green-500":n?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${u}%`},transition:{duration:.5}})})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full ${n?"bg-gray-800 border-2 border-yellow-400":"bg-white/20 backdrop-blur-sm"}`,children:[h.jsx(jy,{className:n?"text-yellow-400":"text-yellow-300",size:20}),h.jsx("span",{className:`font-bold ${n?"text-yellow-400":"text-white"}`,children:e.reward})]}),h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full ${n?"bg-gray-800 border-2 border-yellow-400":"bg-white/20 backdrop-blur-sm"}`,children:[h.jsx(ky,{className:n?"text-yellow-400":"text-yellow-300",size:20}),h.jsxs("span",{className:`font-bold ${n?"text-yellow-400":"text-white"}`,children:["+",e.rewardStars," Stars"]})]})]}),h.jsx("div",{className:`text-sm ${n?"text-gray-400":"text-white/70"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(kd,{size:16}),l]})})]})]}),h.jsx(tt,{children:o&&h.jsx(T.div,{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-r from-green-500 to-emerald-500 z-20",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:h.jsxs("div",{className:"text-center",children:[h.jsx(T.div,{className:"text-8xl mb-4",animate:{rotate:[0,360],scale:[1,1.2,1]},transition:{duration:1,repeat:2},children:""}),h.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"Challenge Complete!"}),h.jsxs("div",{className:"text-2xl text-white/90",children:["+",e.rewardStars," Bonus Stars! "]})]})})})]})})};function WP(){const[e,t]=_.useState("menu"),[r,n]=_.useState(null),[s,i]=_.useState(null),[o,a]=_.useState(null),[l,c]=_.useState([]),[u,d]=_.useState(0),[f,p]=_.useState({correct:0,total:0}),[g,w]=_.useState({difficulty:"beginner",sound_enabled:!0,high_contrast:!1,categories_enabled:{animals:!0,fruits:!0,shapes:!0,colors:!0,sounds:!0}}),[b,y]=_.useState(!1),[v,m]=_.useState(null),[x,S]=_.useState(null),[k]=_.useState(()=>`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),[j,E]=_.useState(()=>{const A=localStorage.getItem("selected_buddy");return A?JSON.parse(A):LP[0]}),[N,I]=_.useState("idle"),[Q,te]=_.useState(null),[ge,U]=_.useState(new Date),[J,q]=_.useState([]),[ye,C]=_.useState([]),[$,V]=_.useState(null),[M,H]=_.useState(!0),{user:Ge,isAuthenticated:ot}=La(),{progress:Ve,updateProgress:je,saveQuizResult:$t,resetProgress:Ma,loading:hs}=OP(),{getCurrentChapter:pn,updateAdventureProgress:It}=$P(),{speak:Et}=Ir();_.useEffect(()=>{const A=localStorage.getItem("quiz_settings");A&&w(JSON.parse(A))},[]),_.useEffect(()=>{localStorage.setItem("selected_buddy",JSON.stringify(j))},[j]),_.useEffect(()=>{const A=new Date().toDateString(),ae=localStorage.getItem("daily_challenge");if(localStorage.getItem("last_challenge_date")===A&&ae)V(JSON.parse(ae));else{const _e=Ev();V(_e),localStorage.setItem("daily_challenge",JSON.stringify(_e)),localStorage.setItem("last_challenge_date",A)}},[]),_.useEffect(()=>{$&&localStorage.setItem("daily_challenge",JSON.stringify($))},[$]);const Ev=()=>{const A=[{title:" Daily Learning Star",description:"Complete 5 quizzes today!",targetCount:5,reward:"Daily Star Badge",rewardStars:10},{title:" Quiz Master Challenge",description:"Answer 3 quizzes perfectly today!",targetCount:3,reward:"Perfect Day Badge",rewardStars:15},{title:" Learning Streak",description:"Complete 7 quizzes today!",targetCount:7,reward:"Super Learner Badge",rewardStars:20},{title:" Category Explorer",description:"Try all 5 categories today!",targetCount:5,reward:"Explorer Badge",rewardStars:12}],ae=A[Math.floor(Math.random()*A.length)],be=new Date;return be.setHours(23,59,59,999),{id:`daily_${Date.now()}`,...ae,currentCount:0,expiresAt:be.getTime(),completed:!1}},Tv=()=>{if($&&!$.completed){const A={...$,currentCount:$.currentCount+1};A.currentCount>=A.targetCount&&(A.completed=!0,je(!0,r||void 0).then(ae=>{for(let be=0;be<A.rewardStars;be++)setTimeout(()=>{je(!0,r||void 0)},be*100)})),V(A)}},Pv=()=>{g.sound_enabled&&Et("Congratulations! You earned your daily reward!")},Cv=_.useCallback(A=>{w(A),localStorage.setItem("quiz_settings",JSON.stringify(A))},[]);_.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(A=>{console.log("SW registered: ",A)}).catch(A=>{console.log("SW registration failed: ",A)})},[]),_.useEffect(()=>{if(g.sound_enabled&&e==="menu"){I("greeting");const A=setTimeout(()=>{Et("Welcome to Kids Quiz Adventure! Choose between quick quiz or story mode!"),setTimeout(()=>I("idle"),3e3)},1e3);return()=>clearTimeout(A)}},[e,g.sound_enabled,Et]);const Dd=A=>{var tr;const be=[...Xi.filter(Dt=>Dt.category===A)].sort(()=>Math.random()-.5),_e=be.slice(0,Math.min(10,be.length));if(n(A),c(_e),d(0),p({correct:0,total:0}),t("quiz"),U(new Date),q([new Date]),C([]),g.sound_enabled){const Dt=((tr=pi.find(Fa=>Fa.id===A))==null?void 0:tr.name)||"quiz";Et(`Let's start the ${Dt} quiz! Get ready!`)}},Nv=async A=>{try{const ae=await DP.getAdventureByCategory(A);ae&&(i(ae),n(ae.categoryId),t("story-intro"))}catch(ae){console.error("Error starting story adventure:",ae),de.error("Failed to load story adventure")}},Ld=async A=>{if(!s)return;const ae=s.chapters.find(Dt=>Dt.id===A);if(!ae)return;a(ae);const tr=[...Xi.filter(Dt=>Dt.category===s.categoryId)].sort(()=>Math.random()-.5).slice(0,ae.questionsNeeded);c(tr),d(0),p({correct:0,total:0}),t("story-quiz"),g.sound_enabled&&Et(`Beginning ${ae.title}! Let's explore together!`)},Va=async(A,ae)=>{const be=l[u],_e={...f,correct:f.correct+(A?1:0),total:f.total+1};p(_e);const tr=new Date,Dt=J[u]||new Date,Fa=(tr.getTime()-Dt.getTime())/1e3,Bd={id:be.id,correct:A,timeSpent:Fa,difficulty:g.difficulty==="beginner"?.5:.8};C([...ye,Bd]),I(A?"correct":"incorrect"),setTimeout(()=>I("idle"),3e3),r&&be&&await $t({category:r,questionId:be.id,questionText:be.question,selectedAnswer:ae,correctAnswer:be.correctAnswer,isCorrect:A,responseTimeMs:0,difficulty:g.difficulty,sessionId:k});const Ov=Ve.badges,$v=Ve.level,Fd=await je(A,r||void 0);A&&(S("correct"),Fd.badges>Ov&&setTimeout(()=>S("badge"),1500),Fd.level>$v&&setTimeout(()=>S("level"),3e3)),setTimeout(()=>{if(u<l.length-1)d(u+1),q([...J,new Date]);else{if(Ge&&r)try{const rr=new Date().getHours(),Iv=rr<12?"morning":rr<18?"afternoon":"evening",Ud=[...ye,Bd],Dv={category:r,questions:Ud,sessionStart:ge,sessionEnd:new Date},Ua=Cs.analyzePerformance(Ge.id||"guest",Dv);Cs.updateLearningPattern(Ge.id||"guest",{category:r,performance:Ua,timeOfDay:Iv,mistakes:Ud.filter(Ci=>!Ci.correct).map(Ci=>{const za=l.find(Mv=>Mv.id===Ci.id);return{questionId:Ci.id,selectedAnswer:"",correctAnswer:(za==null?void 0:za.correctAnswer)||""}})});const Lv=Cs.getPersonalizedEncouragement(Ge.id||"guest",Ua),zd=Cs.generateRecommendations(Ge.id||"guest",Ua);zd.length>0&&zd[0].priority==="high"&&setTimeout(()=>{de(Lv,{duration:4e3,icon:""})},3e3)}catch(rr){console.error("Error analyzing adaptive learning:",rr)}if(e==="story-quiz"&&s&&o&&It(s.id,o.id,_e),Tv(),t(e==="story-quiz"?"chapter-complete":"results"),g.sound_enabled){const rr=Math.round(_e.correct/_e.total*100);rr>=80?Et(`Fantastic! You got ${_e.correct} out of ${_e.total} correct! That's ${rr} percent!`):rr>=60?Et(`Good job! You got ${_e.correct} out of ${_e.total} correct! Keep practicing!`):Et(`Nice try! You got ${_e.correct} out of ${_e.total} correct! Let's try again!`)}}},2e3)},Md=()=>{const A=setTimeout(()=>{y(!0),m(null)},3e3);m(A)},Vd=()=>{v&&(clearTimeout(v),m(null))},Ba=()=>{t("menu"),n(null),i(null),a(null),c([]),d(0),p({correct:0,total:0}),te(null)},Av=A=>{te(A),n(A.category==="mixed"?"animals":A.category);const _e=[...A.category==="mixed"?Xi:Xi.filter(tr=>tr.category===A.category)].sort(()=>Math.random()-.5).slice(0,10);c(_e),d(0),p({correct:0,total:0}),t("family-session"),g.sound_enabled&&Et("Let's start our family learning adventure together!")},Rv=async()=>{if(s)try{const A=await pn(s,Ve.stars);A&&A.id!==(o==null?void 0:o.id)?Ld(A.id):t("story-intro")}catch(A){console.error("Error getting next chapter:",A),t("story-intro")}};return hs?h.jsx("div",{className:`min-h-screen flex items-center justify-center ${g.high_contrast?"bg-black text-white":"bg-gradient-to-br from-purple-400 via-pink-400 to-red-400"}`,children:h.jsx("div",{className:"text-4xl font-bold",children:"Loading... "})}):h.jsx(RP,{showUserInfo:ot,children:h.jsxs("div",{className:`min-h-screen transition-all duration-500 ${g.high_contrast?"bg-black text-white":"bg-gradient-to-br from-purple-400 via-pink-400 to-red-400"}`,children:[h.jsxs("header",{className:"p-6 flex items-center justify-between",children:[h.jsxs(T.div,{className:"flex items-center gap-4",initial:{x:-50,opacity:0},animate:{x:0,opacity:1},children:[h.jsx("div",{className:"text-6xl",children:""}),h.jsxs("div",{children:[h.jsx("h1",{className:`text-4xl font-bold ${g.high_contrast?"text-yellow-400":"text-white"}`,children:"Kids Quiz Adventure"}),h.jsx("p",{className:`text-lg ${g.high_contrast?"text-white":"text-white/80"}`,children:"Learn and have fun!"})]})]}),h.jsx(T.button,{className:`w-12 h-12 rounded-full ${g.high_contrast?"bg-yellow-400 text-black":"bg-white/20 text-white"} flex items-center justify-center text-2xl`,onMouseDown:Md,onMouseUp:Vd,onTouchStart:Md,onTouchEnd:Vd,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Hold for 3 seconds to access parental menu",children:""})]}),h.jsx("div",{className:"px-6 mb-6",children:h.jsx(xj,{progress:Ve,highContrast:g.high_contrast})}),$&&M&&!$.completed&&e==="menu"&&h.jsx("div",{className:"px-6 mb-6",children:h.jsx(zP,{challenge:$,onComplete:Pv,soundEnabled:g.sound_enabled,highContrast:g.high_contrast,onDismiss:()=>H(!1)})}),h.jsx("main",{className:"px-6 pb-6",children:h.jsxs(tt,{mode:"wait",children:[e==="menu"&&h.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-6xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(T.h2,{className:`text-5xl font-bold mb-4 ${g.high_contrast?"text-yellow-400":"text-white"}`,initial:{scale:.8},animate:{scale:1},transition:{delay:.2},children:"Choose Your Adventure!"}),h.jsx(T.p,{className:`text-xl ${g.high_contrast?"text-white":"text-white/90"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"Quick quiz or immersive story mode?"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[h.jsxs(T.button,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.6},onClick:()=>t("story-select"),className:`p-8 rounded-3xl shadow-2xl transition-all duration-300 hover:scale-105 ${g.high_contrast?"bg-black border-4 border-yellow-400 hover:bg-yellow-400/10":"bg-gradient-to-br from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"}`,children:[h.jsx("div",{className:"text-8xl mb-4",children:""}),h.jsx("h3",{className:`text-3xl font-bold mb-4 ${g.high_contrast?"text-yellow-400":"text-white"}`,children:"Story Mode"}),h.jsx("p",{className:`text-lg ${g.high_contrast?"text-white":"text-white/90"}`,children:"Join character companions on magical learning adventures!"})]}),h.jsxs(T.button,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.8},onClick:()=>{t("menu"),setTimeout(()=>{const A=document.getElementById("categories");A==null||A.scrollIntoView({behavior:"smooth"})},100)},className:`p-8 rounded-3xl shadow-2xl transition-all duration-300 hover:scale-105 ${g.high_contrast?"bg-black border-4 border-yellow-400 hover:bg-yellow-400/10":"bg-gradient-to-br from-blue-500 to-green-500 hover:from-blue-600 hover:to-green-600"}`,children:[h.jsx("div",{className:"text-8xl mb-4",children:""}),h.jsx("h3",{className:`text-3xl font-bold mb-4 ${g.high_contrast?"text-yellow-400":"text-white"}`,children:"Quick Quiz"}),h.jsx("p",{className:`text-lg ${g.high_contrast?"text-white":"text-white/90"}`,children:"Jump straight into fun learning challenges!"})]}),h.jsxs(T.button,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:1},onClick:()=>t("family-mode-setup"),className:`p-8 rounded-3xl shadow-2xl transition-all duration-300 hover:scale-105 ${g.high_contrast?"bg-black border-4 border-yellow-400 hover:bg-yellow-400/10":"bg-gradient-to-br from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600"}`,children:[h.jsx("div",{className:"text-8xl mb-4",children:""}),h.jsx("h3",{className:`text-3xl font-bold mb-4 ${g.high_contrast?"text-yellow-400":"text-white"}`,children:"Family Mode"}),h.jsx("p",{className:`text-lg ${g.high_contrast?"text-white":"text-white/90"}`,children:"Learn together as a family with collaborative games!"})]})]}),h.jsxs("div",{id:"categories",children:[h.jsx("div",{className:"text-center mb-8",children:h.jsx("h3",{className:`text-3xl font-bold ${g.high_contrast?"text-yellow-400":"text-white"}`,children:"Quick Quiz Categories"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:pi.map((A,ae)=>h.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1+ae*.1},children:h.jsx(vj,{category:A,onClick:()=>Dd(A.id),disabled:!g.categories_enabled[A.id],highContrast:g.high_contrast})},A.id))})]})]},"menu"),e==="story-select"&&h.jsxs(T.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},children:[h.jsx("div",{className:"mb-6 flex justify-center",children:h.jsx("button",{onClick:Ba,className:`px-6 py-3 rounded-2xl font-bold text-lg transition-all ${g.high_contrast?"bg-gray-700 text-white hover:bg-gray-600":"bg-white/20 text-white hover:bg-white/30"}`,children:" Back to Main Menu"})}),h.jsx(nE,{progress:Ve,onSelectAdventure:Nv,highContrast:g.high_contrast})]},"story-select"),e==="story-intro"&&s&&h.jsx(T.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:h.jsx(sE,{adventure:s,progress:Ve,onStartChapter:Ld,onBack:()=>t("story-select"),soundEnabled:g.sound_enabled,highContrast:g.high_contrast})},"story-intro"),e==="quiz"&&l[u]&&h.jsxs(T.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("div",{className:`text-2xl font-bold ${g.high_contrast?"text-yellow-400":"text-white"}`,children:["Question ",u+1," of ",l.length]}),h.jsx("div",{className:`w-full h-2 ${g.high_contrast?"bg-gray-700":"bg-white/20"} rounded-full mt-2 overflow-hidden`,children:h.jsx(T.div,{className:`h-full ${g.high_contrast?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${(u+1)/l.length*100}%`},transition:{duration:.5}})})]}),h.jsx(sp,{question:l[u],onAnswer:Va,difficulty:g.difficulty,soundEnabled:g.sound_enabled,highContrast:g.high_contrast})]},"quiz"),e==="story-quiz"&&s&&o&&l[u]&&h.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:h.jsx(wj,{question:l[u],adventure:s,chapter:o,onAnswer:Va,difficulty:g.difficulty,soundEnabled:g.sound_enabled,highContrast:g.high_contrast,questionNumber:u+1,totalQuestions:o.questionsNeeded})},"story-quiz"),e==="chapter-complete"&&s&&o&&h.jsx(T.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:h.jsx(iE,{adventure:s,completedChapter:o,progress:Ve,score:f,onContinue:Rv,onReturnToStory:()=>t("story-intro"),soundEnabled:g.sound_enabled,highContrast:g.high_contrast})},"chapter-complete"),e==="family-mode-setup"&&h.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[h.jsx(UP,{onStartFamilySession:Av,soundEnabled:g.sound_enabled,highContrast:g.high_contrast}),h.jsx("div",{className:"text-center mt-8",children:h.jsx("button",{onClick:Ba,className:`px-8 py-4 rounded-xl font-bold text-lg transition-all hover:scale-105 ${g.high_contrast?"bg-white/20 border-2 border-yellow-400 text-yellow-400 hover:bg-yellow-400/10":"bg-white/20 text-white hover:bg-white/30"}`,children:" Back to Main Menu"})})]},"family-mode-setup"),e==="family-session"&&Q&&l[u]&&h.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("div",{className:`text-3xl font-bold mb-2 ${g.high_contrast?"text-yellow-400":"text-white"}`,children:" Family Learning Time"}),h.jsxs("div",{className:`text-xl mb-4 ${g.high_contrast?"text-white":"text-white/90"}`,children:[Q.participants.length," family members  ",Q.type.replace("-"," ")]}),h.jsxs("div",{className:`text-2xl font-bold ${g.high_contrast?"text-yellow-400":"text-white"}`,children:["Question ",u+1," of ",l.length]}),h.jsx("div",{className:`w-full h-2 ${g.high_contrast?"bg-gray-700":"bg-white/20"} rounded-full mt-2 overflow-hidden`,children:h.jsx(T.div,{className:`h-full ${g.high_contrast?"bg-yellow-400":"bg-white"}`,initial:{width:0},animate:{width:`${(u+1)/l.length*100}%`},transition:{duration:.5}})})]}),h.jsx(sp,{question:l[u],onAnswer:Va,difficulty:g.difficulty,soundEnabled:g.sound_enabled,highContrast:g.high_contrast})]},"family-session"),e==="results"&&h.jsx(T.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"max-w-2xl mx-auto text-center",children:h.jsxs(T.div,{className:`p-12 rounded-3xl shadow-2xl ${g.high_contrast?"bg-black border-4 border-yellow-400":"bg-white"}`,initial:{y:20},animate:{y:0},transition:{delay:.2},children:[h.jsx("div",{className:"text-8xl mb-6",children:f.correct/f.total>=.8?"":f.correct/f.total>=.6?"":""}),h.jsx("h2",{className:`text-4xl font-bold mb-4 ${g.high_contrast?"text-yellow-400":"text-gray-800"}`,children:f.correct/f.total>=.8?"Fantastic!":f.correct/f.total>=.6?"Good Job!":"Nice Try!"}),h.jsxs("div",{className:`text-2xl mb-8 ${g.high_contrast?"text-white":"text-gray-600"}`,children:["You got ",h.jsx("span",{className:"font-bold text-green-600",children:f.correct})," out of ",h.jsx("span",{className:"font-bold",children:f.total})," correct!"]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>r&&Dd(r),className:`flex-1 p-4 rounded-2xl font-bold text-xl transition-all ${g.high_contrast?"bg-yellow-400 text-black hover:bg-yellow-300":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Try Again"}),h.jsx("button",{onClick:Ba,className:`flex-1 p-4 rounded-2xl font-bold text-xl transition-all ${g.high_contrast?"bg-white text-black hover:bg-gray-200":"bg-gray-500 text-white hover:bg-gray-600"}`,children:"Main Menu"})]})]})},"results")]})}),h.jsx(Hj,{isOpen:b,onClose:()=>y(!1),settings:g,onUpdateSettings:Cv,onResetProgress:Ma}),h.jsx(tE,{show:x!==null,type:x||"correct",onComplete:()=>S(null)}),h.jsx(BP,{buddy:j,onBuddyUpdate:A=>E(A),context:N,performanceData:{streak:f.correct,accuracy:f.total>0?f.correct/f.total:0,timeSpent:0,category:r||""},soundEnabled:g.sound_enabled,highContrast:g.high_contrast}),h.jsx(yj,{position:"top-center",toastOptions:{duration:2e3,style:{background:g.high_contrast?"#000":"#fff",color:g.high_contrast?"#fff":"#000",border:g.high_contrast?"2px solid #ffd700":"none",fontSize:"18px",fontWeight:"bold"}}})]})})}class qP extends Gt.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("App Error:",t,r)}render(){return this.state.hasError?h.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[h.jsx("h1",{children:"Something went wrong."}),h.jsx("details",{style:{whiteSpace:"pre-wrap"},children:this.state.error&&this.state.error.toString()}),h.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Page"})]}):this.props.children}}Bl.createRoot(document.getElementById("root")).render(h.jsx(Gt.StrictMode,{children:h.jsx(qP,{children:h.jsx(WP,{})})}));
